<!--
  Generated template for the AboutPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>发送InApp通知</ion-title>
    <ion-buttons end>
      <button [disabled]="!template || !stringMembers && !groupRecipients?.length" ion-button color="primary" (click)="send()">發送請求</button>
    </ion-buttons>    
  </ion-navbar>

</ion-header>

<ion-content padding>

    <ion-list>
        <ion-list-header>發送InApp通知</ion-list-header>

        <ion-item>
          <ion-label color="primary">接收群組</ion-label>
          <ion-select fxFlex [(ngModel)]="groupRecipients" multiple="true" cancelText="取消" okText="确定">
            <ion-option value="{{g.groupName}}" *ngFor="let g of groups">
                {{g.title || g.groupName}}
            </ion-option>
          </ion-select>
        </ion-item>

        <button ion-item (click)="selectMembers()">
            <ion-label color="primary">接收成員</ion-label>
            <ion-input [value]="stringMembers" disabled></ion-input>
            <!-- {{stringMembers}} -->
            <!-- <button ion-button color="primary" (click)="selectMembers()">Select</button> -->
        </button>

        <ion-item>
            <ion-input placeholder="发送标题" [(ngModel)]="title" style="margin-top: 10px;"></ion-input>
        </ion-item>        

        <ion-item>
            <ion-textarea placeholder="发送内容" [(ngModel)]="template" maxlength="2000" rows="5" style="margin-top: 10px;"></ion-textarea>
        </ion-item>

        <ion-item>
            <ion-input placeholder="缩略图" [(ngModel)]="thumbnail" style="margin-top: 10px;"></ion-input>
        </ion-item> 

        <ion-item>
            <ion-input placeholder="超链接" [(ngModel)]="hyperlink" style="margin-top: 10px;"></ion-input>
        </ion-item>                 

        <ion-item>
          <ion-select [(ngModel)]="redirect" placeholder="重定向頁面（高級）" (ionCancel)="redirect = null">
            <ion-option [value]="'list-page'">列表頁面</ion-option>
            <ion-option [value]="'song-page'">詩歌頁面</ion-option>
            <ion-option [value]="'activity-page'">活動頁面</ion-option>
            <ion-option [value]="'ministry-page'">侍奉人員頁面</ion-option>
            <ion-option [value]="'sermon-page'">講道頁面</ion-option>
            <ion-option [value]="'chat-page'">讨论頁面</ion-option>
          </ion-select>
        </ion-item>

        <ion-item>
            <ion-textarea placeholder="重定向參數（高級）" [(ngModel)]="params" maxlength="2000" rows="5" style="margin-top: 10px;"></ion-textarea>
        </ion-item>        

    </ion-list> 

    <div *ngIf="groupRecipients.length > 0 || stringMembers" class="ibc-h-padding-20 ibc-v-padding-20" style="opacity: 0.8">
        <p ion-note>消息将发送至：</p>
        {{allRecipientsText}}
    </div>

    <button [disabled]="!template || !stringMembers && !groupRecipients?.length" ion-button block color="blue-800" (click)="send()">发送请求</button>

</ion-content>
