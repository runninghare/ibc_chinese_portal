webpackJsonp([1],{

/***/ 1054:
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": 397,
	"./af.js": 397,
	"./ar": 398,
	"./ar-dz": 399,
	"./ar-dz.js": 399,
	"./ar-kw": 400,
	"./ar-kw.js": 400,
	"./ar-ly": 401,
	"./ar-ly.js": 401,
	"./ar-ma": 402,
	"./ar-ma.js": 402,
	"./ar-sa": 403,
	"./ar-sa.js": 403,
	"./ar-tn": 404,
	"./ar-tn.js": 404,
	"./ar.js": 398,
	"./az": 405,
	"./az.js": 405,
	"./be": 406,
	"./be.js": 406,
	"./bg": 407,
	"./bg.js": 407,
	"./bm": 408,
	"./bm.js": 408,
	"./bn": 409,
	"./bn.js": 409,
	"./bo": 410,
	"./bo.js": 410,
	"./br": 411,
	"./br.js": 411,
	"./bs": 412,
	"./bs.js": 412,
	"./ca": 413,
	"./ca.js": 413,
	"./cs": 414,
	"./cs.js": 414,
	"./cv": 415,
	"./cv.js": 415,
	"./cy": 416,
	"./cy.js": 416,
	"./da": 417,
	"./da.js": 417,
	"./de": 418,
	"./de-at": 419,
	"./de-at.js": 419,
	"./de-ch": 420,
	"./de-ch.js": 420,
	"./de.js": 418,
	"./dv": 421,
	"./dv.js": 421,
	"./el": 422,
	"./el.js": 422,
	"./en-au": 423,
	"./en-au.js": 423,
	"./en-ca": 424,
	"./en-ca.js": 424,
	"./en-gb": 425,
	"./en-gb.js": 425,
	"./en-ie": 426,
	"./en-ie.js": 426,
	"./en-il": 427,
	"./en-il.js": 427,
	"./en-nz": 428,
	"./en-nz.js": 428,
	"./eo": 429,
	"./eo.js": 429,
	"./es": 430,
	"./es-do": 431,
	"./es-do.js": 431,
	"./es-us": 432,
	"./es-us.js": 432,
	"./es.js": 430,
	"./et": 433,
	"./et.js": 433,
	"./eu": 434,
	"./eu.js": 434,
	"./fa": 435,
	"./fa.js": 435,
	"./fi": 436,
	"./fi.js": 436,
	"./fo": 437,
	"./fo.js": 437,
	"./fr": 438,
	"./fr-ca": 439,
	"./fr-ca.js": 439,
	"./fr-ch": 440,
	"./fr-ch.js": 440,
	"./fr.js": 438,
	"./fy": 441,
	"./fy.js": 441,
	"./gd": 442,
	"./gd.js": 442,
	"./gl": 443,
	"./gl.js": 443,
	"./gom-latn": 444,
	"./gom-latn.js": 444,
	"./gu": 445,
	"./gu.js": 445,
	"./he": 446,
	"./he.js": 446,
	"./hi": 447,
	"./hi.js": 447,
	"./hr": 448,
	"./hr.js": 448,
	"./hu": 449,
	"./hu.js": 449,
	"./hy-am": 450,
	"./hy-am.js": 450,
	"./id": 451,
	"./id.js": 451,
	"./is": 452,
	"./is.js": 452,
	"./it": 453,
	"./it.js": 453,
	"./ja": 454,
	"./ja.js": 454,
	"./jv": 455,
	"./jv.js": 455,
	"./ka": 456,
	"./ka.js": 456,
	"./kk": 457,
	"./kk.js": 457,
	"./km": 458,
	"./km.js": 458,
	"./kn": 459,
	"./kn.js": 459,
	"./ko": 460,
	"./ko.js": 460,
	"./ky": 461,
	"./ky.js": 461,
	"./lb": 462,
	"./lb.js": 462,
	"./lo": 463,
	"./lo.js": 463,
	"./lt": 464,
	"./lt.js": 464,
	"./lv": 465,
	"./lv.js": 465,
	"./me": 466,
	"./me.js": 466,
	"./mi": 467,
	"./mi.js": 467,
	"./mk": 468,
	"./mk.js": 468,
	"./ml": 469,
	"./ml.js": 469,
	"./mn": 470,
	"./mn.js": 470,
	"./mr": 471,
	"./mr.js": 471,
	"./ms": 472,
	"./ms-my": 473,
	"./ms-my.js": 473,
	"./ms.js": 472,
	"./mt": 474,
	"./mt.js": 474,
	"./my": 475,
	"./my.js": 475,
	"./nb": 476,
	"./nb.js": 476,
	"./ne": 477,
	"./ne.js": 477,
	"./nl": 478,
	"./nl-be": 479,
	"./nl-be.js": 479,
	"./nl.js": 478,
	"./nn": 480,
	"./nn.js": 480,
	"./pa-in": 481,
	"./pa-in.js": 481,
	"./pl": 482,
	"./pl.js": 482,
	"./pt": 483,
	"./pt-br": 484,
	"./pt-br.js": 484,
	"./pt.js": 483,
	"./ro": 485,
	"./ro.js": 485,
	"./ru": 486,
	"./ru.js": 486,
	"./sd": 487,
	"./sd.js": 487,
	"./se": 488,
	"./se.js": 488,
	"./si": 489,
	"./si.js": 489,
	"./sk": 490,
	"./sk.js": 490,
	"./sl": 491,
	"./sl.js": 491,
	"./sq": 492,
	"./sq.js": 492,
	"./sr": 493,
	"./sr-cyrl": 494,
	"./sr-cyrl.js": 494,
	"./sr.js": 493,
	"./ss": 495,
	"./ss.js": 495,
	"./sv": 496,
	"./sv.js": 496,
	"./sw": 497,
	"./sw.js": 497,
	"./ta": 498,
	"./ta.js": 498,
	"./te": 499,
	"./te.js": 499,
	"./tet": 500,
	"./tet.js": 500,
	"./tg": 501,
	"./tg.js": 501,
	"./th": 502,
	"./th.js": 502,
	"./tl-ph": 503,
	"./tl-ph.js": 503,
	"./tlh": 504,
	"./tlh.js": 504,
	"./tr": 505,
	"./tr.js": 505,
	"./tzl": 506,
	"./tzl.js": 506,
	"./tzm": 507,
	"./tzm-latn": 508,
	"./tzm-latn.js": 508,
	"./tzm.js": 507,
	"./ug-cn": 509,
	"./ug-cn.js": 509,
	"./uk": 510,
	"./uk.js": 510,
	"./ur": 511,
	"./ur.js": 511,
	"./uz": 512,
	"./uz-latn": 513,
	"./uz-latn.js": 513,
	"./uz.js": 512,
	"./vi": 514,
	"./vi.js": 514,
	"./x-pseudo": 515,
	"./x-pseudo.js": 515,
	"./yo": 516,
	"./yo.js": 516,
	"./zh-cn": 517,
	"./zh-cn.js": 517,
	"./zh-hk": 518,
	"./zh-hk.js": 518,
	"./zh-tw": 519,
	"./zh-tw.js": 519
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 1054;

/***/ }),

/***/ 1065:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonDirectivesModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__contact_link_contact_link__ = __webpack_require__(1066);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__map_link_map_link__ = __webpack_require__(1067);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__one_time_one_time__ = __webpack_require__(1068);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__parse_html_parse_html__ = __webpack_require__(1069);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__question_question__ = __webpack_require__(1070);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






var CommonDirectivesModule = (function () {
    function CommonDirectivesModule() {
    }
    CommonDirectivesModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_1__contact_link_contact_link__["a" /* ContactLinkDirective */],
                __WEBPACK_IMPORTED_MODULE_2__map_link_map_link__["a" /* MapLinkDirective */],
                __WEBPACK_IMPORTED_MODULE_3__one_time_one_time__["a" /* OneTimeDirective */],
                __WEBPACK_IMPORTED_MODULE_4__parse_html_parse_html__["a" /* ParseHtmlDirective */],
                __WEBPACK_IMPORTED_MODULE_5__question_question__["a" /* QuestionDirective */]
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_1__contact_link_contact_link__["a" /* ContactLinkDirective */],
                __WEBPACK_IMPORTED_MODULE_2__map_link_map_link__["a" /* MapLinkDirective */],
                __WEBPACK_IMPORTED_MODULE_3__one_time_one_time__["a" /* OneTimeDirective */],
                __WEBPACK_IMPORTED_MODULE_4__parse_html_parse_html__["a" /* ParseHtmlDirective */],
                __WEBPACK_IMPORTED_MODULE_5__question_question__["a" /* QuestionDirective */]
            ],
            imports: [],
        })
    ], CommonDirectivesModule);
    return CommonDirectivesModule;
}());

//# sourceMappingURL=directives.module.js.map

/***/ }),

/***/ 1066:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ContactLinkDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages_contact_contact__ = __webpack_require__(667);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_jquery__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the ContactLinkDirective directive.
 *
 * See https://angular.io/api/core/Directive for more info on Angular
 * Directives.
 */
var ContactLinkDirective = (function () {
    function ContactLinkDirective(el, navControler) {
        this.el = el;
        this.navControler = navControler;
    }
    ContactLinkDirective.prototype.click = function () {
        var _this = this;
        if (this.contact) {
            this.navControler.push(__WEBPACK_IMPORTED_MODULE_2__pages_contact_contact__["a" /* ContactPage */], { prefilter: function (contact) { return contact.id == _this.contact.id; } });
        }
    };
    ContactLinkDirective.prototype.ngOnInit = function () {
        if (this.contact) {
            __WEBPACK_IMPORTED_MODULE_3_jquery__(this.el.nativeElement).text(this.contact.name + " (" + this.contact.chinese_name + ")");
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('contact-link'),
        __metadata("design:type", Object)
    ], ContactLinkDirective.prototype, "contact", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["y" /* HostListener */])('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], ContactLinkDirective.prototype, "click", null);
    ContactLinkDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[contact-link]' // Attribute selector
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */]])
    ], ContactLinkDirective);
    return ContactLinkDirective;
}());

//# sourceMappingURL=contact-link.js.map

/***/ }),

/***/ 1067:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MapLinkDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages_map_map__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_jquery__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the MapDirective directive.
 *
 * See https://angular.io/api/core/Directive for more info on Angular
 * Directives.
 */
var MapLinkDirective = (function () {
    function MapLinkDirective(el, navControler, modalCtrl) {
        this.el = el;
        this.navControler = navControler;
        this.modalCtrl = modalCtrl;
        console.log('Hello MapDirective Directive');
    }
    MapLinkDirective.prototype.click = function () {
        var _this = this;
        if (this.address) {
            // console.log('--- link address ---');
            // console.log(this.address);
            // let selectModal = this.modalCtrl.create(MapPage, {address: this.address, title: this.title});
            // selectModal.present();
            setTimeout(function () {
                _this.navControler.push(__WEBPACK_IMPORTED_MODULE_2__pages_map_map__["a" /* MapPage */], { address: _this.address, title: _this.title });
            });
        }
    };
    MapLinkDirective.prototype.ngOnInit = function () {
        if (this.address) {
            // console.log('--- directive ---');
            // console.log(this.el.nativeElement);
            __WEBPACK_IMPORTED_MODULE_3_jquery__(this.el.nativeElement).html("<a href=\"#\">" + this.address + "</a>");
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('map-link'),
        __metadata("design:type", String)
    ], MapLinkDirective.prototype, "address", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('title'),
        __metadata("design:type", String)
    ], MapLinkDirective.prototype, "title", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["y" /* HostListener */])('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], MapLinkDirective.prototype, "click", null);
    MapLinkDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[map-link]' // Attribute selector
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */]])
    ], MapLinkDirective);
    return MapLinkDirective;
}());

//# sourceMappingURL=map-link.js.map

/***/ }),

/***/ 1068:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OneTimeDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

/**
 * One-time template rendering for simple {{}} templates, e.g.
 *
 * Hello <ng-template oneTime>{{name}}</ng-template>!
 */
var OneTimeDirective = (function () {
    function OneTimeDirective(template, container, zone) {
        zone.runOutsideAngular(function () {
            var view = container.createEmbeddedView(template);
            setTimeout(function () { return view.detach(); });
        });
    }
    OneTimeDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[one-time]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["_6" /* TemplateRef */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewContainerRef */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["M" /* NgZone */]])
    ], OneTimeDirective);
    return OneTimeDirective;
}());

//# sourceMappingURL=one-time.js.map

/***/ }),

/***/ 1069:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ParseHtmlDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};


/**
 * Generated class for the ParseHtmlDirective directive.
 *
 * See https://angular.io/api/core/Directive for more info on Angular
 * Directives.
 */
var ParseHtmlDirective = (function () {
    function ParseHtmlDirective(elem) {
        this.elem = elem;
    }
    ParseHtmlDirective.prototype.ngOnInit = function () {
        console.log('=== elem ===');
        console.log(this.parseHtml);
        __WEBPACK_IMPORTED_MODULE_1_jquery__(this.elem.nativeElement).html(this.parseHtml);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('parse-html'),
        __metadata("design:type", String)
    ], ParseHtmlDirective.prototype, "parseHtml", void 0);
    ParseHtmlDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[parse-html]' // Attribute selector
        }),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["w" /* Host */])()), __param(0, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_1" /* Self */])()), __param(0, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* Optional */])()),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], ParseHtmlDirective);
    return ParseHtmlDirective;
}());

//# sourceMappingURL=parse-html.js.map

/***/ }),

/***/ 1070:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return QuestionDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_notification_notification__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_rxjs__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the QuestionDirective directive.
 *
 * See https://angular.io/api/core/Directive for more info on Angular
 * Directives.
 */
var QuestionDirective = (function () {
    function QuestionDirective(commonSvc, content, notificationSvc) {
        this.commonSvc = commonSvc;
        this.content = content;
        this.notificationSvc = notificationSvc;
        this.answerEvent = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */](null);
    }
    QuestionDirective.prototype.click = function () {
        // console.log(this.questionParams);
        if (this.questionParams) {
            this.popUp();
        }
        else {
            this.answerEvent.emit('ok');
        }
    };
    QuestionDirective.prototype.popUp = function () {
        var _this = this;
        console.log('--- question pops up ---');
        console.log(this.questionParams);
        var alert, lookupSource;
        switch (this.questionParams.type) {
            case "boolean":
                alert = this.commonSvc.alertCtrl.create({
                    message: this.questionParams.caption,
                    buttons: [
                        {
                            text: '否',
                            handler: function (val) {
                                if (_this.questionParams.recipient &&
                                    _this.questionParams.notifications && _this.questionParams.notifications[0]) {
                                    _this.notificationSvc.addNotification(_this.questionParams.recipient, _this.questionParams.notifications[0]);
                                }
                                _this.answerEvent.emit('no');
                            }
                        },
                        {
                            text: '是',
                            handler: function (val) {
                                if (_this.questionParams.recipient &&
                                    _this.questionParams.notifications && _this.questionParams.notifications[1]) {
                                    _this.notificationSvc.addNotification(_this.questionParams.recipient, _this.questionParams.notifications[1]);
                                }
                                _this.answerEvent.emit('yes');
                            }
                        }
                    ]
                });
                alert.present();
                // code...
                break;
            case "dropdown":
            case "multi-dropdown":
                console.log('--- go dropdown ---');
                alert = this.commonSvc.alertCtrl.create({
                    message: this.questionParams.caption,
                    inputs: [],
                    buttons: [
                        {
                            text: '取消',
                            role: 'cancel'
                        },
                        {
                            text: '確定',
                            handler: function (val) { return _this.answerEvent.emit(val); }
                        }
                    ]
                });
                lookupSource = this.questionParams.lookupSource;
                if (typeof lookupSource == 'string' && lookupSource.match(/\$$/)) {
                    lookupSource = eval("this.content." + lookupSource);
                    // console.log('--- lookup source as observable ---');
                    // console.log(lookupSource);
                }
                if (lookupSource instanceof __WEBPACK_IMPORTED_MODULE_4_rxjs__["Observable"]) {
                    lookupSource.subscribe(function (choices) {
                        var lookupCaption = _this.questionParams.lookupCaption || 'caption';
                        var lookupValue = _this.questionParams.lookupValue || 'value';
                        choices.forEach(function (choice) {
                            alert.addInput({
                                type: _this.questionParams.type == 'multi-dropdown' ? 'checkbox' : 'radio',
                                label: lookupCaption.match(/choice\./) ? eval(lookupCaption) : choice[lookupCaption],
                                value: lookupValue.match(/choice\./) ? eval(lookupValue) : choice[lookupValue],
                            });
                        });
                        alert.present();
                    });
                }
                break;
            default:
                alert = this.commonSvc.alertCtrl.create({
                    message: this.questionParams.caption,
                    inputs: [
                        {
                            name: "answer",
                        }
                    ],
                    buttons: [
                        {
                            text: '取消',
                            role: 'cancel'
                        },
                        {
                            text: '確定',
                            handler: function (val) { return _this.answerEvent.emit(val.answer); }
                        }
                    ]
                });
                alert.present();
                break;
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["y" /* HostListener */])('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], QuestionDirective.prototype, "click", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('question'),
        __metadata("design:type", Object)
    ], QuestionDirective.prototype, "questionParams", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["O" /* Output */])('answer'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], QuestionDirective.prototype, "answerEvent", void 0);
    QuestionDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[question]' // Attribute selector
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_notification_notification__["a" /* NotificationProvider */]])
    ], QuestionDirective);
    return QuestionDirective;
}());

//# sourceMappingURL=question.js.map

/***/ }),

/***/ 1071:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MonthlyVersesPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_http__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_ibc_style_ibc_style__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__app_env__ = __webpack_require__(41);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



// import * as $ from 'jquery';


/**
 * Generated class for the MonthlyVersesPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MonthlyVersesPage = (function () {
    function MonthlyVersesPage(navCtrl, navParams, platform, http, ibcStyle) {
        // this.verse_pictures = ["http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/150701-Memory-Verse-July-2015-fb-web.jpg-nggid03192-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.jpg","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/150801-Memory-Verse-August-2015-fb-web.jpg-nggid03193-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.jpg","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/150901-Memory-Verse-September-2015-fb-web.jpg-nggid03194-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.jpg","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/151001-Memory-Verse-October-2015-fb-web.jpg-nggid03195-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.jpg","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/151101-Memory-Verse-November-fb-web.png-nggid03196-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/151201-Memory-Verse-December-2015-fb-web.fw_.png-nggid03197-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/160101-Memory-Verse-January-2016-fb-web.fw_.png-nggid03198-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/160201-Memory-Verse-February-2016-fb-web.fw_.png-nggid03199-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/160301-Memory-Verse-March-2016-fb-web.fw_.png-nggid03200-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/160401-Memory-Verse-April-2016-fb-web.fw_.png-nggid03201-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/160501-Memory-Verse-May-2016-fb-web.fw_.png-nggid03202-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/160601-Memory-Verse-June-2016-fb-web.fw_.png-nggid03203-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/160701-Memory-Verse-July-2016-fb-web.fw_.png-nggid03204-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/160801-Memory-Verse-August-2016-fb-web.fw_.png-nggid03205-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/160901-Memory-Verse-September-2016-fb-web.jpg-nggid03206-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.jpg","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/161001-Memory-Verse-October-2016-fb-web.jpg-nggid03207-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.jpg","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/170201-Memory-Verse-February-2017-fb-web.fw_.png-nggid03208-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/170301-Memory-Verse-March-2017-fb-web.fw_.png-nggid03209-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/170401-Memory-Verse-April-2017-fb-web.fw_.png-nggid03210-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/170501-Memory-Verse-May-2017-fb-web.fw_.png-nggid03211-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/170601-Memory-Verse-June-2017-fb-web.fw_.png-nggid03213-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png","http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/170701-Memory-Verse-July-2017-fb-web.fw_.png-nggid03212-ngg0dyn-400x200x100-00f0w010c011r110f110r010t010.png"];
        // let churchPageUrl = 'http://www.islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/';
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.platform = platform;
        this.http = http;
        this.ibcStyle = ibcStyle;
        this.verse_pictures = [];
        this.loading = false;
        this.bgColor = this.ibcStyle.randomBg;
        this.targetUrl = __WEBPACK_IMPORTED_MODULE_4__app_env__["a" /* ENV */].apiServer + "/jsdom";
        // http.get(this.targetUrl).subscribe((data) => {
        //     console.log("=== data comes! ===");
        // })
        // 
        // 
        this.loading = true;
        this.http.get(__WEBPACK_IMPORTED_MODULE_4__app_env__["a" /* ENV */].apiServer + "/jsdom").subscribe(function (res) {
            var data = res.json();
            _this.verse_pictures = data.message;
            // this.verse_pictures = data.contents.match(/href=".*400x200x100[^"]*/g).map(url => "http://islingtonbaptist.org.au/hp_wordpress/wp-content/uploads/gallery/memory-verses-1/dynamic/" + url.replace("href=\"", ""));
        }, function (err) {
            _this.error = err;
        }, function () {
            _this.loading = false;
        });
    }
    MonthlyVersesPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad MonthlyVersesPage');
    };
    MonthlyVersesPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-monthly-verses',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/monthly-verses/monthly-verses.html"*/'<!--\n  Generated template for the MonthlyVersesPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header color="transparent">\n\n  <ion-navbar color="transparent">\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>本月金句</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n<ion-content class="page-spinner-container" *ngIf="loading">\n  <ion-spinner class="page-spinner"></ion-spinner>\n</ion-content>\n\n<ion-content padding [ngClass]="bgColor">\n    {{err}}\n    <!-- {{verse_pictures}} -->\n    \n  <ion-card *ngFor="let pic of verse_pictures">\n    <img [src]="pic"/>\n<!--     <div class="card-title">São Paulo</div>\n    <div class="card-subtitle">41 Listings</div> -->\n  </ion-card>\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/monthly-verses/monthly-verses.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2__angular_http__["b" /* Http */],
            __WEBPACK_IMPORTED_MODULE_3__providers_ibc_style_ibc_style__["a" /* IbcStyleProvider */]])
    ], MonthlyVersesPage);
    return MonthlyVersesPage;
}());

//# sourceMappingURL=monthly-verses.js.map

/***/ }),

/***/ 1072:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ComponentsModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

// import { SharedModule } from '../app/shared.module';
// import { PopupComponent } from '../components/popup/popup';
// import { LoadTrackerComponent } from '../components/load-tracker/load-tracker';
// import { IbcMapComponent } from '../components/ibc-map/ibc-map';
// import { YoutubeVideoComponent } from '../components/youtube-video/youtube-video';
// import { IbcEditorComponent } from '../components/editor/editor';
// import { BrowserComponent } from '../components/browser/browser';
// import { PhotoEditComponent } from '../components/photo-edit/photo-edit';
// import { HeaderPopOverComponent } from '../components/header-pop-over/header';
// import { CommentComponent } from '../components/comment/comment';
var ComponentsModule = (function () {
    function ComponentsModule() {
    }
    ComponentsModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [],
            // imports: [SharedModule],
            exports: []
        })
    ], ComponentsModule);
    return ComponentsModule;
}());

//# sourceMappingURL=components.module.js.map

/***/ }),

/***/ 1073:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PipesModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__highlight_highlight__ = __webpack_require__(1074);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__keep_html_keep_html__ = __webpack_require__(1075);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var PipesModule = (function () {
    function PipesModule() {
    }
    PipesModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [__WEBPACK_IMPORTED_MODULE_2__highlight_highlight__["a" /* HighlightPipe */],
                __WEBPACK_IMPORTED_MODULE_3__keep_html_keep_html__["a" /* KeepHtmlPipe */]],
            imports: [__WEBPACK_IMPORTED_MODULE_1__angular_common__["b" /* CommonModule */]],
            exports: [__WEBPACK_IMPORTED_MODULE_2__highlight_highlight__["a" /* HighlightPipe */],
                __WEBPACK_IMPORTED_MODULE_3__keep_html_keep_html__["a" /* KeepHtmlPipe */]]
        })
    ], PipesModule);
    return PipesModule;
}());

//# sourceMappingURL=pipes.module.js.map

/***/ }),

/***/ 1074:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HighlightPipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_s2t_s2t__ = __webpack_require__(56);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var HighlightPipe = (function () {
    function HighlightPipe(sanitizer, s2t) {
        this.sanitizer = sanitizer;
        this.s2t = s2t;
    }
    HighlightPipe.prototype.transform = function (content, filterText, matchTrC) {
        /* matchTrC: match traditional chinese */
        if (!filterText)
            return content;
        if (matchTrC) {
            filterText = this.s2t.tranStr(filterText, true);
        }
        filterText = filterText.replace(/^\s*|\s*$/, '');
        var result = content && content.replace(new RegExp(filterText, 'ig'), '<span style="font-size: 2rem; color: blue">$&</span>');
        return this.sanitizer.bypassSecurityTrustHtml(result || "");
    };
    HighlightPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["S" /* Pipe */])({ name: 'highlight' })
        // @Pipe({ name: 'keepHtml', pure: false })
        ,
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__["c" /* DomSanitizer */], __WEBPACK_IMPORTED_MODULE_2__providers_s2t_s2t__["a" /* S2tProvider */]])
    ], HighlightPipe);
    return HighlightPipe;
}());

//# sourceMappingURL=highlight.js.map

/***/ }),

/***/ 1075:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return KeepHtmlPipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var KeepHtmlPipe = (function () {
    function KeepHtmlPipe(sanitizer) {
        this.sanitizer = sanitizer;
    }
    KeepHtmlPipe.prototype.transform = function (content) {
        return this.sanitizer.bypassSecurityTrustHtml(content || "");
    };
    KeepHtmlPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["S" /* Pipe */])({ name: 'keepHtml' })
        // @Pipe({ name: 'keepHtml', pure: false })
        ,
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__["c" /* DomSanitizer */]])
    ], KeepHtmlPipe);
    return KeepHtmlPipe;
}());

//# sourceMappingURL=keep-html.js.map

/***/ }),

/***/ 1078:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LoadTrackerComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_load_tracker_load_tracker__ = __webpack_require__(30);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the LoadTrackerComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var LoadTrackerComponent = (function () {
    function LoadTrackerComponent(loadTracker) {
        this.loadTracker = loadTracker;
    }
    LoadTrackerComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'load-tracker',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/load-tracker/load-tracker.html"*/'<div *ngIf="loadTracker.loading" class="loader-overlay">\n    <ion-spinner class="page-spinner" name="ios"></ion-spinner>\n</div>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/load-tracker/load-tracker.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */]])
    ], LoadTrackerComponent);
    return LoadTrackerComponent;
}());

//# sourceMappingURL=load-tracker.js.map

/***/ }),

/***/ 1079:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IbcMapComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_native__ = __webpack_require__(186);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_native_geocoder__ = __webpack_require__(669);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_launch_navigator__ = __webpack_require__(198);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_common_common__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



// import { NativeGeocoder, NativeGeocoderReverseResult, NativeGeocoderForwardResult } from '@ionic-native/native-geocoder';

// import { LaunchNavigator, LaunchNavigatorOptions } from '@ionic-native/launch-navigator';

/**
 * Generated class for the IbcMapComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var IbcMapComponent = (function () {
    function IbcMapComponent(common, nativeGeocoder, navLauncher) {
        this.common = common;
        this.nativeGeocoder = nativeGeocoder;
        this.navLauncher = navLauncher;
        this.lat = 0;
        this.lng = 0;
        this.title = "Target";
        // platform.ready().then(() => {
        //     setTimeout(() => {
        //         this.loadMap();
        //     }, 500);
        // });
    }
    IbcMapComponent.prototype.ngOnInit = function () {
        // console.log(`The address is ${this.address}`);
        var _this = this;
        this.common.platform.ready().then(function () {
            if (_this.common.isWeb && _this.address) {
                _this.iframeUrl = "https://maps.google.com/maps?width=100&height=600&hl=en&q=" + _this.address + "&ie=UTF8&t=&z=14&iwloc=B&output=embed";
                _this.sanitizedUrl = _this.common.sanitize(_this.iframeUrl);
                return;
            }
            if (!_this.lat || !_this.lng) {
                _this.nativeGeocoder.forwardGeocode(_this.address)
                    .then(function (coordinates) {
                    console.log('The coordinates are latitude=');
                    console.log(JSON.stringify(coordinates, null, 2));
                    if (coordinates && coordinates['length'] > 0) {
                        _this.lat = coordinates[0].latitude;
                        _this.lng = coordinates[0].longitude;
                        setTimeout(function () {
                            _this.loadMap();
                        }, 500);
                    }
                })
                    .catch(function (error) { return console.log(error); });
            }
            else {
                setTimeout(function () {
                    _this.loadMap();
                }, 500);
            }
        });
    };
    IbcMapComponent.prototype.loadMap = function () {
        var _this = this;
        var location = new __WEBPACK_IMPORTED_MODULE_1_ionic_native__["c" /* GoogleMapsLatLng */](this.lat, this.lng);
        this.map = new __WEBPACK_IMPORTED_MODULE_1_ionic_native__["a" /* GoogleMap */]('map', {
            'backgroundColor': 'white',
            'controls': {
                'compass': true,
                'myLocationButton': true,
                'indoorPicker': true,
                'zoom': true
            },
            'gestures': {
                'scroll': true,
                'tilt': true,
                'rotate': true,
                'zoom': true
            },
            'camera': {
                'latLng': location,
                'tilt': 30,
                'zoom': 15,
                'bearing': 50
            }
        });
        this.map.on(__WEBPACK_IMPORTED_MODULE_1_ionic_native__["b" /* GoogleMapsEvent */].MAP_READY).subscribe(function () {
            console.log('Map is ready!');
            _this.map.addMarker({
                title: _this.title,
                icon: 'blue',
                animation: 'DROP',
                position: location
            })
                .then(function (marker) {
                marker.on(__WEBPACK_IMPORTED_MODULE_1_ionic_native__["b" /* GoogleMapsEvent */].MARKER_CLICK)
                    .subscribe(function () {
                    alert('clicked');
                });
            });
        });
    };
    IbcMapComponent.prototype.geoNavigate = function () {
        this.navLauncher.navigate(this.address).then(function () {
        }, console.error);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('lat'),
        __metadata("design:type", Number)
    ], IbcMapComponent.prototype, "lat", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('lng'),
        __metadata("design:type", Number)
    ], IbcMapComponent.prototype, "lng", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('title'),
        __metadata("design:type", String)
    ], IbcMapComponent.prototype, "title", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('address'),
        __metadata("design:type", String)
    ], IbcMapComponent.prototype, "address", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('height'),
        __metadata("design:type", String)
    ], IbcMapComponent.prototype, "height", void 0);
    IbcMapComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'ibc-map',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/ibc-map/ibc-map.html"*/'<!-- Generated template for the IbcMapComponent component -->\n\n<script src="https://maps.googleapis.com/maps/api/js?callback=myMap"></script>\n\n<ng-container *ngIf="!iframeUrl">\n    <div id="map" [style.height]="height"></div>   \n    <ion-buttons>\n      <button ion-button block color="teal" (click)="geoNavigate()">導航</button>\n    </ion-buttons> \n</ng-container>\n\n<div class="ibc-full-width ibc-top-margin-20" *ngIf="iframeUrl">\n    <iframe width="100%" [height]="height" [src]="sanitizedUrl" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>\n</div>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/ibc-map/ibc-map.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_native_geocoder__["a" /* NativeGeocoder */], __WEBPACK_IMPORTED_MODULE_3__ionic_native_launch_navigator__["a" /* LaunchNavigator */]])
    ], IbcMapComponent);
    return IbcMapComponent;
}());

//# sourceMappingURL=ibc-map.js.map

/***/ }),

/***/ 1080:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return YoutubeVideoComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_video_video__ = __webpack_require__(115);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the YoutubeVideoComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var YoutubeVideoComponent = (function () {
    function YoutubeVideoComponent(videoSvc) {
        this.videoSvc = videoSvc;
    }
    YoutubeVideoComponent.prototype.play = function () {
        this.videoSvc.play(this.youtubeId);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('title'),
        __metadata("design:type", String)
    ], YoutubeVideoComponent.prototype, "title", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('youtubeId'),
        __metadata("design:type", String)
    ], YoutubeVideoComponent.prototype, "youtubeId", void 0);
    YoutubeVideoComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'youtube-video',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/youtube-video/youtube-video.html"*/'<img class="ibc-full-width" style="display: block" [src]="\'https://img.youtube.com/vi/\' + youtubeId + \'/0.jpg\'"/>\n<div class="video-container">\n    <div class="video-overlay" *ngIf="title"></div>\n    <div class="video-font" fxLayout="column" fxLayoutAlign="center center">\n        <ion-icon name="logo-youtube"></ion-icon>\n        <div>{{title}}</div>\n    </div>\n</div>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/youtube-video/youtube-video.html"*/,
            host: {
                '(click)': 'play()',
                class: 'ibc-display-block ibc-pointer'
            }
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__providers_video_video__["a" /* VideoProvider */]])
    ], YoutubeVideoComponent);
    return YoutubeVideoComponent;
}());

//# sourceMappingURL=youtube-video.js.map

/***/ }),

/***/ 1081:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BrowserComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the BrowserPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var BrowserComponent = (function () {
    function BrowserComponent(navCtrl, navParams) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
    }
    BrowserComponent.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad BrowserPage');
    };
    BrowserComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'ibc-browser',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/browser/browser.html"*/'<!--\n  Generated template for the BrowserPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <ion-title>browser</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/browser/browser.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */]])
    ], BrowserComponent);
    return BrowserComponent;
}());

//# sourceMappingURL=browser.js.map

/***/ }),

/***/ 1082:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommentComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pages_chat_chat__ = __webpack_require__(201);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_ibc_http_ibc_http__ = __webpack_require__(57);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the CommentComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var CommentComponent = (function () {
    function CommentComponent(navCtrl, commonSvc, content, http) {
        this.navCtrl = navCtrl;
        this.commonSvc = commonSvc;
        this.content = content;
        this.http = http;
        this.messages = [];
        console.log('Hello CommentComponent Component');
        this.text = 'Hello World';
    }
    CommentComponent.prototype.goToChat = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_1__pages_chat_chat__["a" /* ChatPage */], { contact: { id: this.chatId, name: '留言', chinese_name: this.title, class: 'group' }, thread: this.threadRes });
    };
    CommentComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.subscription = this.content.currentUser$.subscribe(function (auth) {
            if (_this.chatId) {
                var body = { receiver_id: _this.chatId };
                _this.http.post("firebase/thread_with", body).then(function (res) {
                    _this.threadRes = res;
                    if (res && res.thread && res.thread.messages) {
                        _this.messages = res.thread.messages;
                    }
                });
            }
        });
    };
    CommentComponent.prototype.ngOnDestroy = function () {
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('chatId'),
        __metadata("design:type", String)
    ], CommentComponent.prototype, "chatId", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('title'),
        __metadata("design:type", String)
    ], CommentComponent.prototype, "title", void 0);
    CommentComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'ibc-comment',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/comment/comment.html"*/'<!-- Generated template for the CommentComponent component -->\n<ion-buttons class="ibc-top-margin-20" ion-end *ngIf="commonSvc.isMember && content.auth && chatId">\n  <button ion-button block ion-end (click)="goToChat()">留言評論 ({{messages.length}})</button>\n</ion-buttons>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/comment/comment.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_4__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_5__providers_ibc_http_ibc_http__["a" /* IbcHttpProvider */]])
    ], CommentComponent);
    return CommentComponent;
}());

//# sourceMappingURL=comment.js.map

/***/ }),

/***/ 1083:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ActivityPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_browser_browser__ = __webpack_require__(116);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_audio_audio__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_notification_notification__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_rxjs__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_rxjs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_chat_chat__ = __webpack_require__(201);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_photo_photo__ = __webpack_require__(118);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_ibc_http_ibc_http__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__components_popup_popup__ = __webpack_require__(119);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__providers_video_video__ = __webpack_require__(115);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__providers_wechat_wechat__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















/**
 * Generated class for the ActivityPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ActivityPage = (function () {
    function ActivityPage(ibcHttp, navCtrl, modalCtrl, navParams, browser, commonSvc, content, audioSvc, notificationSvc, photoSvc, ibcFB, loadTrackerSvc, videoSvc, wechat) {
        var _this = this;
        this.ibcHttp = ibcHttp;
        this.navCtrl = navCtrl;
        this.modalCtrl = modalCtrl;
        this.navParams = navParams;
        this.browser = browser;
        this.commonSvc = commonSvc;
        this.content = content;
        this.audioSvc = audioSvc;
        this.notificationSvc = notificationSvc;
        this.photoSvc = photoSvc;
        this.ibcFB = ibcFB;
        this.loadTrackerSvc = loadTrackerSvc;
        this.videoSvc = videoSvc;
        this.wechat = wechat;
        this.activity = {};
        this.persons = [];
        this.currentParticipantsCount = 0;
        this.myIndex = -1;
        this.subscriptions = [];
        this.activityId = navParams.get('id');
        this.subscriptions.push(this.content.activities$.subscribe(function (activities) {
            var act = activities.filter(function (item) { return item.id == _this.activityId; })[0];
            if (act) {
                _this.activity = act;
                _this.activityIndex = activities.indexOf(act);
                _this.activity.past = __WEBPACK_IMPORTED_MODULE_16_moment__().isAfter(act.datetime);
                _this.currentParticipantsCount = act.participants ? act.participants.length : 0;
                _this.activityDB = _this.content.activitiesDB.child("" + _this.activityIndex);
            }
            if (act && act.participants) {
                if (!_this.content.myselfContact) {
                    _this.myIndex = -1;
                }
                else {
                    _this.myIndex = act.participants.map(function (p) { return p.userId; }).indexOf(_this.content.myselfContact.id);
                }
                _this.persons = _this.content.allContacts.filter(function (contact) { return _this.activity.participants.filter(function (p) { return p.userId == contact.id; }).length > 0; });
            }
            else {
                _this.myIndex = -1;
                _this.persons = [];
            }
            if (act && act.question) {
                act.answerChoices = act.answerChoices || "";
                _this.question = {
                    "caption": act.question,
                    "key": act.questionKey,
                    "type": act.questionType,
                    "lookupSource": __WEBPACK_IMPORTED_MODULE_7_rxjs__["Observable"].of(act.answerChoices.split(/\s*[,，]\s*/).map(function (v) {
                        return {
                            caption: v,
                            value: v
                        };
                    }))
                };
            }
        }, function (err) { }));
        this.subscriptions.push(this.content.lastCounts$.subscribe(function (lastCounts) {
            _this.lastContactCounts = lastCounts && lastCounts['contacts'];
        }, function (err) { }));
    }
    ActivityPage.prototype.ngOnDestroy = function () {
        this.subscriptions.forEach(function (sub) { return sub && sub.unsubscribe(); });
    };
    ActivityPage.prototype.getParticipantFromPerson = function (person) {
        if (person) {
            return this.activity.participants.filter(function (p) { return p.userId == person.id; })[0];
        }
        else {
            return null;
        }
    };
    ActivityPage.prototype.sendAddNotification = function () {
        var datetimeCaption = __WEBPACK_IMPORTED_MODULE_16_moment__(this.activity.datetime).format("M月D日");
        var item = {
            datetime: this.activity.datetime,
            // isNew: true,
            key: (this.activity.key || this.activity.title) + "-" + this.activity.datetime,
            value: this.activity.key || this.activity.title,
            params: {
                id: this.activityId
            },
            redirect: "activity-page",
            sender: this.content.myselfContact.id,
            subtitle: "",
            title: "\u6559\u6703\u6D3B\u52D5\uFF1A" + datetimeCaption + " - " + this.activity.title
        };
        this.notificationSvc.addNotification(this.content.myselfContact.id, item);
    };
    ActivityPage.prototype.sendCancelNotification = function () {
        this.notificationSvc.removeMyNotification((this.activity.key || this.activity.title) + "-" + this.activity.datetime);
    };
    ActivityPage.prototype.register = function (val) {
        var _this = this;
        if (this.myIndex >= 0) {
            /* Already registered */
            return;
        }
        this.activityDB
            .child('participants')
            .child("" + this.currentParticipantsCount)
            .set({
            userId: this.content.myselfContact.id,
            comment: val
        }).then(function () {
            _this.commonSvc.toastSuccess("\u6B61\u8FCE\u52A0\u5165 " + _this.activity.title + " \u6D3B\u52D5!");
            _this.sendAddNotification();
        }, function (err) {
            _this.commonSvc.toastFailure('加入失敗', err);
        });
        // let createAnserFunc = (val: string = null) => {
        //   console.log(val);
        //   return () => {
        //     this.activityDB
        //       .child('participants')
        //       .child(`${this.currentParticipantsCount}`)
        //       .set({
        //         userId: this.content.myselfContact.id,
        //         comment: val
        //       }).then(() => {
        //         this.commonSvc.toastSuccess(`歡迎加入 ${this.activity.title} 活動!`);
        //       }, err => {
        //         this.commonSvc.toastFailure('加入失敗', err);
        //       })
        //     }
        // };
        // if (this.activity.question) {
        //     let alert;
        //     switch (this.activity.questionType) {
        //         case "yesOrNo":
        //             alert = this.commonSvc.alertCtrl.create({
        //                 message: this.activity.question,
        //                 // inputs: [
        //                 //     {
        //                 //       type: 'radio',
        //                 //       label: '否',
        //                 //       value: '否',
        //                 //     },
        //                 //     {
        //                 //       type: 'radio',
        //                 //       label: '是',
        //                 //       value: '是',
        //                 //     },                        
        //                 // ],
        //                 buttons: [{
        //                     text: '否',
        //                     role: 'cancel',
        //                     handler: createAnserFunc('否')
        //                 },
        //                 {
        //                     text: '是',
        //                     handler: createAnserFunc('是')
        //                   }
        //                 ]
        //             });
        //             alert.present();
        //             // code...
        //             break;
        //         case "selection":
        //             alert = this.commonSvc.alertCtrl.create({
        //                 message: this.activity.question,
        //                 inputs: [],
        //                 buttons: [
        //                   {
        //                     text: '確定參加',
        //                     handler: data => createAnserFunc(data)()
        //                   }
        //                 ]
        //             });
        //             if (this.activity.answerChoices) {
        //               this.activity.answerChoices.split(/\s*[,，]\s*/).forEach(choice => {
        //                 alert.addInput({
        //                   type: 'radio',
        //                   label: choice,
        //                   value: choice
        //                 });
        //               });
        //             }
        //             alert.present();
        //             break;
        //         default:
        //             alert = this.commonSvc.alertCtrl.create({
        //                 message: this.activity.question,
        //                 inputs: [
        //                     {
        //                       name: 'answer',
        //                     }
        //                 ],
        //                 buttons: [
        //                   {
        //                     text: '確定參加',
        //                     handler: data => createAnserFunc(data.answer)()
        //                   }
        //                 ]
        //             });
        //             alert.present();            
        //             break;
        //       }
        // } else {
        //   createAnserFunc()();
        // }
    };
    ActivityPage.prototype.cancel = function () {
        var _this = this;
        this.commonSvc.confirmDialog(null, '你真的要退出嗎？', function () {
            if (_this.myIndex >= 0) {
                _this.activity.participants.splice(_this.myIndex, 1);
                console.log(_this.activity.participants);
                _this.activityDB
                    .child('participants')
                    .set(_this.activity.participants).then(function () {
                    _this.commonSvc.toastSuccess("\u4F60\u5DF2\u7D93\u9000\u51FA " + _this.activity.title + " \u6D3B\u52D5!");
                    _this.sendCancelNotification();
                }, function (err) {
                    _this.commonSvc.toastFailure('退出失敗', err);
                });
            }
        });
    };
    ActivityPage.prototype.addContact = function () {
        var _this = this;
        var newId = this.lastContactCounts + 1;
        Promise.all([
            this.content.allContactsDB.child("" + newId).set({
                id: newId,
                name: 'Activity',
                chinese_name: this.activity.title,
                skills: [],
                class: 'group',
                hidden: true,
                createDT: __WEBPACK_IMPORTED_MODULE_16_moment__().format("YYYY-MM-DD HH:mm:ss")
            }),
            this.content.lastCountDB.child('contacts').set(newId)
        ])
            .then(function () {
            _this.commonSvc.toastSuccess('添加成功');
        })
            .catch(function (err) {
            _this.commonSvc.toastFailure('添加失败', err);
        });
    };
    ActivityPage.prototype.goToChat = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__pages_chat_chat__["a" /* ChatPage */], { contact: { id: this.activity.chatId, name: '留言', chinese_name: this.activity.title, class: 'group' } });
    };
    ActivityPage.prototype.openLink = function (url) {
        this.browser.openPage(url);
    };
    ActivityPage.prototype.removePhoto = function (photo) {
        var _this = this;
        if (!photo || !this.activity.pictures)
            return;
        var index = this.activity.pictures.indexOf(photo);
        this.commonSvc.confirmDialog("你確定要刪除這張照片嗎", "刪除後所有人將無法看見", function () {
            _this.activity.pictures.splice(index, 1);
            _this.activityDB.child("pictures").set(_this.activity.pictures).then(function () {
                _this.commonSvc.toastSuccess('相片已成功删除');
            }).catch(function (err) {
                console.log(_this.activity.pictures);
                _this.commonSvc.toastFailure('删除失败', function (err) { console.error(JSON.stringify(err, null, 2)); });
            });
        });
    };
    ActivityPage.prototype.addPhoto = function (url) {
        var _this = this;
        if (url) {
            if (!this.activity.pictures) {
                this.activity.pictures = [];
            }
            if (typeof url == 'string') {
                this.activity.pictures.push(url);
            }
            else if (Array.isArray(url)) {
                url.forEach(function (u) {
                    _this.activity.pictures.push(u);
                });
            }
            this.activityDB.child("pictures").set(this.activity.pictures).then(function () {
                _this.commonSvc.toastSuccess('圖片上傳成功');
            }).catch(function (err) {
                console.log(_this.activity.pictures);
                _this.commonSvc.toastFailure('上傳失敗', function (err) { console.error(JSON.stringify(err, null, 2)); });
            });
        }
    };
    ActivityPage.prototype.addVideo = function () {
        var _this = this;
        if (this.commonSvc.isWeb) {
            var itemToEdit = {};
            var popupModal_1 = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_13__components_popup_popup__["a" /* PopupComponent */], {
                title: 'Youtube',
                definitions: [
                    {
                        key: 'title',
                        caption: '標題'
                    },
                    {
                        key: 'youtubeId',
                        caption: 'Youtube ID'
                    }
                ],
                item: itemToEdit,
                cancel: function () { return popupModal_1.dismiss(); },
                save: function (item) {
                    if (item.youtubeId) {
                        if (!_this.activity.videos) {
                            _this.activity.videos = [];
                        }
                        _this.activity.videos.push(item);
                        _this.activityDB.child("videos").set(_this.activity.videos).then(function () {
                            _this.commonSvc.toastSuccess('影像上傳成功');
                        }).catch(function (err) {
                            console.log(_this.activity.videos);
                            _this.commonSvc.toastFailure('上傳失敗', function (err) { console.error(JSON.stringify(err, null, 2)); });
                        });
                        popupModal_1.dismiss();
                    }
                }
            });
            popupModal_1.present();
        }
    };
    ActivityPage.prototype.uploadPhoto = function () {
        var _this = this;
        if (this.commonSvc.isWeb) {
            var itemToEdit = {
                type: 'single',
                pattern: "20180922/.*\\.JPG",
                baseUrl: "http://ibc.medocs.com.au/photos/"
            };
            var popupModal_2 = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_13__components_popup_popup__["a" /* PopupComponent */], {
                title: '圖片',
                definitions: [
                    {
                        key: 'url',
                        caption: 'URL'
                    },
                    {
                        key: 'type',
                        caption: '上傳類型',
                        type: __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["b" /* TypeInputUI */].Dropdown,
                        lookupSource: __WEBPACK_IMPORTED_MODULE_7_rxjs__["Observable"].of([
                            {
                                val: 'single',
                                cap: '單張圖片'
                            },
                            {
                                val: 'multiple',
                                cap: '提取所有圖片'
                            },
                        ]),
                        lookupCaption: 'cap',
                        lookupValue: 'val'
                    },
                    {
                        key: 'pattern',
                        caption: '匹配表達式',
                        hidden: function (item) { return item.type != 'multiple'; }
                    },
                    {
                        key: 'baseUrl',
                        caption: 'Base URL',
                        hidden: function (item) { return item.type != 'multiple'; }
                    }
                ],
                item: itemToEdit,
                cancel: function () { return popupModal_2.dismiss(); },
                save: function (item) {
                    if (item.url) {
                        if (item.type == 'multiple') {
                            _this.ibcHttp.post('jsdom/images', item).then(function (result) {
                                if (result && result.images) {
                                    _this.addPhoto(result.images);
                                }
                                popupModal_2.dismiss();
                            }).catch(function (err) {
                                popupModal_2.dismiss();
                            });
                            // this.http.post(, {
                            //   url: item.url
                            // })
                        }
                        else if (item.type == 'single') {
                            _this.addPhoto(item.url);
                            popupModal_2.dismiss();
                        }
                    }
                }
            });
            popupModal_2.present();
            return;
        }
        this.loadTrackerSvc.loading = true;
        this.photoSvc.camera.getPicture({
            cameraDirection: 1,
            sourceType: this.photoSvc.camera.PictureSourceType.PHOTOLIBRARY,
            destinationType: this.photoSvc.camera.DestinationType.DATA_URL,
            // quality: 100,
            targetWidth: 1024,
            targetHeight: 768,
            // targetHeight: 400,
            encodingType: this.photoSvc.camera.EncodingType.PNG,
            correctOrientation: true
        })
            .then(function (data) {
            _this.ibcFB.uploadFile(data, { path: "/activity/" + _this.activityIndex + "/" + _this.commonSvc.makeRandomString(10), encoding: "base64", fileType: "image/png" }, function (url) {
                _this.addPhoto(url);
                _this.loadTrackerSvc.loading = false;
            }, function (err) {
                _this.loadTrackerSvc.loading = false;
            });
        }, function () {
            _this.loadTrackerSvc.loading = false;
        });
    };
    ActivityPage.prototype.removeVideo = function (video) {
        var _this = this;
        if (!video || !this.activity.videos)
            return;
        var index = this.activity.videos.indexOf(video);
        this.commonSvc.confirmDialog("你確定要刪除這段視頻嗎", "刪除後所有人將無法看見", function () {
            _this.activity.videos.splice(index, 1);
            _this.activityDB.child("videos").set(_this.activity.videos).then(function () {
                _this.commonSvc.toastSuccess('視頻已成功删除');
            }).catch(function (err) {
                console.log(_this.activity.videos);
                _this.commonSvc.toastFailure('删除失败', function (err) { console.error(JSON.stringify(err, null, 2)); });
            });
        });
    };
    ActivityPage.prototype.playVideo = function (id) {
        this.videoSvc.play(id);
    };
    ActivityPage.prototype.share = function () {
        var url = "http://ibc.medocs.com.au/app/#/activity/" + this.activityId;
        this.wechat.weChatShareLink(url, "\u6559\u4F1A\u6D3B\u52A8: " + this.activity.title, this.activity.description, this.activity.thumbnail || 'https://cordova.apache.org/images/cordova_256.png');
    };
    ActivityPage.prototype.ionViewDidLoad = function () {
    };
    ActivityPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-activity',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/activity/activity.html"*/'<!--\n  Generated template for the ActivityPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>    \n    <ion-title>{{ activity?.title }}</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n<load-tracker></load-tracker>\n\n<ion-content padding>\n    <table class="ibc-full-width" style="table-layout: fixed">\n        <tbody id="participants">         \n            <tr *ngIf="activity?.datetime">\n                <td width="30%">時間</td>\n                <td width="70%">{{activity?.datetime | date: \'yyyy年MM月dd日\'}}</td>\n            </tr>\n            <tr *ngIf="activity?.location">\n                <td width="30%">地點</td>\n                <td width="70%">\n                    <div>{{activity?.location}}</div>\n                </td>\n            </tr>\n            <tr *ngIf="activity?.location">\n                <td colspan="2">\n                    <ibc-map\n                        [address]="activity?.location"\n                        [title]="activity?.location" \n                        height="200px">\n                    </ibc-map>\n                </td>\n            </tr>\n            <tr *ngIf="activity?.description">\n                <td width="30%">內容</td>\n                <td width="70%">{{activity?.description}}</td>\n            </tr>               \n            <tr *ngIf="persons && persons.length > 0">\n                <td width="30%">參加者</td>\n                <td width="70%">\n                    <table class="ibc-full-width" style="table-layout: fixed">\n                        <thead style="border-bottom: 1px solid #aeacb4" *ngIf="activity?.question">\n                            <tr>\n                                <td width="50%"></td>\n                                <td width="50%">{{activity?.question}}</td>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr *ngFor="let person of persons">\n                                <td width="50%">{{person.name}}<span *ngIf="person.chinese_name">({{person.chinese_name}})</span></td>\n                                <td width="50%">{{getParticipantFromPerson(person)?.comment}}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n<!--                     <div *ngFor="let person of persons">\n                        {{person.name}}<span *ngIf="person.chinese_name">({{person.chinese_name}})</span>\n                    </div> -->\n                </td>\n            </tr>            \n        </tbody>\n    </table>\n\n    <ion-buttons class="ibc-top-margin-20" ion-end *ngIf="!activity.past && commonSvc.isMember">\n      <button ion-button block color="teal" ion-end *ngIf="myIndex < 0" [question]="question" (answer)="register($event)">我要報名</button>\n      <button ion-button block color="danger" ion-end *ngIf="myIndex >= 0" (click)="cancel()">取消報名</button>\n    </ion-buttons>\n\n    <ibc-comment *ngIf="activity?.chatId" [title]="activity?.title" [chatId]="activity?.chatId"></ibc-comment>  \n    <ion-buttons ion-end *ngIf="commonSvc.isMember && content.auth">\n      <button ion-button block ion-end color="teal-1" (click)="uploadPhoto()">上傳圖片</button>\n      <button *ngIf="commonSvc.isWeb" ion-button block ion-end color="teal-1" (click)="addVideo()">添加Youtube</button>\n    </ion-buttons>    \n    <button *ngIf="content.allowWechat" ion-button block color="green" (click)="share()">\n      微信分享\n    </button>    \n\n    <ion-list class="ibc-top-margin-20">\n        <ng-container *ngIf="activity?.videos?.length > 0">\n            <h3 text-center >影像</h3>\n            <ion-item-sliding *ngFor="let video of activity?.videos" class="ibc-v-margin-5">\n                <div ion-item>\n                    <youtube-video [title]=\'video.title\' [youtubeId]="video.youtubeId"></youtube-video>\n                </div>\n                <ion-item-options side="right">\n                  <a ion-button color="danger" (click)="removeVideo(video)">\n                    删除\n                  </a>\n                </ion-item-options>\n            </ion-item-sliding>\n            <ion-item-divider></ion-item-divider>            \n        </ng-container>\n        <h3 text-center >相片</h3>\n        <ion-item-sliding *ngFor="let photo of activity?.pictures" class="ibc-v-margin-5">\n            <img [src]="photo" ion-item (click)="openLink(photo)"/>\n            <ion-item-options side="right" *ngIf="commonSvc.isMember">\n              <a ion-button color="danger" (click)="removePhoto(photo)">\n                删除\n              </a>\n            </ion-item-options>\n        </ion-item-sliding> \n    </ion-list>\n<!--     <div>\n        <div *ngFor="let photo of activity?.pictures" style="align-items: start">\n            <img [src]="photo" (click)="openLink(photo)"/>\n        </div>\n    </div> -->\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/activity/activity.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_12__providers_ibc_http_ibc_http__["a" /* IbcHttpProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_browser_browser__["a" /* BrowserProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["a" /* DataProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_audio_audio__["a" /* AudioProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_notification_notification__["a" /* NotificationProvider */],
            __WEBPACK_IMPORTED_MODULE_9__providers_photo_photo__["a" /* PhotoProvider */],
            __WEBPACK_IMPORTED_MODULE_10__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */],
            __WEBPACK_IMPORTED_MODULE_11__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */],
            __WEBPACK_IMPORTED_MODULE_14__providers_video_video__["a" /* VideoProvider */],
            __WEBPACK_IMPORTED_MODULE_15__providers_wechat_wechat__["a" /* WechatProvider */]])
    ], ActivityPage);
    return ActivityPage;
}());

//# sourceMappingURL=activity.js.map

/***/ }),

/***/ 1084:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AdminNotifPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_ibc_http_ibc_http__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_notification_notification__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_list_list__ = __webpack_require__(121);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_mustache__ = __webpack_require__(1085);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_mustache___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_mustache__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









/**
 * Generated class for the AdminNotifPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var AdminNotifPage = (function () {
    function AdminNotifPage(navCtrl, navParams, content, notificationSvc, common, modalCtrl, ibcHttp) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.content = content;
        this.notificationSvc = notificationSvc;
        this.common = common;
        this.modalCtrl = modalCtrl;
        this.ibcHttp = ibcHttp;
        this.groups = [];
        this.groupRecipients = [];
        this.memberRecipients = [];
        this.template = '';
        this.content.groupManagement$.subscribe(function (groups) {
            _this.groups = groups;
        });
    }
    Object.defineProperty(AdminNotifPage.prototype, "stringMembers", {
        get: function () {
            return this.memberRecipients.map(function (c) { return c.chinese_name + " (" + c.name + ")"; }).join(', ');
        },
        enumerable: true,
        configurable: true
    });
    AdminNotifPage.prototype.selectMembers = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_6__pages_list_list__["a" /* ListPage */], {
            type: Object.assign({}, this.content.contactsParams, {
                preselectedItemKeys: this.memberRecipients.map(function (c) { return c.username; })
            })
        });
        modal.present();
        modal.onDidDismiss(function (data) {
            console.log(data);
            if (data && Array.isArray(data)) {
                _this.memberRecipients = data;
            }
        });
    };
    AdminNotifPage.prototype.collectMembers = function () {
        var _this = this;
        var memberHash = {};
        if (this.groupRecipients) {
            this.groupRecipients.map(function (gr) { return _this.groups.filter(function (g) { return g.groupName == gr; })[0]; }).forEach(function (g) {
                if (g.members) {
                    g.members.forEach(function (m) {
                        memberHash[m] = 1;
                    });
                }
            });
        }
        this.memberRecipients.forEach(function (c) {
            memberHash[c.username] = 1;
        });
        return Object.keys(memberHash);
    };
    Object.defineProperty(AdminNotifPage.prototype, "allRecipientsText", {
        get: function () {
            var membersCollected = this.collectMembers();
            if (!membersCollected)
                return null;
            return this.content.allContacts.filter(function (contact) { return membersCollected.filter(function (username) { return username == contact.username; }).length > 0; })
                .map(function (c) { return c.chinese_name + " (" + c.name + ")"; }).join(',');
        },
        enumerable: true,
        configurable: true
    });
    AdminNotifPage.prototype.ionViewDidLoad = function () {
    };
    AdminNotifPage.prototype.sendAddNotification = function (contactId, title, content, redirect, params, thumbnail, hyperlink) {
        var datetimeCaption = __WEBPACK_IMPORTED_MODULE_7_moment__().format("M月D日");
        var datetime = __WEBPACK_IMPORTED_MODULE_7_moment__().format('YYYYMMDDHHmmss');
        var id = this.common.makeRandomString(10);
        var item = {
            datetime: datetimeCaption,
            isNew: true,
            key: datetime + "-" + id,
            params: params || {},
            value: id,
            redirect: redirect || null,
            hyperlink: hyperlink || null,
            thumbnail: thumbnail || null,
            sender: this.content.myselfContact.id,
            subtitle: content || null,
            title: "[" + datetimeCaption + " \u901A\u77E5] " + title
        };
        this.notificationSvc.addNotification(contactId, item);
    };
    AdminNotifPage.prototype.send = function () {
        var _this = this;
        var membersCollected = this.collectMembers();
        if (!membersCollected)
            return null;
        var recipients = this.content.allContacts.filter(function (contact) { return membersCollected.filter(function (username) { return username == contact.username; }).length > 0; });
        var template = this.template;
        if (recipients && recipients.length > 0 && template) {
            this.common.confirmDialog(null, '你确定要发送吗？', function () {
                var promises = [];
                recipients.forEach(function (contact) {
                    console.log(contact);
                    var params = {};
                    try {
                        params = JSON.parse(_this.params);
                    }
                    catch (e) {
                        params = {};
                    }
                    var content = __WEBPACK_IMPORTED_MODULE_8_mustache__["render"](template, contact);
                    promises.push(_this.sendAddNotification(contact.id, _this.title, content, _this.redirect, params, _this.thumbnail, _this.hyperlink));
                });
                Promise.all(promises).then(function (res) {
                    _this.common.toastSuccess('发送成功');
                }, function (err) {
                    _this.common.toastFailure('发送失败', err);
                });
            });
        }
    };
    AdminNotifPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-admin-notif',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/admin-notif/admin-notif.html"*/'<!--\n  Generated template for the AboutPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>发送InApp通知</ion-title>\n    <ion-buttons end>\n      <button [disabled]="!template || !stringMembers && !groupRecipients?.length" ion-button color="primary" (click)="send()">發送請求</button>\n    </ion-buttons>    \n  </ion-navbar>\n\n</ion-header>\n\n<ion-content padding>\n\n    <ion-list>\n        <ion-list-header>發送InApp通知</ion-list-header>\n\n        <ion-item>\n          <ion-label color="primary">接收群組</ion-label>\n          <ion-select fxFlex [(ngModel)]="groupRecipients" multiple="true" cancelText="取消" okText="确定">\n            <ion-option value="{{g.groupName}}" *ngFor="let g of groups">\n                {{g.title || g.groupName}}\n            </ion-option>\n          </ion-select>\n        </ion-item>\n\n        <button ion-item (click)="selectMembers()">\n            <ion-label color="primary">接收成員</ion-label>\n            <ion-input [value]="stringMembers" disabled></ion-input>\n            <!-- {{stringMembers}} -->\n            <!-- <button ion-button color="primary" (click)="selectMembers()">Select</button> -->\n        </button>\n\n        <ion-item>\n            <ion-input placeholder="发送标题" [(ngModel)]="title" style="margin-top: 10px;"></ion-input>\n        </ion-item>        \n\n        <ion-item>\n            <ion-textarea placeholder="发送内容" [(ngModel)]="template" maxlength="2000" rows="5" style="margin-top: 10px;"></ion-textarea>\n        </ion-item>\n\n        <ion-item>\n            <ion-input placeholder="缩略图" [(ngModel)]="thumbnail" style="margin-top: 10px;"></ion-input>\n        </ion-item> \n\n        <ion-item>\n            <ion-input placeholder="超链接" [(ngModel)]="hyperlink" style="margin-top: 10px;"></ion-input>\n        </ion-item>                 \n\n        <ion-item>\n          <ion-select [(ngModel)]="redirect" placeholder="重定向頁面（高級）" (ionCancel)="redirect = null">\n            <ion-option [value]="\'list-page\'">列表頁面</ion-option>\n            <ion-option [value]="\'song-page\'">詩歌頁面</ion-option>\n            <ion-option [value]="\'activity-page\'">活動頁面</ion-option>\n            <ion-option [value]="\'ministry-page\'">侍奉人員頁面</ion-option>\n            <ion-option [value]="\'sermon-page\'">講道頁面</ion-option>\n            <ion-option [value]="\'chat-page\'">讨论頁面</ion-option>\n          </ion-select>\n        </ion-item>\n\n        <ion-item>\n            <ion-textarea placeholder="重定向參數（高級）" [(ngModel)]="params" maxlength="2000" rows="5" style="margin-top: 10px;"></ion-textarea>\n        </ion-item>        \n\n    </ion-list> \n\n    <div *ngIf="groupRecipients.length > 0 || stringMembers" class="ibc-h-padding-20 ibc-v-padding-20" style="opacity: 0.8">\n        <p ion-note>消息将发送至：</p>\n        {{allRecipientsText}}\n    </div>\n\n    <button [disabled]="!template || !stringMembers && !groupRecipients?.length" ion-button block color="blue-800" (click)="send()">发送请求</button>\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/admin-notif/admin-notif.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_5__providers_notification_notification__["a" /* NotificationProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_ibc_http_ibc_http__["a" /* IbcHttpProvider */]])
    ], AdminNotifPage);
    return AdminNotifPage;
}());

//# sourceMappingURL=admin-notif.js.map

/***/ }),

/***/ 1086:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AdminSmsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_ibc_http_ibc_http__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_list_list__ = __webpack_require__(121);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the AdminSmsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var AdminSmsPage = (function () {
    function AdminSmsPage(navCtrl, navParams, content, common, modalCtrl, ibcHttp) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.content = content;
        this.common = common;
        this.modalCtrl = modalCtrl;
        this.ibcHttp = ibcHttp;
        this.groups = [];
        this.groupRecipients = [];
        this.memberRecipients = [];
        this.template = '';
        this.content.groupManagement$.subscribe(function (groups) {
            _this.groups = groups;
        });
    }
    Object.defineProperty(AdminSmsPage.prototype, "stringMembers", {
        get: function () {
            return this.memberRecipients.map(function (c) { return c.chinese_name + " (" + c.name + ")"; }).join(', ');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AdminSmsPage.prototype, "type", {
        get: function () {
            return this._type;
        },
        set: function (s) {
            this._type = s;
            if (s == 'resetPassword') {
                this.template =
                    "\u60A8\u597D\uFF0C\u60A8\u7684\u4F9D\u65AF\u9748\u9813\u4E2D\u6587\u6559\u6703APP\u5BC6\u78BC\u5DF2\u91CD\u7F6E\u3002\n\u7528\u6236\u540D\uFF1A{{username}}\n\u65B0\u5BC6\u78BC\uFF1A{{password}}, \u8ACB\u76E1\u5FEB\u767B\u9304\u5F8C\u4FEE\u6539";
            }
            else {
                this.template = '';
            }
        },
        enumerable: true,
        configurable: true
    });
    AdminSmsPage.prototype.selectMembers = function () {
        var _this = this;
        console.log('------ select members -------');
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_5__pages_list_list__["a" /* ListPage */], {
            type: Object.assign({}, this.content.contactsParams, {
                preselectedItemKeys: this.memberRecipients.map(function (c) { return c.username; })
            })
        });
        modal.present();
        modal.onDidDismiss(function (data) {
            console.log(data);
            if (data && Array.isArray(data)) {
                _this.memberRecipients = data;
            }
        });
    };
    AdminSmsPage.prototype.collectMembers = function () {
        var _this = this;
        var memberHash = {};
        if (this.groupRecipients) {
            this.groupRecipients.map(function (gr) { return _this.groups.filter(function (g) { return g.groupName == gr; })[0]; }).forEach(function (g) {
                if (g.members) {
                    g.members.forEach(function (m) {
                        memberHash[m] = 1;
                    });
                }
            });
        }
        this.memberRecipients.forEach(function (c) {
            memberHash[c.username] = 1;
        });
        return Object.keys(memberHash);
    };
    Object.defineProperty(AdminSmsPage.prototype, "allRecipientsText", {
        get: function () {
            var membersCollected = this.collectMembers();
            if (!membersCollected)
                return null;
            return this.content.allContacts.filter(function (contact) { return membersCollected.filter(function (username) { return username == contact.username; }).length > 0; })
                .map(function (c) { return c.chinese_name + " (" + c.name + ")"; }).join(',');
        },
        enumerable: true,
        configurable: true
    });
    AdminSmsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad AdminSmsPage');
    };
    AdminSmsPage.prototype.send = function () {
        var _this = this;
        var users = this.collectMembers();
        var template = this.template;
        var send_sms = !this.noSendingSMS;
        if (users && users.length > 0 && template) {
            if (this.type == 'resetPassword') {
                this.common.confirmDialog(null, '你确定要重置密码吗？', function () {
                    _this.ibcHttp.post('sms/send_reset_password', { users: users, template: template, send_sms: send_sms }).then(function (res) {
                        _this.common.toastSuccess('密码重置成功');
                        _this.lastResponse = res;
                    }).catch(function (err) {
                        _this.common.toastFailure('密码重置失败', err);
                        _this.lastResponse = [];
                    });
                });
            }
            else {
                this.common.confirmDialog(null, '你确定要发送吗？', function () {
                    _this.ibcHttp.post('sms/send_sms', { users: users, template: template }).then(function (res) {
                        _this.common.toastSuccess('发送成功');
                        _this.lastResponse = [];
                    }).catch(function (err) {
                        _this.common.toastFailure('发送失败', err);
                        _this.lastResponse = [];
                    });
                });
            }
        }
    };
    AdminSmsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-admin-sms',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/admin-sms/admin-sms.html"*/'<!--\n  Generated template for the AboutPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>SMS管理</ion-title>\n    <ion-buttons end>\n      <button [disabled]="!template || !stringMembers && !groupRecipients?.length" ion-button color="primary" (click)="send()">发送请求</button>\n    </ion-buttons>    \n  </ion-navbar>\n\n</ion-header>\n\n<ion-content padding>\n\n    <ion-list>\n        <ion-list-header>發短消息SMS</ion-list-header>\n\n        <ion-item>\n          <ion-label color="primary">接收群組</ion-label>\n          <ion-select fxFlex [(ngModel)]="groupRecipients" multiple="true" cancelText="取消" okText="确定">\n            <ion-option value="{{g.groupName}}" *ngFor="let g of groups">\n                {{g.title || g.groupName}}\n            </ion-option>\n          </ion-select>\n        </ion-item>\n\n        <button ion-item (click)="selectMembers()">\n            <ion-label color="primary">接收成員</ion-label>\n            <ion-input [value]="stringMembers" disabled></ion-input>\n            <!-- {{stringMembers}} -->\n            <!-- <button ion-button color="primary" (click)="selectMembers()">Select</button> -->\n        </button>\n\n        <ion-item>\n          <ion-label color="primary">類型</ion-label>\n          <ion-select [(ngModel)]="type" cancelText="取消" okText="確定">\n            <ion-option value="resetPassword">重置密碼</ion-option>\n            <ion-option value="otherSms">其他消息</ion-option>\n          </ion-select>\n        </ion-item>\n\n        <ion-item *ngIf="type == \'resetPassword\'">\n            <ion-label color="primary">本地操作（No SMS）</ion-label>\n            <ion-checkbox [(ngModel)]="noSendingSMS"></ion-checkbox>\n        </ion-item>\n\n        <ion-item>\n            <ion-textarea placeholder="发送内容" [(ngModel)]="template" maxlength="2000" rows="5" style="margin-top: 10px;"></ion-textarea>\n        </ion-item>\n\n    </ion-list>\n\n    <ion-grid *ngIf="lastResponse?.length > 0 && type == \'resetPassword\'">\n      <ion-row>\n        <ion-col>\n           帐户名\n        </ion-col>\n        <ion-col>\n           密码\n        </ion-col>\n        <ion-col>\n           状态\n        </ion-col>        \n      </ion-row>\n      <ion-row *ngFor="let row of lastResponse">\n          <ion-col>{{row.username}}</ion-col>\n          <ion-col>{{row.password}}</ion-col>\n          <ion-col *ngIf="row.ok" style="color: green">{{\'完成\'}}</ion-col>\n          <ion-col *ngIf="row.error" style="color: red">{{\'失败\'}}</ion-col>\n      </ion-row>\n    </ion-grid>  \n\n    <div *ngIf="groupRecipients.length > 0 || stringMembers" class="ibc-h-padding-20 ibc-v-padding-20" style="opacity: 0.8">\n        <p ion-note>消息将发送至：</p>\n        {{allRecipientsText}}\n    </div>\n\n    <button [disabled]="!template || !stringMembers && !groupRecipients?.length" ion-button block color="blue-800" (click)="send()">发送请求</button>\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/admin-sms/admin-sms.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__["a" /* DataProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_ibc_http_ibc_http__["a" /* IbcHttpProvider */]])
    ], AdminSmsPage);
    return AdminSmsPage;
}());

//# sourceMappingURL=admin-sms.js.map

/***/ }),

/***/ 1087:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AdminSystemPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages_list_list__ = __webpack_require__(121);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the AdminSystemPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var AdminSystemPage = (function () {
    function AdminSystemPage(navCtrl, navParams, common, ibcFB) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.common = common;
        this.ibcFB = ibcFB;
    }
    AdminSystemPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad AdminSystemPage');
    };
    AdminSystemPage.prototype.goToSms = function () {
        this.navCtrl.push('admin-sms-page');
    };
    AdminSystemPage.prototype.goToInAppNotif = function () {
        this.navCtrl.push('admin-notif-page');
    };
    AdminSystemPage.prototype.updateBulletinAndPpt = function () {
        var _this = this;
        this.ibcFB.afDB.database.ref("updateCaches").once('value', function (snapshot) {
            var caches = snapshot.val();
            // let latest = moment().format('YYYY-MM-DD HH:mm:ss');
            var latest = __WEBPACK_IMPORTED_MODULE_5_moment__().toString();
            Promise.all(caches.map(function (cache, index) { return _this.ibcFB.afDB.database.ref("updateCaches/" + index + "/timestamp").set(latest); })).then(function () {
                _this.common.toastSuccess('期刊PPT缓存更新成功！');
            }).catch(function (err) {
                _this.common.toastFailure('期刊PPT缓存更新失败!', err);
            });
        });
    };
    AdminSystemPage.prototype.goToHomeCardManagement = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__pages_list_list__["a" /* ListPage */], { type: 'homeCardsParams' });
    };
    AdminSystemPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-admin-system',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/admin-system/admin-system.html"*/'<!--\n  Generated template for the AdminSystemPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>系统管理</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n\n    <button ion-button block color="teal" (click)="goToSms()">发送SMS</button>\n    <button ion-button block color="teal" (click)="goToInAppNotif()">发送In-App通知</button>\n    <button ion-button block color="teal" (click)="updateBulletinAndPpt()">更新期刊和PPT</button>\n    <button ion-button block color="teal" (click)="goToHomeCardManagement()">管理首页卡片</button>\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/admin-system/admin-system.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_4__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */]])
    ], AdminSystemPage);
    return AdminSystemPage;
}());

//# sourceMappingURL=admin-system.js.map

/***/ }),

/***/ 1088:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BibleBookPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_bible_bible__ = __webpack_require__(62);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the BiblePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var BibleBookPage = (function () {
    function BibleBookPage(navCtrl, navParams, platform, bibleSvc) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.platform = platform;
        this.bibleSvc = bibleSvc;
        this.chapters = [];
        this.referenced = this.navParams.get('referenced');
        if (navParams.data) {
            this.book = navParams.data.item;
            if (this.book) {
                for (var i = 1; i <= this.book.ChapterNumber; i++) {
                    this.chapters.push(i);
                }
            }
            else {
                this.bibleSvc.getBooks().then(function (books) {
                    if (navParams.data.bookNumber) {
                        _this.book = books.filter(function (b) { return b.SN == navParams.data.bookNumber; })[0];
                        if (_this.book) {
                            for (var i = 1; i <= _this.book.ChapterNumber; i++) {
                                _this.chapters.push(i);
                            }
                        }
                    }
                });
            }
        }
        // console.log(JSON.stringify(navParams));
        // if (this.platform.is('mobileweb')) {
        //     this.books = [
        //         { SN: 1, KindSN: 1, ChapterNumber: 50, NewOrOld: 0, PinYin: 'CSJ', ShortName: '创', FullName: '创世纪' },
        //         { SN: 2, KindSN: 1, ChapterNumber: 40, NewOrOld: 0, PinYin: 'CAJ', ShortName: '出', FullName: '出埃及记' }
        //     ]
        // } else {
        //     this.platform.ready().then(() => {
        //         this.storage = new SQLite();
        //         this.storage.openDatabase({
        //             name: 'bible.db',
        //             location: 'default',
        //             createFromLocation: 1
        //         }).then(() => {
        //             console.log("=== SQLite Connected! ===");
        //             this.storage.executeSql("SELECT * from BibleID", []).then((data) => {
        //                 // console.log("Data received: ", data);
        //                 let rows = data.rows;
        //                 for (let i = 0; i < rows.length; i++) {
        //                     // console.log(JSON.stringify(rows.item(i)));
        //                     this.books.push(rows.item(i));
        //                 }
        //                 this.storage.close();
        //             }, (error) => {
        //                 console.error("Unable to execute sql", JSON.stringify(error));
        //                 this.storage.close();
        //             });
        //         }, () => {
        //             console.error("Can't connect to SQLite!");
        //             this.storage.close();
        //         });
        //     });
        // }
    }
    BibleBookPage.prototype.chapterTapped = function (event, item) {
        this.navCtrl.push('bible-chapter-page', {
            item: item,
            bookNumber: item.bookId,
            chapterNumber: item.chapter,
            verseNumber: 0,
            referenced: this.referenced
        });
    };
    BibleBookPage.prototype.search = function () {
        this.navCtrl.push('bible-search-page');
        // let popupModal = this.modalCtrl.create(BibleSearchComponent);
        // popupModal.present();
    };
    BibleBookPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad BiblePageBook');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])('title'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], BibleBookPage.prototype, "title", void 0);
    BibleBookPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-bible-book',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/bible/bible-book.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title #title>{{bibleSvc.useEnglish ? book?.EnglishName : (bibleSvc.useTraditional ? bibleSvc.s2tConvert(book?.FullName) : book?.FullName)}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding no-bounce>\n  <ion-grid>\n    <ion-row>\n      <ion-col col-3 *ngFor="let i of chapters;">\n        <div>\n          <a (click)="chapterTapped($event, {bookId: book?.SN, book: book?.FullName, chapter: i})" style="cursor: pointer">\n            <div style="font-size: 1.8rem" *ngIf="!bibleSvc.useEnglish">第{{i}}章</div>\n            <div style="font-size: 1.8rem" *ngIf="bibleSvc.useEnglish">{{i}}</div>\n          </a>\n        </div>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n  <ion-fab right bottom>\n    <button ion-fab color="primary"><ion-icon name="arrow-dropup"></ion-icon></button>\n    <ion-fab-list side="top">\n      <button ion-fab color="teal-1" (click)="bibleSvc.useEnglish = false; bibleSvc.useTraditional = false">简</button>\n      <button ion-fab color="teal" (click)="bibleSvc.useEnglish = false; bibleSvc.useTraditional = true">繁</button>\n      <button ion-fab color="dark" (click)="bibleSvc.useEnglish = true">Eng</button>\n      <button ion-fab color="light" (click)="search()"><ion-icon name="search"></ion-icon></button>\n    </ion-fab-list>\n  </ion-fab> \n</ion-content>\n\n\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/bible/bible-book.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */], __WEBPACK_IMPORTED_MODULE_2__providers_bible_bible__["a" /* BibleProvider */]])
    ], BibleBookPage);
    return BibleBookPage;
}());

//# sourceMappingURL=bible-book.js.map

/***/ }),

/***/ 1089:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BibleChapterPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_bible_bible__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__bible__ = __webpack_require__(678);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the BiblePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var BibleChapterPage = (function () {
    function BibleChapterPage(navCtrl, navParams, platform, bibleSvc, modalCtrl, content, wechat) {
        // console.log(JSON.stringify`(navParams));
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.platform = platform;
        this.bibleSvc = bibleSvc;
        this.modalCtrl = modalCtrl;
        this.content = content;
        this.wechat = wechat;
        this.verses = [];
        this.platform.ready().then(function () {
            _this.chapterMeta = navParams.data.item;
            if (_this.chapterMeta) {
                _this.bibleSvc.getAChapter(_this.chapterMeta.bookId, _this.chapterMeta.chapter).then(function (verses) {
                    _this.verses = verses;
                    setTimeout(function () {
                        _this.scrollToHighlight();
                    }, 1000);
                });
            }
            else if (navParams.data.bookNumber && navParams.data.chapterNumber) {
                _this.bibleSvc.getAChapter(navParams.data.bookNumber, navParams.data.chapterNumber).then(function (verses) {
                    _this.verses = verses;
                    _this.chapterMeta = {
                        book: _this.verses[0].FullName,
                        bookId: _this.verses[0].SN,
                        chapter: _this.verses[0].ChapterSN
                    };
                    setTimeout(function () {
                        _this.scrollToHighlight();
                    }, 1000);
                });
            }
            _this.highlightVerseNumber = navParams.data.verseNumber;
        });
    }
    BibleChapterPage.prototype.chapters = function () {
        this.navCtrl.push('bible-book-page', {
            bookNumber: this.chapterMeta.bookId,
        });
    };
    BibleChapterPage.prototype.reference = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__bible__["a" /* BiblePage */], { referenced: 1 });
    };
    BibleChapterPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad BiblePageBook');
        if (!this.navParams.data.item && this.navParams.data.bookNumber) {
            var lastView = this.navCtrl.getViews()[1];
            if (lastView && lastView.id == 'bible-book-page') {
                lastView.data.bookNumber = this.navParams.data.bookNumber;
            }
        }
        if (this.navParams.get('referenced')) {
            this.navBar.backButtonClick = function () {
                var views = _this.navCtrl.getViews();
                _this.navCtrl.popTo(views[views.length - 4]);
            };
        }
    };
    BibleChapterPage.prototype.scrollToHighlight = function () {
        var contentElem = document.querySelectorAll('#bible-chapter-content .scroll-content')[document.querySelectorAll('#bible-chapter-content .scroll-content').length - 1];
        // let highlightElem = contentElem.querySelectorAll('#bible-chapter-content .ibc-highlight');
        if (contentElem) {
            var highlightElem = contentElem.querySelector('.ibc-highlight');
            // console.log(contentElem);
            // console.log(highlightElem);
            if (highlightElem) {
                contentElem.scrollTop = highlightElem['offsetTop'];
            }
        }
    };
    BibleChapterPage.prototype.search = function () {
        this.navCtrl.push('bible-search-page');
        // let popupModal = this.modalCtrl.create(BibleSearchComponent);
        // popupModal.present();
    };
    BibleChapterPage.prototype.share = function (verseSN) {
        var bookId = this.chapterMeta.bookId;
        var chapterId = this.chapterMeta.chapter;
        var verseId = this.navParams.data.verseNumber || verseSN || 0;
        var url = "http://ibc.medocs.com.au/app/#/bible/" + bookId + "/" + chapterId + "/" + verseId;
        var title = "\u7ECF\u6587\u5206\u4EAB\uFF1A" + this.chapterMeta.book + " ";
        if (verseId) {
            title += chapterId + ":" + verseId;
        }
        else {
            title += "\u7B2C" + chapterId + "\u7AE0";
        }
        this.wechat.weChatShareLink(url, title, verseId ? this.verses[verseId - 1].Chinese : this.verses[0].Chinese, "http://ibc.medocs.com.au/img/IBC.ico");
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* Navbar */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* Navbar */])
    ], BibleChapterPage.prototype, "navBar", void 0);
    BibleChapterPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-bible-chapter',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/bible/bible-chapter.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>{{chapterMeta?.book}} 第{{chapterMeta?.chapter}}章</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding no-bounce id="bible-chapter-content">\n  <ion-list class="ibc-allow-text-select">\n    <ion-item-sliding *ngFor="let verse of verses" [class.ibc-highlight]="verse?.VerseSN == navParams?.data?.verseNumber">\n      <div ion-item [class.ibc-highlight]="verse?.VerseSN == navParams?.data?.verseNumber">\n        <div item-left style="width: 25px">{{verse?.VerseSN}}</div>\n        <div class="ibc-allow-wrap">\n          <div class="item-note">\n            {{bibleSvc.useTraditional ? bibleSvc.s2tConvert(verse?.Chinese) : verse?.Chinese}}\n          </div>\n          <div class="item-note ibc-top-margin-10" *ngIf="bibleSvc.useEnglish">\n            {{verse?.English}}\n          </div>\n        </div>\n      </div>\n      <ion-item-options side="right" *ngIf="content.allowWechat">\n        <a ion-button color="green" (click)="share(verse?.VerseSN)">\n           分享\n        </a>\n      </ion-item-options>      \n    </ion-item-sliding>\n  </ion-list>\n\n  <ion-fab right bottom>\n    <button ion-fab color="primary"><ion-icon name="arrow-dropup"></ion-icon></button>\n    <ion-fab-list side="top">\n      <button ion-fab color="green" (click)="share()" *ngIf="content.allowWechat">分享</button>\n      <button ion-fab color="teal-1" (click)="bibleSvc.useEnglish = false; bibleSvc.useTraditional = false">简</button>\n      <button ion-fab color="teal" (click)="bibleSvc.useEnglish = false; bibleSvc.useTraditional = true">繁</button>\n      <button ion-fab color="dark" (click)="bibleSvc.useEnglish = !bibleSvc.useEnglish">Eng</button>\n      <button ion-fab color="dark" (click)="reference()">參考</button>\n      <button ion-fab color="light" (click)="search()"><ion-icon name="search"></ion-icon></button>\n    </ion-fab-list>  \n  </ion-fab>   \n</ion-content>\n\n<load-tracker></load-tracker>\n\n\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/bible/bible-chapter.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2__providers_bible_bible__["a" /* BibleProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_data_adaptor_data_adaptor__["a" /* DataProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__["a" /* WechatProvider */]])
    ], BibleChapterPage);
    return BibleChapterPage;
}());

//# sourceMappingURL=bible-chapter.js.map

/***/ }),

/***/ 1090:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BibleSearchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_bible_bible__ = __webpack_require__(62);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the BibleSearchComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var BibleSearchPage = (function () {
    function BibleSearchPage(navCtrl, viewCtrl, bibleSvc, zone, cdRef) {
        this.navCtrl = navCtrl;
        this.viewCtrl = viewCtrl;
        this.bibleSvc = bibleSvc;
        this.zone = zone;
        this.cdRef = cdRef;
        this.verses = [];
    }
    Object.defineProperty(BibleSearchPage.prototype, "searchIsEnglish", {
        get: function () {
            return this.searchKey && !!this.searchKey.match(/[A-Za-z]/);
        },
        enumerable: true,
        configurable: true
    });
    BibleSearchPage.prototype.selectionEmptyAll = function () {
    };
    BibleSearchPage.prototype.selectionFillAll = function () {
    };
    // dismiss(): void {
    //     this.viewCtrl.dismiss();
    // }
    BibleSearchPage.prototype.search = function () {
        var _this = this;
        this.bibleSvc.search(this.searchKey).then(function (data) {
            _this.verses = data.verses;
            _this.count = data.count;
            _this.cdRef.markForCheck();
        });
    };
    BibleSearchPage.prototype.navigate = function (verse) {
        this.navCtrl.push('bible-chapter-page', {
            bookNumber: verse.SN,
            chapterNumber: verse.ChapterSN,
            verseNumber: verse.VerseSN
        });
    };
    BibleSearchPage.prototype.apply = function () {
    };
    BibleSearchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'bible-search',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/bible/bible-search.html"*/'<ion-header>\n\n  <ion-navbar>\n    <ion-title><ion-icon name="search"></ion-icon> 搜索聖經</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content>\n  <div fxLayout="row" fxLayoutAlign="start center">\n    <ion-searchbar [(ngModel)]="searchKey"></ion-searchbar>\n    <button ion-button color="primary" (click)="search()">\n      確定\n    </button>\n  </div>\n\n  <ion-list class="ibc-allow-text-select">\n    <div *ngIf="count != null" text-left style="margin-left: 20px">{{count}} verses matched{{count > 100 ? \', but only first 100 are displayed\' : \'\'}}</div>\n    <ng-container *ngFor="let verse of verses | slice:0:100; let i = index">\n        <h3 text-center [hidden]="i > 0 && verse.SN == verses[i-1].SN">{{bibleSvc.useTraditional ? bibleSvc.s2tConvert(verse?.FullName) : verse?.FullName}}</h3>\n        <div ion-item (click)="navigate(verse)" style="cursor: pointer">\n          <div item-left style="width: 45px">{{verse?.ChapterSN}}:{{verse?.VerseSN}}</div>\n          <div class="ibc-allow-wrap">\n            <div class="item-note" *ngIf="!searchIsEnglish && !bibleSvc.useTraditional" [innerHtml]="verse?.Chinese | highlight:searchKey"></div>\n            <div class="item-note" *ngIf="!searchIsEnglish && bibleSvc.useTraditional" [innerHtml]="bibleSvc.s2tConvert(verse?.Chinese) | highlight:searchKey:true"></div>\n            <div class="item-note" *ngIf="bibleSvc.useEnglish || searchIsEnglish" [innerHtml]="verse?.English | highlight:searchKey"></div>\n          </div>          \n        </div>        \n    </ng-container>\n  </ion-list>  \n\n  <ion-fab right bottom>\n    <button ion-fab color="primary"><ion-icon name="arrow-dropup"></ion-icon></button>\n    <ion-fab-list side="top">\n      <button ion-fab color="teal-1" (click)="bibleSvc.useEnglish = false; bibleSvc.useTraditional = false">简</button>\n      <button ion-fab color="teal" (click)="bibleSvc.useEnglish = false; bibleSvc.useTraditional = true">繁</button>\n      <button ion-fab color="dark" (click)="bibleSvc.useEnglish = !bibleSvc.useEnglish">Eng</button>\n    </ion-fab-list>  \n  </ion-fab>   \n</ion-content>'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/bible/bible-search.html"*/,
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["i" /* ChangeDetectionStrategy */].OnPush
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */], __WEBPACK_IMPORTED_MODULE_2__providers_bible_bible__["a" /* BibleProvider */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["M" /* NgZone */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectorRef */]])
    ], BibleSearchPage);
    return BibleSearchPage;
}());

//# sourceMappingURL=bible-search.js.map

/***/ }),

/***/ 1091:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DailyVersePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_bible_bible__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the DailyVersePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DailyVersePage = (function () {
    function DailyVersePage(navCtrl, navParams, content, bibleSvc, common) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.content = content;
        this.bibleSvc = bibleSvc;
        this.common = common;
        this.dailyVerses = [];
        this.date = __WEBPACK_IMPORTED_MODULE_5_moment__(navParams.get('date')).format('M月D日');
        this.content.dailyVerses$.subscribe(function (dailyVerses) {
            _this.dailyVerses = dailyVerses;
            _this.currentVerse = dailyVerses.filter(function (d) { return d.datetime == navParams.get('date'); })[0];
            if (_this.currentVerse) {
                _this.fetchBibleVerse(_this.currentVerse.bookSN, _this.currentVerse.chapterSN, _this.currentVerse.verseSN);
            }
        });
    }
    Object.defineProperty(DailyVersePage.prototype, "randomBg", {
        get: function () {
            return "home-bg-" + Math.round(Math.random() * 10);
        },
        enumerable: true,
        configurable: true
    });
    DailyVersePage.prototype.fetchBibleVerse = function (bookSN, chapterSN, verseSN) {
        var _this = this;
        if (this.currentVerse.thumbnail && !this.currentVerse.thumbnail.match(/IBC.ico$/)) {
            this.bgImageUrl = "linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.9)), url(" + this.currentVerse.thumbnail + ")";
            // this.bgImageUrl = 'url(https://pi.tedcdn.com/r/talkstar-assets.s3.amazonaws.com/production/playlists/playlist_14/are_you_there_god.jpg?quality=89&w=800)';
        }
        else {
            this.bgImageUrl = "linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.9)), url(assets/img/" + this.randomBg + ".jpg)";
        }
        this.bibleSvc.getAVerse(bookSN, chapterSN, verseSN).then(function (verse) {
            if (!verse)
                return;
            _this.currentBibleVerse = verse;
        });
    };
    DailyVersePage.prototype.prev = function () {
        var index = this.dailyVerses.indexOf(this.currentVerse);
        if (index - 1 >= 0) {
            this.currentVerse = this.dailyVerses[index - 1];
            this.date = __WEBPACK_IMPORTED_MODULE_5_moment__(this.currentVerse.datetime).format('M月D日');
            this.fetchBibleVerse(this.currentVerse.bookSN, this.currentVerse.chapterSN, this.currentVerse.verseSN);
        }
    };
    DailyVersePage.prototype.next = function () {
        var index = this.dailyVerses.indexOf(this.currentVerse);
        if (index + 1 < this.dailyVerses.length) {
            this.currentVerse = this.dailyVerses[index + 1];
            this.date = __WEBPACK_IMPORTED_MODULE_5_moment__(this.currentVerse.datetime).format('M月D日');
            this.fetchBibleVerse(this.currentVerse.bookSN, this.currentVerse.chapterSN, this.currentVerse.verseSN);
        }
    };
    DailyVersePage.prototype.navigate = function () {
        this.navCtrl.push('bible-chapter-page', { bookNumber: this.currentVerse.bookSN, chapterNumber: this.currentVerse.chapterSN, verseNumber: this.currentVerse.verseSN });
    };
    DailyVersePage.prototype.back = function () {
        this.navCtrl.setRoot('home-page');
    };
    DailyVersePage.prototype.chat = function () {
        if (!this.currentVerse || !this.currentVerse.chatId)
            return;
        this.navCtrl.push('chat-page', { partnerId: this.currentVerse.chatId });
    };
    DailyVersePage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad DailyVersePage');
    };
    DailyVersePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-daily-verse',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/daily-verse/daily-verse.html"*/'<!--\n  Generated template for the DailyVersePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n     <h4 ion-text text-center style="color: white"><p>每日金句 {{date}}</p></h4>\n  </ion-navbar>\n\n</ion-header>\n\n<ion-content padding style="background-repeat: no-repeat; background-size: cover; color: #FFC107;" [ngStyle]="{\'background-image\': bgImageUrl}">\n\n    <div class="ibc-full-height ibc-allow-text-select" fxLayout="column" fxLayoutAlign="center center">\n\n      <div class="ibc-full-width" fxLayout="column" fxLayoutAlign="center center">\n\n        <h4>{{currentBibleVerse?.Chinese}}</h4>\n        <h4>{{currentBibleVerse?.English}}</h4>\n\n        <a style="font-size: 2rem; cursor: pointer" (click)="navigate()">{{currentBibleVerse?.FullName}} {{currentBibleVerse?.ChapterSN}}:{{currentBibleVerse?.VerseSN}}</a>\n\n        <div class="ibc-full-width ibc-top-margin-20" *ngIf="currentVerse?.description" style="color: white">\n             <div ion-text class="ibc-bottom-margin-10"><b>牧者分享:</b></div>\n             <div ion-text>{{currentVerse?.description}}</div>\n        </div>\n      </div>\n\n      <div fxFlex></div>\n\n      <div class="ibc-full-width" fxLayout="column" fxLayoutAlign="center start">\n        <ion-buttons class="ibc-top-margin-20 ibc-full-width">\n          <button ion-button icon-start color="dark" (click)="prev()">\n            <ion-icon name="arrow-back"></ion-icon>\n          </button>\n          <div fxFlex></div>\n          <button ion-button (click)="back()">返回首页</button>\n          <button ion-button color="teal" *ngIf="common?.isLoggedIn && currentVerse?.chatId" (click)="chat()">讨论经文</button>\n          <div fxFlex></div>\n          <button ion-button icon-end color="dark" (click)="next()">\n            <ion-icon name="arrow-forward"></ion-icon>\n          </button>          \n        </ion-buttons>        \n      </div>\n\n    </div>\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/daily-verse/daily-verse.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_bible_bible__["a" /* BibleProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_common_common__["a" /* CommonProvider */]])
    ], DailyVersePage);
    return DailyVersePage;
}());

//# sourceMappingURL=daily-verse.js.map

/***/ }),

/***/ 1092:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IframePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__ = __webpack_require__(38);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the IframePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var IframePage = (function () {
    function IframePage(navCtrl, navParams, commonSvc, content, wechat) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.commonSvc = commonSvc;
        this.content = content;
        this.wechat = wechat;
        this.title = navParams.get('title');
        try {
            this.iframeSrc = this.commonSvc.sanitize(atob(navParams.get('url')));
        }
        catch (e) {
            this.iframeSrc = this.commonSvc.sanitize('');
        }
        // this.iframeSrc = this.commonSvc.sanitize('http://ibc.medocs.com.au/adm/news_cmIBC.htm');
    }
    IframePage.prototype.share = function () {
        var url = "http://ibc.medocs.com.au/app/#/iframe/\u6559\u4F1A\u5206\u4EAB/" + this.navParams.get('url');
        this.wechat.weChatShareLink(url, '教会分享', this.title, 'http://ibc.medocs.com.au/app/assets/icon/chrome-icon.png');
    };
    IframePage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad IframePage');
    };
    IframePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-iframe',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/iframe/iframe.html"*/'<!--\n  Generated template for the IframePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>     \n    <ion-title>{{title}}</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n<ion-content>\n    <iframe width="100%" height="100%" [src]="iframeSrc" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" scrolling="auto"></iframe>\n    <button *ngIf="content.allowWechat" ion-button block color="green" (click)="share()">\n      微信分享\n    </button>\n</ion-content>\n\n<load-tracker></load-tracker>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/iframe/iframe.html"*/,
            host: {
                class: 'ibc-allow-text-select'
            }
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_2__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__["a" /* WechatProvider */]])
    ], IframePage);
    return IframePage;
}());

//# sourceMappingURL=iframe.js.map

/***/ }),

/***/ 1093:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MinistryPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_ministry_ministry__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_notification_notification__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_wechat_wechat__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash__ = __webpack_require__(664);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_jquery__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_jquery__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












/**
 * Generated class for the MinistryPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MinistryPage = (function () {
    function MinistryPage(navCtrl, navParams, ministrySvc, notificationSvc, common, content, wechat, cd, loadTrackerSvc) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.ministrySvc = ministrySvc;
        this.notificationSvc = notificationSvc;
        this.common = common;
        this.content = content;
        this.wechat = wechat;
        this.cd = cd;
        this.loadTrackerSvc = loadTrackerSvc;
        this.text = {};
        this.loadTrackerSvc.loading = true;
    }
    MinistryPage.prototype.ionViewDidEnter = function () {
        var _this = this;
        // This is for Android device, but still not working at the moment
        /*        setTimeout(() => {
                    $([document.documentElement, document.body]).animate({
                        scrollTop: $("#wechat-share").offset().top
                    }, 2000);
                }, 5000)*/
        this.loadTrackerSvc.loading = false;
        this.preloadedDate = this.navParams.get("forDate");
        this.roleChanges = [];
        this.text = this.common.text.chinese['wechat-share'].ministry;
        // if (this.preloadedDate) {
        //     let subscription = this.ministrySvc.content.ministries$.subscribe(ministries => {
        //         let targetIndex = ministries.map(m => m.date).indexOf(this.preloadedDate);
        //         if (targetIndex > 0) {
        //             setTimeout(() => {
        //                 this.slides.slideTo(targetIndex);
        //             }, 200);
        //         }
        //         // this.showContents[targetIndex >= 0 ? targetIndex : 0] = true;
        //         subscription.unsubscribe();
        //     }, console.error);
        // }
        if (this.preloadedDate && this.preloadedDate.match(/\d{4}-\d{2}-\d{2}/)) {
            this.ministrySvc.dataReady$.filter(function (res) { return res != null; }).subscribe(function (res) {
                setTimeout(function () {
                    var scrollContent = __WEBPACK_IMPORTED_MODULE_10_jquery__('page-ministry .scroll-content');
                    var listElem = __WEBPACK_IMPORTED_MODULE_10_jquery__("ion-list#ministry-" + _this.preloadedDate);
                    var offset = listElem.offset().top - 50;
                    scrollContent.animate({ scrollTop: offset });
                }, 200);
            });
        }
    };
    MinistryPage.prototype.share = function () {
        var base64Url = btoa(this.ministrySvc.publishUrl);
        var url = "http://ibc.medocs.com.au/app/#/iframe/\u4F8D\u5949\u8BA1\u5212/" + base64Url;
        // console.log(url);
        // console.log(this.ministrySvc.publishUrl);
        this.wechat.weChatShareLink(url, this.text.title, this.text.subtitle, 'http://ibc.medocs.com.au/img/IBC.ico');
    };
    MinistryPage.prototype.pushSheet = function () {
        this.ministrySvc.pushSheet();
        // if (!this.common.isAndroid) {
        //     setTimeout(() => {
        //         this.slides.slideTo(this.ministrySvc.ministrySheets.length - 1, 100);
        //     }, 500);
        // }
    };
    MinistryPage.prototype.removeSheet = function (i) {
        var _this = this;
        this.common.confirmDialog(null, "\u4F60\u786E\u5B9A\u8981\u5220\u9664 " + this.ministrySvc.ministrySheets[i].date + " \u9875\u9762\u5417\uFF1F", function () {
            _this.ministrySvc.spliceSheet(i);
            // if (!this.common.isAndroid) {
            //     setTimeout(() => {
            //         this.slides.slidePrev();
            //     });
            // }
        });
    };
    MinistryPage.prototype.undo = function () {
        var _this = this;
        this.common.confirmDialog(null, '你确定要重新载入数据吗? 所有未保存的改动都会取消', function () {
            _this.ministrySvc.undo();
            // if (!this.common.isAndroid) {
            //   this.slides.slideTo(0, 200);
            // }
        });
    };
    MinistryPage.prototype.setMinistry = function (sheet, roleKey, contactId) {
        /* Remove any existing role on the same day */
        /* 2018/11/04 This may not be true because some people can play multiple roles on the same day */
        /* 2019/1/1 Disable this same day ministry check */
        // if (roleKey != 'communion1' && roleKey != 'communion2') {
        //     this.ministrySvc.ministryRoles.forEach(role => {
        //         if (role.key != 'communion1' && role.key != 'communion2') {
        //             if (sheet[role.key] == contactId) {
        //                 sheet[role.key] = null;
        //             }
        //         }
        //     });
        // }
        /* Assign the new role to contactId */
        if (contactId == 'N/A') {
            sheet[roleKey] = null;
        }
        else {
            sheet[roleKey] = contactId;
        }
    };
    MinistryPage.prototype.save = function () {
        // diff the role changes:
        var _this = this;
        var sheetsBeforeSaving = __WEBPACK_IMPORTED_MODULE_9_lodash__["cloneDeep"](this.ministrySvc.originalMinistrySheets);
        var sheetsAfterSaving = __WEBPACK_IMPORTED_MODULE_9_lodash__["cloneDeep"](this.ministrySvc.ministrySheets);
        // console.log('--- old sheets ---');
        // console.log(JSON.stringify(sheetsBeforeSaving, null, 2));
        // console.log('--- new sheets ---');
        // console.log(JSON.stringify(sheetsAfterSaving, null, 2));
        this.ministrySvc.saveSheet().then(function (msg) {
            var toast = _this.ministrySvc.toastCtrl.create({
                message: '事工計劃已成功保存',
                duration: 3000,
                position: 'top',
                cssClass: 'toast-success'
            });
            _this.reportRoleChange(sheetsBeforeSaving, sheetsAfterSaving);
            /* Now the saved sheets will become the new original */
            _this.ministrySvc.originalMinistrySheets = __WEBPACK_IMPORTED_MODULE_9_lodash__["cloneDeep"](_this.ministrySvc.ministrySheets);
            // this.sendAddNotification("201", "2018-04-08", "choir2", "敬拜");
            toast.present();
        }, function (err) {
            var toast = _this.ministrySvc.toastCtrl.create({
                message: '保存失败: ' + JSON.stringify(err),
                duration: 3000,
                position: 'top',
                cssClass: 'toast-danger'
            });
            toast.present();
        });
    };
    MinistryPage.prototype.reportRoleChange = function (oldSheets, newSheets) {
        var _this = this;
        this.roleChanges = [];
        var sheetsDiffs = this.common.getArrayDiffs(oldSheets, newSheets, "date", undefined, true);
        console.log(sheetsDiffs);
        /* New Sheets */
        if (sheetsDiffs.newItems.length > 0) {
            sheetsDiffs.newItems.forEach(function (sheet) {
                _this.ministrySvc.ministryRoles.forEach(function (role) {
                    /* Communion ministry is special which often happens when people play other roles. */
                    if (sheet[role.key] && role.key != 'communion1' && role.key != 'communion2') {
                        console.log("=== Add " + role.caption + " to " + sheet[role.key] + "!");
                        _this.sendAddNotification(sheet[role.key], sheet.date, role.key, role.caption);
                    }
                });
            });
        }
        /* Deleted Sheets */
        if (sheetsDiffs.deletedItems.length > 0) {
            /* We will ignore all obsolete sheets */
            sheetsDiffs.deletedItems.filter(function (sheet) { return new Date(sheet.date).getTime() > new Date().getTime(); }).forEach(function (sheet) {
                _this.ministrySvc.ministryRoles.forEach(function (role) {
                    if (sheet[role.key] && role.key != 'communion1' && role.key != 'communion2') {
                        console.log("=== Cancel " + role.caption + " to " + sheet[role.key] + "!");
                        _this.sendCancelNotification(sheet[role.key], sheet.date, role.key, role.caption);
                    }
                });
            });
        }
        if (sheetsDiffs.updatedItems.length > 0) {
            sheetsDiffs.updatedItems.forEach(function (item) {
                var oldSheet = item.oldItem;
                var newSheet = item.newItem;
                _this.ministrySvc.ministryRoles.forEach(function (role) {
                    if (oldSheet[role.key] != newSheet[role.key] && role.key != 'communion1' && role.key != 'communion2') {
                        console.log("Update member for " + newSheet.date + " - " + role.caption + ": " + oldSheet[role.key] + " => " + newSheet[role.key]);
                        _this.sendCancelNotification(oldSheet[role.key], oldSheet.date, role.key, role.caption);
                        _this.sendAddNotification(newSheet[role.key], newSheet.date, role.key, role.caption);
                    }
                });
            });
        }
    };
    MinistryPage.prototype.sendCancelNotification = function (contactId, datetime, roleKey, roleCaption) {
        var datetimeCaption = __WEBPACK_IMPORTED_MODULE_8_moment__(datetime).format("M月D日");
        var item = {
            datetime: datetime,
            isNew: true,
            key: datetime + "-cancel-service",
            value: roleKey,
            params: {
                forDate: datetime
            },
            redirect: "ministry-page",
            sender: this.ministrySvc.content.myselfContact.id,
            subtitle: "",
            title: datetimeCaption + " \u4E8B\u5949\u53D6\u6D88 - " + roleCaption
        };
        this.notificationSvc.addNotification(contactId, item);
    };
    MinistryPage.prototype.sendAddNotification = function (contactId, datetime, roleKey, roleCaption) {
        var datetimeCaption = __WEBPACK_IMPORTED_MODULE_8_moment__(datetime).format("M月D日");
        var item = {
            datetime: datetime,
            isNew: true,
            key: datetime + "-add-service",
            params: {
                forDate: datetime
            },
            value: roleKey,
            popUpQuestion: {
                caption: datetimeCaption + "\u4F60\u80FD\u53C2\u52A0<" + roleCaption + ">\u4E8B\u5949\u5417\uFF1F",
                default: true,
                key: "confirmMinistry",
                notifications: [{
                        answer: "no",
                        key: datetime + "-confirm-service",
                        subtitle: "{{myselfContact.name}} ({{myselfContact.chinese_name}}) \u65E0\u6CD5\u53C2\u52A0" + datetimeCaption + "\u656C\u62DC",
                        title: datetimeCaption + "\u4E8B\u5949\u7F3A\u5E2D - " + roleCaption,
                        value: roleKey,
                        redirect: "ministry-page",
                        params: {
                            forDate: datetime
                        }
                    }, {
                        answer: "yes",
                        key: datetime + "-confirm-service",
                        subtitle: "{{myselfContact.name}} ({{myselfContact.chinese_name}}) \u5DF2\u786E\u8BA4\u4E8B\u5949" + datetimeCaption + "\u656C\u62DC",
                        title: datetimeCaption + "\u4E8B\u5949\u786E\u8BA4 - " + roleCaption,
                        value: roleKey,
                        redirect: "ministry-page",
                        params: {
                            forDate: datetime
                        }
                    }],
                recipient: this.ministrySvc.content.myselfContact.id,
                type: __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["b" /* TypeInputUI */].Boolean
            },
            redirect: "ministry-page",
            sender: this.ministrySvc.content.myselfContact.id,
            subtitle: "",
            title: datetimeCaption + " " + this.ministrySvc.content.myselfContact.name + "\u9080\u8BF7\u4F60\u53C3\u52A0\u4E8B\u5949 - " + roleCaption
        };
        this.notificationSvc.addNotification(contactId, item);
    };
    // Used to boost slider performance, but not used for now. The only device having performance issue of slider is android
    /*    get currIndex(): number {
          return this.slides.getActiveIndex();
        }
    
        slideChanged(): void {
            console.log('slide changed!');
            setTimeout(() => {
              this.showContents[this.currIndex] = true;
            }, 200);
        }
    
        slideChanging(): void {
          console.log('slide changing...');
          this.showContents[this.currIndex] = false;
        }
    
        showContents: any[] = [];*/
    MinistryPage.prototype.ngOnInit = function () {
        console.log('--- loading data ---');
        /*        if (this.preloadedDate) {
                    let subscription = this.ministrySvc.content.ministries$.subscribe(ministries => {
                        let targetIndex = ministries.map(m => m.date).indexOf(this.preloadedDate);
                        console.log(`targetIndex = ${targetIndex}`);
                        if (targetIndex > 0) {
                            setTimeout(() => {
                              if (!this.common.isAndroid) {
                                this.slides.slideTo(targetIndex);
                              }
                            }, 200);
                        }
        
                        // this.showContents[targetIndex >= 0 ? targetIndex : 0] = true;
                        subscription.unsubscribe();
                    }, console.error);
                }*/
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])('slides'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* Slides */])
    ], MinistryPage.prototype, "slides", void 0);
    MinistryPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-ministry',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/ministry/ministry.html"*/'<!--\n  Generated template for the MinistryPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>   \n    <ion-title>恆常事工</ion-title>\n    <ion-buttons end>\n<!--       <button ion-button color="primary" *ngIf="displayName != \'Chinese\'" (click)="displayName = \'Chinese\'">\n        中文名\n      </button>\n      <button ion-button color="primary" *ngIf="displayName != \'English\'" (click)="displayName = \'English\'">\n        英文名\n      </button>   -->                        \n      <button ion-button color="primary" [hidden]="ministrySvc.readonly" (click)="save()">\n        Save\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content class="outer-content">\n\n<!--     <ng-container>\n      <ion-slides pager #slides (ionSlideDidChange)="slideChanged()" (ionSlideWillChange)="slideChanging()">\n        <ion-slide *ngFor="let ministry of ministrySvc.ministrySheets; let i = index" style="align-items: start">\n          <ng-container *ngIf="showContents[i]">\n              <ion-list>\n\n                <div fxLayout="row" fxLayoutAlign="center center" style="padding: 0.5rem">\n                  <button [hidden]="ministrySvc.readonly" class="ibc-content-button" ion-button small color="blue" (click)="removeSheet(i)" start>\n                    <ion-icon name="remove"></ion-icon>\n                  </button>        \n                  <div fxFlex></div>\n                  <h3 class="ibc-h-padding-10" style="font-size: 1.8rem">{{ministry.date | date:\'M月d日\'}}</h3>\n                  <div fxFlex></div>\n                  <button [hidden]="ministrySvc.readonly" class="ibc-content-button" ion-button small color="blue" (click)="pushSheet()" end>\n                    <ion-icon name="add"></ion-icon>\n                  </button>\n                </div>\n\n                <ion-item *ngFor="let role of ministrySvc.ministryRoles">\n                  <ion-label>{{role.caption}}</ion-label>\n                  <ion-note color="primary" *ngIf="ministrySvc.readonly && ministrySvc.getContact(ministry[role.key]) as contact" [contact-link]="contact" item-end></ion-note>\n                  <ion-select [ngModel]="ministry[role.key]" (ngModelChange)="setMinistry(ministry, role.key, $event)" *ngIf="!ministrySvc.readonly">\n                    <ion-option [value]="null">N/A</ion-option>\n                    <ion-option [value]="member.id" *ngFor="let member of ministrySvc[role.optionGetter]">{{member.name}} ({{member.chinese_name}})</ion-option>\n                  </ion-select>\n                  <ion-icon [style.visibility]="ministry[role.key] && ministry.confirm && ministry.confirm[ministry[role.key]]?\'visible\':\'hidden\'" name="checkmark" color="teal" item-right></ion-icon>\n                </ion-item>   \n\n              </ion-list>\n            </ng-container>           \n          </ion-slide>\n        </ion-slides>      \n    </ng-container> -->\n\n    <ng-container>\n      <ng-container *ngFor="let ministry of ministrySvc.ministrySheets; let i = index; let isFirst = first">\n        <ion-list [attr.id]="\'ministry-\'+ministry.date">\n\n          <div fxLayout="row" fxLayoutAlign="center center" style="padding: 0.5rem">\n            <h3 class="ibc-h-padding-10" style="font-size: 1.8rem">{{ministry.date | date:\'M月d日\'}}</h3>\n            <div fxFlex></div>\n            <button *ngIf="isFirst" small ion-button color="primary" class="ibc-button" [hidden]="ministrySvc.readonly" (click)="undo()">\n              Reset\n            </button>\n            <button [hidden]="ministrySvc.readonly" small ion-button color="danger" class="ibc-button" (click)="removeSheet(i)">\n              删除\n            </button>        \n          </div>\n\n          <ion-item *ngFor="let role of ministrySvc.ministryRoles">\n            <ion-label>{{role.caption}}</ion-label>\n            <ion-note color="primary" *ngIf="ministrySvc.readonly && ministrySvc.getContact(ministry[role.key]) as contact" [contact-link]="contact" item-end></ion-note>\n            <ion-select [ngModel]="ministry[role.key]" (ngModelChange)="setMinistry(ministry, role.key, $event)" *ngIf="!ministrySvc.readonly">\n              <ion-option [value]="null">N/A</ion-option>\n              <ion-option [value]="member.id" *ngFor="let member of ministrySvc.getCandidates(role)">{{member.name}} ({{member.chinese_name}})</ion-option>\n            </ion-select>\n            <ion-icon [style.visibility]="ministry[role.key] && ministry.confirm && ministry.confirm[ministry[role.key]]?\'visible\':\'hidden\'" name="checkmark" color="teal" item-right></ion-icon>\n          </ion-item>   \n\n        </ion-list>         \n      </ng-container>     \n    </ng-container>\n\n    <button [hidden]="ministrySvc.readonly" ion-button block color="teal-1" (click)="pushSheet()">\n      + 添加\n    </button>\n\n    <button id="wechat-share" *ngIf="content.allowWechat" ion-button block color="green" [hidden]="ministrySvc.readonly" (click)="share()">\n      微信分享\n    </button>\n\n</ion-content>\n\n<load-tracker></load-tracker>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/ministry/ministry.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_ministry_ministry__["a" /* MinistryProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_notification_notification__["a" /* NotificationProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["a" /* DataProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_wechat_wechat__["a" /* WechatProvider */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectorRef */],
            __WEBPACK_IMPORTED_MODULE_7__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */]])
    ], MinistryPage);
    return MinistryPage;
}());

//# sourceMappingURL=ministry.js.map

/***/ }),

/***/ 1094:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SermonPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__ = __webpack_require__(38);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the SermonPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var SermonPage = (function () {
    function SermonPage(navCtrl, navParams, commonSvc, content, wechat) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.commonSvc = commonSvc;
        this.content = content;
        this.wechat = wechat;
        // xFFHEJE3914
        var id = this.navParams.get('id');
        if (id) {
            this.content.sermons$.subscribe(function (sermons) {
                _this.sermon = sermons.filter(function (s) { return s.id == id; })[0];
                console.log(_this.sermon);
            });
        }
    }
    SermonPage.prototype.share = function () {
        var url = "http://ibc.medocs.com.au/app/#/sermon/" + this.sermon.id;
        this.wechat.weChatShareLink(url, "\u6559\u6703\u8B1B\u9053\u5206\u4EAB: " + this.sermon.title, this.sermon.subtitle, this.sermon.thumbnail || "https://img.youtube.com/vi/" + this.sermon.id + "/0.jpg");
    };
    SermonPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad SermonPage');
    };
    SermonPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-sermon',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/sermon/sermon.html"*/'<!--\n  Generated template for the SermonPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>{{sermon?.title}}</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n    <youtube-video *ngIf="sermon?.type == \'video\'" [youtubeId]="sermon?.id"></youtube-video>  \n    <h5 text-center>{{sermon?.subtitle}}</h5>\n    <div class="ibc-full-width">\n        {{sermon?.description}}\n    </div>\n    <hr />\n    <div class="ibc-full-width">\n        {{sermon?.content}}\n    </div>\n    <ibc-comment [title]="sermon?.title" [chatId]="sermon?.chatId"></ibc-comment>   \n    <button *ngIf="content.allowWechat" ion-button block color="green" (click)="share()">\n      微信分享\n    </button>       \n</ion-content>\n\n<load-tracker></load-tracker>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/sermon/sermon.html"*/,
            host: {
                class: 'ibc-allow-text-select'
            }
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__["a" /* WechatProvider */]])
    ], SermonPage);
    return SermonPage;
}());

//# sourceMappingURL=sermon.js.map

/***/ }),

/***/ 1095:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SongPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__ = __webpack_require__(38);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the SongPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var SongPage = (function () {
    function SongPage(navCtrl, navParams, commonSvc, content, wechat) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.commonSvc = commonSvc;
        this.content = content;
        this.wechat = wechat;
        this.id = navParams.get('id');
        this.album = navParams.get('album');
        this.title = navParams.get('title');
        this.set = navParams.get('set');
        this.lyric = navParams.get('lyric');
        this.language = navParams.get('language');
        this.content.songs$.subscribe(function (songs) {
            _this.activeSong = songs.filter(function (s) { return s.id == _this.id; })[0];
        });
    }
    SongPage.prototype.share = function () {
        var url = "http://ibc.medocs.com.au/app/#/song/" + this.id;
        var info = "Set " + this.activeSong.set;
        if (this.activeSong.album) {
            info += " - \u4E13\u8F91: " + this.activeSong.album;
        }
        if (this.activeSong.language) {
            info += " (" + this.activeSong.language + ")";
        }
        this.wechat.weChatShareLink(url, "\u8BD7\u6B4C\u5206\u4EAB: " + this.activeSong.name, info, "https://img.youtube.com/vi/" + this.id + "/0.jpg");
    };
    SongPage.prototype.ionViewDidLoad = function () {
        // console.log('ionViewDidLoad SongPage');
    };
    SongPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-song',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/song/song.html"*/'<!--\n  Generated template for the SongPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <ion-title>{{activeSong?.album || album}}</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n<ion-content padding>\n\n    <h3 text-center>{{activeSong?.name || title}} ({{activeSong?.language || language || \'國語\'}})</h3>\n\n    <div text-center class="ibc-full-width ibc-bottom-margin-10">\n        <ion-note>Set {{activeSong?.set || set}}</ion-note>\n    </div>\n\n     <div text-center fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="50px" class="ibc-full-width ibc-bottom-margin-10">\n        <div *ngIf="activeSong?.composer">作曲: {{activeSong?.composer}}</div>\n        <div *ngIf="activeSong?.lyricWriter">作詞: {{activeSong?.lyricWriter}}</div>\n    </div>   \n\n    <youtube-video [youtubeId]="id"></youtube-video>  \n    \n    <ng-container *ngIf="activeSong?.note">\n      <p text-right>{{activeSong?.note}}</p>\n      <hr>\n    </ng-container>\n\n    <pre text-center>{{activeSong?.lyric || lyric}}</pre>\n\n    <button *ngIf="content.allowWechat" ion-button block color="green" (click)="share()">\n      微信分享\n    </button>\n\n</ion-content>\n\n<load-tracker></load-tracker>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/song/song.html"*/,
            host: {
                class: 'ibc-allow-text-select'
            }
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_3__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__["a" /* WechatProvider */]])
    ], SongPage);
    return SongPage;
}());

//# sourceMappingURL=song.js.map

/***/ }),

/***/ 1113:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyApp; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__ = __webpack_require__(194);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__ = __webpack_require__(731);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_home_home__ = __webpack_require__(187);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_s2t_s2t__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





// import { AdminSmsPage } from '../pages/admin-sms/admin-sms';
// import { MonthlyVersesPage } from '../pages/monthly-verses/monthly-verses';




// enum AuthLevel {
//   Anonymous,
//   LoggedIn,
//   Member,
//   Admin
// }
var MyApp = (function () {
    function MyApp(platform, statusBar, splashScreen, s2t, ibcFB, common, content) {
        this.platform = platform;
        this.statusBar = statusBar;
        this.splashScreen = splashScreen;
        this.s2t = s2t;
        this.ibcFB = ibcFB;
        this.common = common;
        this.content = content;
        this.rootPage = __WEBPACK_IMPORTED_MODULE_4__pages_home_home__["a" /* HomePage */];
        this.initializeApp();
        // this.platform.ready().then(() => {
        //     this.storage = new SQLite();
        //     this.storage.openDatabase({
        //         name: 'bible.db',
        //         location: 'default',
        //         createFromLocation: 1
        //     }).then(() => {
        //       console.log("=== connected ===");
        //       this.storage.executeSql("SELECT * from Bible limit 10", []).then((data) => {
        //           // console.log("Data received: ", data);
        //           let rows = data.rows;
        //           for (let i = 0; i < rows.length; i++) {
        //             console.log(JSON.stringify(rows.item(i)));
        //           }              
        //           this.storage.close();
        //       }, (error) => {
        //           console.error("Unable to execute sql", JSON.stringify(error));
        //           this.storage.close();
        //       });
        //     }, () => {
        //       console.log("=== error connection ===");
        //       this.storage.close();
        //     })
        // });
        // used for an example of ngFor and navigation
        // this.pages = [
        //   { title: '回到首頁', component: 'home-page', needAuth: false },
        //   { title: '教會講道', component: 'list-page', needAuth: false, params: {type: 'sermonPageParams'} },
        //   { title: '贊美詩歌', component: 'list-page', needAuth: false, params: {type: 'fullSongPageParams'}},
        //   // { title: '本月金句', component: MonthlyVersesPage, needAuth: false },
        //   { title: '教會成員', component: 'contact-page', needAuth: true },
        //   { title: '恆常事工', component: 'ministry-page', needAuth: true },
        //   { title: '牧者分享', component: 'list-page', needAuth: false, params: {type: 'beliefUrlsParams'} },
        //   { title: '教會活動', component: 'list-page', needAuth: false, params: {type: 'activitiesParams'} },
        //   { title: '中文聖經', component: 'bible-page', needAuth: false },
        //   { title: '我的好友', component: 'contact-page', needAuth: true, params: {myFriends: true, title: '我的好友'} },
        //   { title: '我的任务', component: 'list-page', needAuth: true, params: {type: 'myTasksParams'} },
        //   { title: '關於我們', component: 'about-page', needAuth: false },
        //   { title: '關於APP', component: 'about-app-page', needAuth: false },
        //   { title: '群組管理', component: 'list-page', needAuth: true, adminAuth: true, params: {type: 'groupManagementParams'} },
        //   { title: '系统管理', component: 'admin-system-page', needAuth: true, adminAuth: true },
        // ];
        this.pages = this.common.text.chinese.sidemenu;
    }
    MyApp.prototype.initializeApp = function () {
        var _this = this;
        this.platform.ready().then(function () {
            // Okay, so the platform is ready and our plugins are available.
            // Here you can do any higher level native things you might need.
            _this.statusBar.styleDefault();
            _this.splashScreen.hide();
        });
    };
    MyApp.prototype.ngAfterViewInit = function () {
        // let page = this.pages[5];
        // this.openPage(page);
        // this.openPage({component: EditorPage, params: {
        //   titleHtml: `
        //   <img class="img-avatar" src='https://firebasestorage.googleapis.com/v0/b/ibc-app-94466.appspot.com/o/avatar%2F001?alt=media&token=60fe0f52-00c4-441a-a083-c8d566d89a47'">
        //   <img width='40px' src='assets/icon/arrow-icon.png'>
        //   <img class="img-avatar" src="https://firebasestorage.googleapis.com/v0/b/ibc-app-94466.appspot.com/o/avatar%2F001?alt=media&token=60fe0f52-00c4-441a-a083-c8d566d89a47">
        //   `
        // }});
        // this.openPage({component: ChatPage, params: {contact: {
        //   "address1" : "35 King St.",
        //   "address2" : "Waratah West",
        //   "chinese_name" : "張靜",
        //   "country" : "",
        //   "dob" : "1978-03-06",
        //   "email" : "zhangjingets7836@gmail.com",
        //   "id" : "201",
        //   "mobile" : "0426752408",
        //   "name" : "Jill",
        //   "photoURL" : "https://firebasestorage.googleapis.com/v0/b/ibc-app-94466.appspot.com/o/avatar%2Fibc_Uweefae9Gaith?alt=media&token=6832ab37-ef27-47f0-b382-e39b58748187",
        //   "visited" : true
        // }}});
    };
    MyApp.prototype.openPage = function (page) {
        // Reset the content nav to have just this page
        // we wouldn't want the back button to show in this scenario
        this.nav.setRoot(page.component, (typeof page.params == 'function' ? page.params() : page.params));
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["h" /* Nav */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["h" /* Nav */])
    ], MyApp.prototype, "nav", void 0);
    MyApp = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/app/app.html"*/'<ion-menu [hidden]="common.forceUpdateVersion" [content]="content" color="sidebar">\n  <ion-header color="sidebar">\n    <ion-toolbar color="sidebar">\n      <ion-title>目錄</ion-title>\n    </ion-toolbar>\n  </ion-header>\n\n  <ion-content no-bounce color="sidebar">\n    <ion-list color="sidebar">\n      <button color="sidebar" menuClose ion-item \n      [hidden]="(p.needAuth && (!ibcFB.isAuthed || !ibcFB.access_level)) || (p.adminAuth && (!ibcFB.isAuthed || ibcFB.access_level < 3))" *ngFor="let p of pages" (click)="openPage(p)">\n        {{p.title}}\n      </button>\n    </ion-list>\n  </ion-content>\n\n</ion-menu>\n\n<!-- Disable swipe-to-go-back because it\'s poor UX to combine STGB with side menus -->\n<ion-nav [root]="rootPage" #content swipeBackEnabled="false"></ion-nav>'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/app/app.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__["a" /* StatusBar */],
            __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__["a" /* SplashScreen */],
            __WEBPACK_IMPORTED_MODULE_6__providers_s2t_s2t__["a" /* S2tProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */],
            __WEBPACK_IMPORTED_MODULE_7__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_8__providers_data_adaptor_data_adaptor__["a" /* DataProvider */]])
    ], MyApp);
    return MyApp;
}());

//# sourceMappingURL=app.component.js.map

/***/ }),

/***/ 115:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return VideoProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_youtube_video_player__ = __webpack_require__(520);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the VideoProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var VideoProvider = (function () {
    function VideoProvider(platform, youtube, ibcFB) {
        var _this = this;
        this.platform = platform;
        this.youtube = youtube;
        this.ibcFB = ibcFB;
        this._songList = [];
        this.nextServiceSongs = [];
        this.ibcFB.afDB.list('songs').valueChanges().subscribe(function (res) {
            _this._songList = res;
            _this.ibcFB.afDB.list('nextServiceSongs').valueChanges().subscribe(function (res) {
                _this.nextServiceSongs = _this._songList.filter(function (s) { return res.filter(function (nss) { return nss == s.id; }).length > 0; });
            });
        });
    }
    Object.defineProperty(VideoProvider.prototype, "songList", {
        get: function () {
            return this._songList;
            // return [
            //     {
            //         id: 'AjL3gfY9SOA',
            //         name: "陪我走過春夏秋冬"
            //     },
            //     {
            //         id: '_koWe28jUTo',
            //         name: "一粒麥子"
            //     },
            //     {
            //         id: "JnXaTrJtbUA",
            //         name: "不變的應許"
            //     },
            //     {
            //         id: "ELKqLAPT1Wg",
            //         name: "陪我"
            //     }
            // ]
        },
        enumerable: true,
        configurable: true
    });
    VideoProvider.prototype.play = function (id) {
        if (this.platform.is('core') || this.platform.is('mobileweb')) {
            window.open("https://www.youtube.com/watch?v=" + id, '_blank');
        }
        else {
            this.youtube.openVideo(id, function (result) {
                if (result == 'error') {
                    window['InAppYouTube'].openVideo(id, {
                        fullscreen: true
                    });
                }
            });
        }
    };
    VideoProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2__ionic_native_youtube_video_player__["a" /* YoutubeVideoPlayer */],
            __WEBPACK_IMPORTED_MODULE_3__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */]])
    ], VideoProvider);
    return VideoProvider;
}());

//# sourceMappingURL=video.js.map

/***/ }),

/***/ 116:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BrowserProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_in_app_browser__ = __webpack_require__(654);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_file_cache_file_cache__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_opener__ = __webpack_require__(188);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_load_tracker_load_tracker__ = __webpack_require__(30);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var applicationMap = {
    doc: "application/msword",
    dot: "application/msword",
    docx: "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
    dotx: "application/vnd.openxmlformats-officedocument.wordprocessingml.template",
    docm: "application/vnd.ms-word.document.macroEnabled.12",
    dotm: "application/vnd.ms-word.template.macroEnabled.12",
    xls: "application/vnd.ms-excel",
    xlt: "application/vnd.ms-excel",
    xla: "application/vnd.ms-excel",
    xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
    xltx: "application/vnd.openxmlformats-officedocument.spreadsheetml.template",
    xlsm: "application/vnd.ms-excel.sheet.macroEnabled.12",
    xltm: "application/vnd.ms-excel.template.macroEnabled.12",
    xlam: "application/vnd.ms-excel.addin.macroEnabled.12",
    xlsb: "application/vnd.ms-excel.sheet.binary.macroEnabled.12",
    ppt: "application/vnd.ms-powerpoint",
    pot: "application/vnd.ms-powerpoint",
    pps: "application/vnd.ms-powerpoint",
    ppa: "application/vnd.ms-powerpoint",
    pptx: "application/vnd.openxmlformats-officedocument.presentationml.presentation",
    potx: "application/vnd.openxmlformats-officedocument.presentationml.template",
    ppsx: "application/vnd.openxmlformats-officedocument.presentationml.slideshow",
    ppam: "application/vnd.ms-powerpoint.addin.macroEnabled.12",
    pptm: "application/vnd.ms-powerpoint.presentation.macroEnabled.12",
    potm: "application/vnd.ms-powerpoint.template.macroEnabled.12",
    ppsm: "application/vnd.ms-powerpoint.slideshow.macroEnabled.12",
    mdb: "application/vnd.ms-access",
    png: "image/png",
    jpeg: "image/jpeg",
    jpg: "image/jpeg"
};
// const regexPatternsForCode: { regex: string, code?: string, css?: string }[] = [
//     {
//         regex: 'adm/a-3QUEstions.htm$',
//         code: `
//             elm = \$('#content_container_inner');
//             \$('body').empty();
//             \$('body').append(elm);
//             \$('body').css({'background-color':'#695B42','color':'white'});
//             elm.css({padding: '1rem'});
//           `
//     }
// ];
/*
  Generated class for the BrowserProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var BrowserProvider = (function () {
    function BrowserProvider(platform, iab, content, loadTrackerSvc, fileOpener, fileCacheSvc) {
        this.platform = platform;
        this.iab = iab;
        this.content = content;
        this.loadTrackerSvc = loadTrackerSvc;
        this.fileOpener = fileOpener;
        this.fileCacheSvc = fileCacheSvc;
    }
    BrowserProvider.prototype.openMobilePage = function (url, isMedia, callback) {
        var _this = this;
        if (isMedia === void 0) { isMedia = false; }
        var browser;
        if (this.platform.is('android')) {
            var target = '_blank';
            if (isMedia) {
                target = '_system';
            }
            browser = this.iab.create(url, target, {
                location: 'no',
                hardwareback: 'no',
                hidden: 'yes'
            });
        }
        else if (this.platform.is('ios')) {
            browser = this.iab.create(url, '_blank', {
                presentationstyle: 'pagesheet',
                toolbarposition: 'top',
                location: 'no',
                zoom: 'yes',
                enableViewportScale: 'yes',
                toolbar: 'yes',
                closebuttoncaption: '返回',
                transitionstyle: 'fliphorizontal'
            });
        }
        if (browser) {
            browser.on('loadstart').subscribe(function () {
                _this.loadTrackerSvc.loading = true;
            });
            browser.on('loadstop').subscribe(function (res) {
                _this.loadTrackerSvc.loading = false;
                var url = res.url;
                if (typeof callback == 'function') {
                    callback(browser);
                }
                var code;
                var regexPatternsForCode = _this.content.urlPageAdjustments;
                for (var i = 0; i < regexPatternsForCode.length; i++) {
                    if (url.match(new RegExp(regexPatternsForCode[i].regex, 'i'))) {
                        code = regexPatternsForCode[i].code;
                        break;
                    }
                }
                if (code) {
                    browser.executeScript({ code: code });
                }
                browser.show();
                // browser.insertCSS({ code: "html {margin-top: 200px;" });
                // 
                //  , () => {
                //   console.log('Finished loading!');
                //   browser.insertCSS({ code: "body{font-size: 25px;" });
                // })
                // browser.close();
                // browser.executeScript(...);
                // browser.close();
            }, function (err) {
                _this.loadTrackerSvc.loading = false;
            });
        }
    };
    BrowserProvider.prototype.openPage = function (sourceUrl, callback) {
        // let browser: InAppBrowserObject;
        var _this = this;
        if (!sourceUrl)
            return;
        /* Open it in another tab if it is run in the browsesr */
        if (this.platform.is('core') || this.platform.is('mobileweb')) {
            window.open(sourceUrl, '_blank');
            return;
        }
        var regex = /\.(pdf|ppt|pptx|mp4|flv|png|jpg|jpeg)$/;
        var matches = sourceUrl.match(regex);
        if (matches) {
            var ext = matches[1];
            // ext = 'vnd.openxmlformats-officedocument.presentationml.presentation';
            var contentType_1 = applicationMap[ext] || 'application/' + ext;
            console.log("--- contentType = " + contentType_1 + " ---");
            /* Above types requires caching */
            this.fileCacheSvc.cacheFile(sourceUrl).then(function (url) {
                console.log("==== URL cached in Browser service ====");
                if (_this.platform.is('android')) {
                    console.log("=== Using fileOpener to open " + url);
                    _this.fileOpener.open(url, contentType_1).then(function () { }).catch(function (err) { return console.error(JSON.stringify(err)); });
                    /* local cdvfile:// url type does not work in android's inAppBrowser */
                    // this.openMobilePage(sourceUrl, true, callback);
                }
                else {
                    _this.openMobilePage(url, true, callback);
                }
            }, function (err) { return console.error(JSON.stringify(err)); });
        }
        else {
            /* No caching, directly open the source URL in the inAppBrowser */
            this.openMobilePage(sourceUrl, false, callback);
        }
    };
    BrowserProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_in_app_browser__["a" /* InAppBrowser */], __WEBPACK_IMPORTED_MODULE_3__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_6__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_opener__["a" /* FileOpener */], __WEBPACK_IMPORTED_MODULE_4__providers_file_cache_file_cache__["a" /* FileCacheProvider */]])
    ], BrowserProvider);
    return BrowserProvider;
}());

//# sourceMappingURL=browser.js.map

/***/ }),

/***/ 117:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export PasswordValidation */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return UserProfilePage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModalSelectAvatar; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_photo_photo__ = __webpack_require__(118);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_file_cache_file_cache__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_ministry_ministry__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__app_env__ = __webpack_require__(41);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








// import { PhotoProvider, IntCropperSettings } from '../../providers/photo/photo';





var PasswordValidation = (function () {
    function PasswordValidation() {
    }
    PasswordValidation.MatchPassword = function (AC) {
        var password = AC.get('password1').value; // to get value in input tag
        var confirmPassword = AC.get('password2').value; // to get value in input tag
        if (password != confirmPassword) {
            AC.get('password2').setErrors({ MatchPassword: true });
        }
        else {
            return null;
        }
    };
    return PasswordValidation;
}());

/**
 * Generated class for the UserProfilePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var UserProfilePage = (function () {
    function UserProfilePage(navCtrl, navParams, fb, ibcFB, toastCtrl, photoSvc, http, content, cacheSvc, modalCtrl, commonSvc, viewCtrl, ministrySvc) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.ibcFB = ibcFB;
        this.toastCtrl = toastCtrl;
        this.photoSvc = photoSvc;
        this.http = http;
        this.content = content;
        this.cacheSvc = cacheSvc;
        this.modalCtrl = modalCtrl;
        this.commonSvc = commonSvc;
        this.viewCtrl = viewCtrl;
        this.ministrySvc = ministrySvc;
        this.loadingAvatar = false;
        this.avatarDirty = false;
        this.showTaC = false;
        this.showAuthInfo = false;
        this.showPersonalInfo = false;
        this.showMinistrySkills = false;
        this.submittingAuthForm = false;
        this.submittingUserForm = false;
        this.skills = {};
        this.allSkills = [];
        this.authForm = fb.group({
            username: [{ value: null, disabled: true }, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].required],
            oldpassword: [null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].required],
            password1: [null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].required],
            password2: [null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].required],
        }, {
            validator: PasswordValidation.MatchPassword
        });
        this.userForm = fb.group({
            id: [null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].required],
            name: [null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["f" /* Validators */].required],
            chinese_name: [null],
            photoURL: [null],
            email: [null],
            mobile: [null],
            dob: [null],
            address1: [null],
            address2: [null],
            province: [null],
            state: [null],
            country: [null],
            postcode: [null],
            wechat: [{ value: null, disabled: true }],
            skills: [null],
            visited: [null],
            shareInfo: [null]
        });
        this.allSkills = this.ministrySvc.ministrySkills;
        this.allSkills.forEach(function (ms) {
            _this.skills[ms.key] = false;
        });
    }
    UserProfilePage.prototype.ngOnInit = function () {
        var _this = this;
        this.content.currentUser$.subscribe(function (user) {
            _this.uid = _this.ibcFB.afAuth.auth.currentUser.uid;
            _this.authForm.controls.username.setValue(user.username);
            if (!user.visited) {
                _this.showAuthInfo = true;
                _this.showTaC = true;
                _this.viewCtrl.showBackButton(false);
            }
            if (!user.skills) {
                user.skills = [];
            }
            /* make sure we only add existing ministry keys */
            user.skills.forEach(function (k) {
                var existingKey = _this.allSkills.filter(function (ms) { return ms.key == k; })[0];
                if (existingKey) {
                    _this.skills[k] = true;
                }
            });
            _this.userForm.patchValue(user);
        }, function (err) { });
    };
    UserProfilePage.prototype.confirmShareInfo = function (val) {
        var _this = this;
        if (val && !val.value) {
            this.commonSvc.confirmDialog(null, '你真要關閉聯繫方式共享嗎？這樣你也無法看到其他兄弟姊妹的聯繫方式了', function () {
                _this.userForm.controls['shareInfo'].setValue(false);
                _this.content.myselfContactDB.update(_this.userForm.getRawValue());
            }, function () {
                _this.userForm.controls['shareInfo'].setValue(true);
                val.value = true;
            }, { negativeLabel: '公開', positiveLabel: '關閉' });
        }
        else {
            this.userForm.controls['shareInfo'].setValue(true);
            this.content.myselfContactDB.update(this.userForm.getRawValue());
        }
    };
    UserProfilePage.prototype.clearFormControl = function (c) {
        c.reset();
        c.markAsDirty();
    };
    UserProfilePage.prototype.save = function () {
        var _this = this;
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]({
            Authorization: "Bearer " + this.content.auth.uid,
            Accept: 'application/json',
            'Content-Type': 'application/json'
        });
        if (this.authForm.dirty) {
            this.submittingAuthForm = true;
            if (this.authForm.invalid) {
                return;
            }
            this.http.post(__WEBPACK_IMPORTED_MODULE_10__app_env__["a" /* ENV */].apiServer + "/auth/changepassword", this.authForm.getRawValue()).subscribe(function (result) {
                var toast = _this.toastCtrl.create({
                    message: '您的密碼已成功修改，請務必保存',
                    duration: 3000,
                    position: 'top',
                    cssClass: 'toast-success'
                });
                toast.present();
                _this.authForm.markAsPristine();
                _this.submittingAuthForm = false;
                if (!_this.content.myselfContact.visited) {
                    _this.content.myselfContactDB.child('visited').set(true).then(function (data) {
                        console.log('--- saving complete: set visited! ---');
                        setTimeout(function () {
                            _this.navCtrl.pop();
                        }, 500);
                    }, console.error);
                }
            }, function (err) {
                var body = err.json();
                // console.log(body);
                var toast = _this.toastCtrl.create({
                    message: "\u5BC6\u78BC\u4FEE\u6539\u5931\u6557: " + (body && body.error),
                    duration: 3000,
                    position: 'top',
                    cssClass: 'toast-danger'
                });
                toast.present();
                _this.authForm.markAsPristine();
                _this.submittingAuthForm = false;
            });
        }
        if (this.userForm.dirty) {
            this.submittingUserForm = true;
            if (this.userForm.invalid) {
                return;
            }
            // generate skill list
            this.userForm.controls['skills'].setValue(Object.keys(this.skills).filter(function (k) { return _this.skills[k]; }));
            var success_toast_1 = this.toastCtrl.create({
                message: '您的個人資料已成功保存',
                duration: 3000,
                position: 'top',
                cssClass: 'toast-success'
            });
            var failure_toast_1 = this.toastCtrl.create({
                message: '資料保存出錯',
                duration: 3000,
                position: 'top',
                cssClass: 'toast-danger'
            });
            this.content.myselfContactDB.update(this.userForm.getRawValue()).then(function (data) {
                success_toast_1.present();
                _this.userForm.markAsPristine();
                _this.submittingUserForm = false;
                _this.avatarDirty = false;
                /* 2018-06-02: At the moment we don't want to update email on API server because
                 the email on API server is associated with the login Gmail account, which doesn't have
                 to be the same as the one in firebase.

                 The email on API server will only be updated when user associated their account with
                 Gmail plus. See ibcFB.linkGoogle()
                 */
                // if (this.userForm.controls.email.dirty) {
                //     this.http.post(`${ENV.apiServer}/auth/changeemail`, {
                //         email: this.userForm.controls.email.value
                //     }, new RequestOptions({ headers })).subscribe(res => {
                //         success_toast.present();
                //         this.userForm.markAsPristine();
                //         this.submittingUserForm = false;
                //         this.avatarDirty = false;
                //     }, err => { 
                //         failure_toast.present();
                //         this.userForm.markAsPristine();
                //         console.log(err);
                //         this.submittingUserForm = false;
                //     });
                // } else {
                //     success_toast.present();
                //     this.userForm.markAsPristine();
                //     this.submittingUserForm = false;
                //     this.avatarDirty = false;
                // }
            }).catch(function (err) {
                failure_toast_1.present();
                _this.userForm.markAsPristine();
                console.log(err);
                _this.submittingUserForm = false;
            });
        }
    };
    UserProfilePage.prototype.selectAvatar = function () {
        var selectModal = this.modalCtrl.create(ModalSelectAvatar, { form: this.userForm });
        selectModal.present();
    };
    UserProfilePage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad UserProfilePage');
    };
    UserProfilePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-user-profile',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/user-profile/user-profile.html"*/'<ion-header>\n\n  <ion-navbar>\n    <ion-title>編輯個人檔案</ion-title>\n    <ion-buttons end>\n      <button ion-button color="primary" (click)="save()">\n        保存\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n\n</ion-header>\n\n<load-tracker></load-tracker>\n\n<ion-content>\n\n  <button ion-button block color="teal" (click)="showTaC = !showTaC">\n    <ion-icon name="logo-arrow-forward"></ion-icon>\n    免責聲明\n  </button> \n\n  <div *ngIf="showTaC" class="ibc-h-padding-5">\n   <div>\n     你是否願意公開個人聯繫資料，以便教會的兄弟姊妹能夠聯繫到你。該信息不會分享至依斯靈頓教會之外。\n     你可以選擇不公開自己的聯繫方式，但是這樣你也無法看到別人的聯繫方式。\n   </div>\n   <div flexLayout="row" fxLayoutAlign="start center" class="ibc-full-width" flexLayoutGap="5px">\n      <div fxFlex></div>\n      <div>{{userForm?.controls?.shareInfo?.value ? \'資料已公開\': \'資料未公開\'}}</div>\n      <ion-toggle [ngModel]="userForm?.controls?.shareInfo?.value" (ionChange)="confirmShareInfo($event)"></ion-toggle>\n    </div>\n  </div>  \n\n  <button ion-button block color="teal" (click)="showAuthInfo = !showAuthInfo">\n    <ion-icon name="logo-arrow-forward"></ion-icon>\n    修改個人密碼\n  </button>\n   \n  <form [formGroup]="authForm" *ngIf="authForm" [@showAnimation]="showAuthInfo?\'visible\':\'invisible\'">\n\n        <p *ngIf="!content.myselfContact.visited" style="color: red" text-center>首次登入必須修改密碼, 然後點擊【保存】</p>\n\n        <ion-item>\n            <ion-label floating>用戶名</ion-label>\n            <ion-input type="text" [formControl]="authForm.controls.username"></ion-input>\n        </ion-item>\n        <ion-note style="color: red" ion-item text-right *ngIf="submittingAuthForm && authForm.controls.username.errors?.required">用戶名不能為空</ion-note>        \n\n        <ion-item>\n            <ion-label floating>輸入舊密碼</ion-label>\n            <ion-input type="password" [formControl]="authForm.controls.oldpassword"></ion-input>\n        </ion-item>\n        <ion-note style="color: red" ion-item text-right *ngIf="submittingAuthForm && authForm.controls.oldpassword.errors?.required">舊密碼不能為空</ion-note>        \n\n        <ion-item>\n            <ion-label floating>輸入新密碼</ion-label>\n            <ion-input type="password" [formControl]="authForm.controls.password1"></ion-input>\n        </ion-item>\n        <ion-note style="color: red" ion-item text-right *ngIf="submittingAuthForm && authForm.controls.password1.errors?.required">新密碼不能為空</ion-note>\n\n        <ion-item>\n            <ion-label floating>再次輸入新密碼</ion-label>\n            <ion-input type="password" [formControl]="authForm.controls.password2"></ion-input>\n        </ion-item>\n        <ion-note style="color: red" ion-item text-right *ngIf="submittingAuthForm && authForm.controls.password2.errors?.required">重復新密碼不能為空</ion-note>\n        <ion-note style="color: red" ion-item text-right *ngIf="submittingAuthForm && authForm.controls.password2.errors?.MatchPassword">兩次輸入的密碼不符</ion-note>\n\n  </form>\n\n  <button ion-button block color="teal" (click)="showPersonalInfo = !showPersonalInfo">\n    <ion-icon name="logo-arrow-forward"></ion-icon>\n    更改個人資料\n  </button>\n   \n   <form [formGroup]="userForm" *ngIf="userForm" [@showAnimation]="showPersonalInfo?\'visible\':\'invisible\'">\n\n        <button ion-item (click)="selectAvatar()">\n            <img class="img-avatar" [src]="userForm.controls.photoURL.value" item-left>\n            <ion-note>編輯頭像</ion-note>\n        </button>\n\n        <ion-item>\n            <ion-label floating>英文名</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.name"></ion-input>\n        </ion-item>\n\n        <ion-item>\n            <ion-label floating>中文名</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.chinese_name"></ion-input>\n        </ion-item>\n\n        <ion-item>\n            <ion-label floating>電子郵件</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.email"></ion-input>\n        </ion-item>   \n\n        <ion-item *ngIf="ibcFB.providerData.length > 0">\n            <ion-label floating>Gmail登錄郵件</ion-label>\n            <ion-input type="text" disabled [value]="ibcFB.providerData[0]?.email"></ion-input>\n        </ion-item>    \n\n        <ion-item>\n            <ion-label floating>電話</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.mobile"></ion-input>\n        </ion-item>            \n\n        <ion-item *ngIf="ibcFB.wechatAuthInfo.openid">\n            <ion-label floating>微信</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.wechat"></ion-input>\n        </ion-item>\n\n        <ion-item>\n            <ion-label floating>地址</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.address1"></ion-input>\n        </ion-item>\n\n        <ion-item>\n            <ion-label floating>&nbsp;&nbsp;&nbsp;&nbsp;</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.address2"></ion-input>\n        </ion-item>\n\n        <ion-item>\n            <ion-label floating>省份</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.state"></ion-input>\n        </ion-item>\n\n        <ion-item>\n            <ion-label floating>郵政編碼</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.postcode"></ion-input>\n        </ion-item>\n\n        <ion-item>\n            <ion-label floating>國家</ion-label>\n            <ion-input type="text" [formControl]="userForm.controls.country"></ion-input>\n        </ion-item>        \n\n        <ion-item>\n          <ion-label>出生日期</ion-label>\n          <ion-datetime displayFormat="MM月DD日" (ionCancel)="clearFormControl(userForm.controls.dob)" [formControl]="userForm.controls.dob"></ion-datetime>\n        </ion-item>       \n\n    </form>\n\n  <button ion-button block color="teal" (click)="showMinistrySkills = !showMinistrySkills">\n    <ion-icon name="logo-arrow-forward"></ion-icon>\n    我要參加事奉\n  </button>\n\n  <form *ngIf="userForm" [@showAnimation]="showMinistrySkills?\'visible\':\'invisible\'">\n    <p style="padding-left: 1rem">請選擇你願意參加下面那種事奉，然後保存</p>\n    <ion-item *ngFor="let skill of allSkills">\n      <ion-label>{{skill.caption}}</ion-label>\n      <ion-checkbox color="dark" [(ngModel)]="skills[skill.key]" (click)="userForm.markAsDirty()" [ngModelOptions]="{standalone: true}" [name]="skill"></ion-checkbox>\n    </ion-item>\n  </form>\n\n  <button ion-button block color="danger" [disabled]="ibcFB.providerData.length > 0" (click)="ibcFB.linkGoogle()">\n    <ion-icon name="logo-arrow-forward"></ion-icon>\n    關聯到Google帳號 {{ibcFB.providerData.length > 0 ? \'(已關聯)\' : \'\'}}\n  </button>\n\n  <button *ngIf="content.allowWechat" ion-button block color="green" [disabled]="ibcFB.wechatAuthInfo.openid" (click)="ibcFB.linkWechat()">\n    <ion-icon name="logo-arrow-forward"></ion-icon>\n    關聯到微信帳號 {{ibcFB.wechatAuthInfo.openid ? \'(已關聯)\' : \'\'}}\n  </button>\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/user-profile/user-profile.html"*/,
            animations: [
                Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_25" /* trigger */])('showAnimation', [
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_22" /* state */])('invisible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_23" /* style */])({
                        opacity: 0,
                        visibility: 'hidden',
                        height: '0px',
                        overflow: 'hidden'
                    })),
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_22" /* state */])('visible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_23" /* style */])({
                        opacity: 1,
                        visibility: 'visible',
                        height: 'auto',
                        overflow: 'hidden'
                    })),
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_24" /* transition */])('invisible => visible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_14" /* animate */])('300ms ease-in')),
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_24" /* transition */])('visible => invisible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_14" /* animate */])('300ms ease-out'))
                ])
            ]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_4__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_photo_photo__["a" /* PhotoProvider */],
            __WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */],
            __WEBPACK_IMPORTED_MODULE_6__providers_data_adaptor_data_adaptor__["a" /* DataProvider */],
            __WEBPACK_IMPORTED_MODULE_8__providers_file_cache_file_cache__["a" /* FileCacheProvider */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["g" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_7__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_9__providers_ministry_ministry__["a" /* MinistryProvider */]])
    ], UserProfilePage);
    return UserProfilePage;
}());

var ModalSelectAvatar = (function () {
    function ModalSelectAvatar(viewCtrl, ibcFB, content, toastCtr, photoSvc, params) {
        this.viewCtrl = viewCtrl;
        this.ibcFB = ibcFB;
        this.content = content;
        this.toastCtr = toastCtr;
        this.photoSvc = photoSvc;
        this.form = params.get('form');
    }
    ModalSelectAvatar.prototype.showSuccessToast = function () {
        var toast = this.toastCtr.create({
            message: 'Avatar已成功保存',
            duration: 3000,
            position: 'top',
            cssClass: 'toast-success'
        });
        toast.present();
        this.dismiss();
    };
    ModalSelectAvatar.prototype.showFailureToast = function () {
        var toast = this.toastCtr.create({
            message: '資料保存出錯',
            duration: 3000,
            position: 'top',
            cssClass: 'toast-danger'
        });
        toast.present();
    };
    ModalSelectAvatar.prototype.selectAvatar = function (url) {
        var _this = this;
        this.form.controls.photoURL.setValue(url);
        this.content.myselfContactDB.update({ photoURL: url }).then(function () {
            _this.showSuccessToast();
        }).catch(function (err) {
            _this.showFailureToast();
        });
    };
    ModalSelectAvatar.prototype.selectFromAlbum = function () {
        var _this = this;
        this.photoSvc.captureAndCrop({
            cameraDirection: 1,
            targetWidth: 200,
            targetHeight: 200
        }, {
            croppedWidth: 200,
            croppedHeight: 200,
            preserveSize: true,
            keepAspect: true
        }, function (data) {
            console.log('===> image data ready!');
            _this.loadingAvatar = true;
            _this.ibcFB.uploadFile(data, { path: "/avatar/" + _this.content.myselfContact.id, encoding: "base64", fileType: "image/png" }, function (url) {
                if (url) {
                    _this.form.controls.photoURL.setValue(url);
                    _this.content.myselfContactDB.update({ photoURL: url }).then(function () {
                        _this.showSuccessToast();
                    }).catch(function (err) {
                        _this.showFailureToast();
                    });
                }
                _this.loadingAvatar = false;
            }, function (err) {
                _this.loadingAvatar = false;
            });
        });
    };
    ModalSelectAvatar.prototype.dismiss = function () {
        this.viewCtrl.dismiss();
    };
    ModalSelectAvatar = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            template: "\n<ion-header>\n\n  <ion-navbar>\n    <ion-buttons start>\n      <button ion-button (click)=\"dismiss()\">Close</button>\n    </ion-buttons>\n    <ion-title>Modals</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n\n    <button ion-item (click)=\"selectAvatar(ibcFB.wechatAuthInfo.headimgurl)\">\n        <img class=\"img-avatar\" [src]=\"ibcFB.wechatAuthInfo.headimgurl\" item-left>\n        <ion-note>\u9078\u64C7\u5FAE\u4FE1\u982D\u50CF</ion-note>\n    </button>\n\n    <button ion-item (click)=\"selectAvatar(ibcFB.providerData[0]?.photoURL)\">\n        <img class=\"img-avatar\" [src]=\"ibcFB.providerData[0]?.photoURL\" item-left>\n        <ion-note>\u9078\u64C7Gmail\u982D\u50CF</ion-note>\n    </button> \n\n    <button ion-item (click)=\"selectFromAlbum()\">\n        <img *ngIf=\"!loadingAvatar\" class=\"img-avatar\" [src]=\"form.controls.photoURL.value\" item-left>\n        <ion-spinner *ngIf=\"loadingAvatar\" class=\"page-spinner\"></ion-spinner>\n        <ion-note>\u5F9E\u76F8\u7C3F\u91CC\u9078\u64C7\u7167\u7247</ion-note>\n    </button>\n\n</ion-content>\n    "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_data_adaptor_data_adaptor__["a" /* DataProvider */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_photo_photo__["a" /* PhotoProvider */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["j" /* NavParams */]])
    ], ModalSelectAvatar);
    return ModalSelectAvatar;
}());

//# sourceMappingURL=user-profile.js.map

/***/ }),

/***/ 118:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PhotoProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_photo_edit_photo_edit__ = __webpack_require__(189);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__ = __webpack_require__(33);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__ = __webpack_require__(662);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_crop__ = __webpack_require__(663);
/* unused harmony namespace reexport */
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







// @Component({
//   template: `
//     <ion-list>
//       <button ion-item (click)="editUserProfile();close()">編輯 Edit</button>
//       <button ion-item (click)="navParams.data.logout(); close()">登出 Sign Out</button>
//     </ion-list>
//   `
// })
// class ImageSelectionPopOver implements OnInit {
//   constructor(public app: App, public viewCtrl: ViewController, public navParams: NavParams, public navCtrl: NavController) {}
//   ngOnInit(): void {
//     console.log(this.navParams);
//   }
//   close() {
//     this.viewCtrl.dismiss();
//   }
// }
/*
  Generated class for the PhotoProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular DI.
*/
var PhotoProvider = (function () {
    function PhotoProvider(app, camera, crop, platform, modalCtrl) {
        this.app = app;
        this.camera = camera;
        this.crop = crop;
        this.platform = platform;
        this.modalCtrl = modalCtrl;
    }
    Object.defineProperty(PhotoProvider.prototype, "navCtrl", {
        get: function () {
            return this.app.getRootNav();
        },
        enumerable: true,
        configurable: true
    });
    // takePicture(): void {
    //     this.ibcFB.takePicture()
    //         .then(imageContent => {
    //             console.log("=== base64 string ===");
    //             console.log(imageContent);
    //             this.ibcFB.uploadFile(imageContent, "/random_images/test1_pic.png", "base64", "image/png");
    //         });
    //     // this.ibcFB.uploadFile("aaabbbccc", "test.txt", "");
    // }
    // shotAndCrop(): void {
    //     this.ibcFB.shotAndCrop()
    //         .then(imageContent => {
    //         }, err => {
    //             console.log("Error cropping");
    //             console.log(err);
    //         });
    // }
    PhotoProvider.prototype.captureAndCrop = function (options, croppingOptions, successHandler, failureHandler) {
        var _this = this;
        if (croppingOptions === void 0) { croppingOptions = {}; }
        var cameraOptions = {
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            destinationType: this.camera.DestinationType.DATA_URL,
            // quality: 100,
            targetWidth: 1024,
            targetHeight: 768,
            // targetWidth: 800,
            // targetHeight: 400,
            encodingType: this.camera.EncodingType.PNG,
            correctOrientation: true
        };
        if (options) {
            cameraOptions = Object.assign({}, cameraOptions, options);
        }
        if (typeof failureHandler != 'function') {
            failureHandler = function (err) {
                console.error(err);
            };
        }
        if (this.platform.is('android')) {
            cameraOptions.allowEdit = true;
        }
        this.camera.getPicture(cameraOptions)
            .then(function (data) {
            if (_this.platform.is('android')) {
                successHandler(data);
            }
            else {
                _this.imgData = "data:image/png;base64," + data;
                // console.log(this.imgData);
                // this.navCtrl.push(PhotoEditComponent, { imgData: this.imgData, croppingOptions, successHandler, failureHandler });
                var selectCtrl = _this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_2__components_photo_edit_photo_edit__["a" /* PhotoEditComponent */], { imgData: _this.imgData, croppingOptions: croppingOptions, successHandler: successHandler, failureHandler: failureHandler });
                selectCtrl.present();
            }
        }, failureHandler);
    };
    PhotoProvider.prototype.selectFromAlbumAndCrop = function () {
        var _this = this;
        return this.camera.getPicture({
            allowEdit: true,
            sourceType: this.camera.PictureSourceType.SAVEDPHOTOALBUM,
            mediaType: this.camera.MediaType.ALLMEDIA,
            destinationType: this.camera.DestinationType.FILE_URI,
            targetWidth: 1024,
            targetHeight: 768,
            encodingType: this.camera.EncodingType.JPEG,
            correctOrientation: true
        })
            .then(function (fileUri) {
            // Crop Image, on android this returns something like, '/storage/emulated/0/Android/...'
            // Only giving an android example as ionic-native camera has built in cropping ability
            if (_this.platform.is('ios')) {
                return fileUri;
            }
            else if (_this.platform.is('android')) {
                // Modify fileUri format, may not always be necessary
                fileUri = 'file://' + fileUri;
                /* Using cordova-plugin-crop starts here */
                return _this.crop.crop(fileUri, { quality: 100 });
            }
        })
            .then(function (path) {
            // path looks like 'file:///storage/emulated/0/Android/data/com.foo.bar/cache/1477008080626-cropped.jpg?1477008106566'
            console.log('Cropped Image Path!: ' + path);
            return path;
        });
    };
    PhotoProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* App */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_crop__["a" /* Crop */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */]])
    ], PhotoProvider);
    return PhotoProvider;
}());

//# sourceMappingURL=photo.js.map

/***/ }),

/***/ 119:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PopupComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the PopupComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var PopupComponent = (function () {
    function PopupComponent(modalCtrl, navParams) {
        var _this = this;
        this.modalCtrl = modalCtrl;
        this.navParams = navParams;
        this.definitions = [];
        this.data = {};
        this.keys = [];
        this.pageTitle = navParams.get('title');
        /* Initialization */
        this.definitions = navParams.get('definitions');
        this.index = navParams.get('index');
        this.itemToEdit = navParams.get('item');
        if (this.itemToEdit) {
            this.data = this.itemToEdit;
            console.log('=== itemToEdit ===');
            console.log(this.data);
        }
        else {
            this.data = {};
            this.definitions.forEach(function (d) {
                /* Firebase does not allow you to save a value of undefiend to key */
                _this.data[d.key] = d.default === undefined ? null : d.default;
            });
        }
    }
    // hasKey(k: string): boolean {
    //     return this.definition[k] !== undefined;
    // }
    PopupComponent.prototype.cancel = function () {
        var cancelFunc = this.navParams.get('cancel');
        if (typeof cancelFunc == 'function') {
            cancelFunc();
        }
    };
    PopupComponent.prototype.isHidden = function (d) {
        if (typeof d.hidden == 'function') {
            return d.hidden(this.data);
        }
        else {
            return d.hidden;
        }
    };
    PopupComponent.prototype.getCaption = function (lookupCaption, option) {
        if (typeof lookupCaption == 'function') {
            return lookupCaption(option);
        }
        else {
            return option && option[lookupCaption];
        }
    };
    PopupComponent.prototype.save = function () {
        var _this = this;
        var saveFunc = this.navParams.get('save');
        if (typeof saveFunc == 'function') {
            this.definitions.forEach(function (d) {
                if (d.type == 'boolean') {
                    /* Make sure False is set if the checkbox is empty */
                    _this.data[d.key] = _this.data[d.key] || false;
                }
            });
            saveFunc(this.data);
        }
    };
    PopupComponent.prototype.fillterLookupSource = function (ev) {
        var filterText = ("" + (ev.target.value || '')).toLowerCase();
        // this.groupValues.forEach(gv => {
        //   this.mappedItemsFunc(gv);
        // });
    };
    PopupComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'popup',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/popup/popup.html"*/'<!-- <ion-content class="outer-content"> -->\n<ion-header>\n</ion-header>\n\n<ion-content>\n\n    <ion-title style="text-align: center; margin-top: 3rem">{{itemToEdit?"編輯":"添加"}} {{pageTitle}}</ion-title>\n\n    <ion-list *ngIf="data">\n\n      <ng-container *ngFor="let d of definitions">\n        <ion-item [ngSwitch]="d.type" *ngIf="!isHidden(d)">\n          <ion-label stacked>{{d.caption || d.key}}</ion-label>\n          <ion-input [disabled]="itemToEdit && d.disabled" *ngSwitchCase="\'number\'" type="number" [(ngModel)]="data[d.key]"></ion-input>\n          <ion-textarea [disabled]="itemToEdit && d.disabled" *ngSwitchCase="\'textarea\'" [(ngModel)]="data[d.key]"></ion-textarea>\n          <ion-checkbox [disabled]="itemToEdit && d.disabled" *ngSwitchCase="\'boolean\'" [(ngModel)]="data[d.key]"></ion-checkbox>\n          <ion-datetime [disabled]="itemToEdit && d.disabled" *ngSwitchCase="\'date\'" displayFormat="YYYY-MM-DD" [(ngModel)]="data[d.key]"></ion-datetime>\n        \n          <ion-select [disabled]="itemToEdit && d.disabled" *ngSwitchCase="\'dropdown\'" [(ngModel)]="data[d.key]">\n            <ion-option [value]="o[d.lookupValue]" *ngFor="let o of d.lookupSource | async">{{getCaption(d.lookupCaption,o)}}</ion-option>\n          </ion-select>\n        \n          <ion-select [disabled]="itemToEdit && d.disabled" *ngSwitchCase="\'multi-dropdown\'" [(ngModel)]="data[d.key]" multiple="true">\n            <ion-option [value]="o[d.lookupValue]" *ngFor="let o of d.lookupSource | async">{{getCaption(d.lookupCaption,o)}}</ion-option>\n          </ion-select>          \n        \n          <ion-input [disabled]="itemToEdit && d.disabled" *ngSwitchDefault [(ngModel)]="data[d.key]"></ion-input>\n        </ion-item>\n      </ng-container>\n\n      <ion-item *ngIf="itemToEdit">\n        <ion-label stacked>Item Index</ion-label>\n        <ion-input disabled [(ngModel)]="index"></ion-input>\n      </ion-item>\n      <ion-item *ngIf="itemToEdit">\n        <ion-label stacked>Item Id</ion-label>\n        <ion-input disabled [(ngModel)]="itemToEdit.id"></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <button ion-button full color="teal" (click)="save()">保存</button>\n    <button ion-button full color="light" (click)="cancel()">取消</button>\n\n</ion-content>'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/popup/popup.html"*/,
            host: {
                class: 'bg-color-white'
            }
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */]])
    ], PopupComponent);
    return PopupComponent;
}());

//# sourceMappingURL=popup.js.map

/***/ }),

/***/ 121:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ListPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_browser_browser__ = __webpack_require__(116);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_popup_popup__ = __webpack_require__(119);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_s2t_s2t__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_rxjs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/// Providers and Services



var ListPage = (function () {
    function ListPage(content, commonSvc, modalCtrl, viewCtrl, navCtrl, navParams, s2t, browser) {
        var _this = this;
        this.content = content;
        this.commonSvc = commonSvc;
        this.modalCtrl = modalCtrl;
        this.viewCtrl = viewCtrl;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.s2t = s2t;
        this.browser = browser;
        this.items$ = __WEBPACK_IMPORTED_MODULE_6_rxjs__["Observable"].of([]);
        this.items = [];
        this.groupValues = [];
        this.questionParams = {};
        this.auxiliaryItems = [];
        this.visibility = [];
        this.mappedItems = [];
        this.selectedObj = {};
        // If we navigated to this page, we will have an item available as a nav param
        var type = navParams.get('type');
        if (type) {
            var params = this.params = typeof type == 'string' ? this.content[type] : typeof type == 'function' ? type() : type;
            if (params) {
                this.itemsDB = params['itemsDB'];
                this.items$ = params['items$'];
                this.groupBy = params['groupBy'];
                this.checkNew = params['checkNew'];
                this.hideEdit = params['hideEdit'];
                this.hideDelete = params['hideDelete'];
                this.showReadOrUnread = params['showReadOrUnread'];
                this.listHasKeys = params['listHasKeys'];
                this.fullPermission = params['fullPermission'];
                this.postAddCallback = params['postAddCallback'];
                this.preAddCallback = params['preAddCallback'];
                this.postDeleteCallback = params['postDeleteCallback'];
                this.additionalSlideButton = params['additionalSlideButton'];
                this.defaultAvatarImg = params['defaultAvatarImg'];
                this.defaultThumbnailImg = params['defaultThumbnailImg'];
                this.preselectedItemKeys = params['preselectedItemKeys'];
                this.selectFunc = params['selectFunc'];
                this.forSelection = params['forSelection'];
                this.addItemUseComponent = params['addItemUseComponent'];
                this.addItemFuncFactory = params['addItemFuncFactory'];
                this.itemTappedPreFunc = params['itemTappedPreFunc'];
                this.noSlideOptions = params['noSlideOptions'];
            }
        }
        if (this.preselectedItemKeys) {
            this.preselectedItemKeys.forEach(function (k) {
                _this.selectedObj[k] = true;
            });
        }
        if (this.additionalSlideButton && this.additionalSlideButton.getAuxiliaryDB) {
            this.additionalSlideButton.getAuxiliaryDB().on('value', function (snapshot) {
                _this.auxiliaryItems = snapshot.val();
            });
        }
        var titleAs = this.params.titleAs;
        if (typeof titleAs == 'string') {
            this.titleAs = function (item) { return titleAs; };
        }
        else if (typeof titleAs == 'function') {
            this.titleAs = titleAs;
        }
        else {
            this.titleAs = function () { return null; };
        }
        var subtitleAs = this.params.subtitleAs;
        if (typeof subtitleAs == 'string') {
            this.subtitleAs = function (item) { return subtitleAs; };
        }
        else if (typeof subtitleAs == 'function') {
            this.subtitleAs = subtitleAs;
        }
        else {
            this.subtitleAs = null;
        }
        if (this.items$) {
            this.subscription = this.items$.subscribe(function (items) {
                _this.items = items;
                if (_this.groupBy) {
                    /* This trick is aiming at resolving the conflicts between number and string type during uniquification */
                    /* e.g. we may have this.groupValues = [1,2,3,4,"4"] if we don't convert the number to string */
                    _this.items.forEach(function (item) {
                        if (typeof item[_this.groupBy] == 'number') {
                            item[_this.groupBy] = "" + item[_this.groupBy];
                        }
                    });
                    _this.groupValues = _this.items.map(function (item) { return item[_this.groupBy]; }).filter(_this.commonSvc.arrayUniq).sort(_this.groupOrderByFunc);
                }
                else {
                    _this.groupValues = [null];
                }
                _this.groupValues.forEach(function (gv) {
                    _this.visibility[gv] = [];
                    _this.mappedItems[gv] = _this.mappedItemsFunc(gv);
                });
                var value = _this.searchBar.value;
                _this.getItems({ target: { value: value } });
            }, function (err) { });
        }
        this.title = this.params.title;
        this.templateForAdd = this.params.templateForAdd;
        this.filterFunc = this.params.filterFunc;
        if (!this.filterFunc) {
            this.filterFunc = function (val, item) {
                return (item.title + " " + item.subtitle).toLowerCase().indexOf(_this.s2t.tranStr(val, true)) > -1;
            };
        }
        this.mapFunc = this.params.mapFunc;
        if (!this.mapFunc) {
            this.mapFunc = function (item) { return item; };
        }
        this.reverseMapFunc = this.params.reverseMapFunc;
        if (!this.reverseMapFunc) {
            this.reverseMapFunc = function (item) { return item; };
        }
        this.callFunc = this.params.callFunc;
        if (!this.callFunc) {
            this.callFunc = function () { return console.log('=== default callFunc ==='); };
        }
        this.groupOrderByFunc = this.params.groupOrderByFunc;
        if (!this.groupOrderByFunc) {
            this.groupOrderByFunc = function (a, b) { return a < b ? -1 : 1; };
        }
        this.orderByFunc = this.params.orderByFunc;
        if (!this.orderByFunc) {
            this.orderByFunc = function (a, b) { return a < b ? -1 : 1; };
        }
    }
    ListPage.prototype.ngOnDestroy = function () {
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
    };
    ListPage.prototype.groupByCaptionFunc = function (val, key) {
        var _this = this;
        if (!this.templateForAdd)
            return null;
        var defOfGroupByItem = this.templateForAdd.filter(function (item) { return item.key == _this.groupBy; })[0];
        if (defOfGroupByItem && defOfGroupByItem.groupByFunc) {
            return defOfGroupByItem.groupByFunc(val, key);
        }
        else {
            return "" + (key + ' ' + val);
        }
    };
    ListPage.prototype.getItemIndex = function (mappedItem) {
        var k = this.listHasKeys ? 'key' : 'id';
        return this.items.map(function (item) { return item[k]; }).indexOf(mappedItem[k]);
    };
    ListPage.prototype.mappedItemsFunc = function (groupVal) {
        var _this = this;
        return this.items.filter(function (item) { return item[_this.groupBy] == groupVal; }).sort(this.orderByFunc).map(function (item, i) {
            _this.visibility[groupVal][i] = (!_this.filterText || _this.filterFunc(_this.filterText, item)) ? true : false;
            return item;
        }).map(this.mapFunc);
    };
    ListPage.prototype.groupEmpty = function (groupVal) {
        return !this.groupBy || !this.visibility[groupVal].reduce(function (prev, curr) { return prev || curr; }, false);
    };
    ListPage.prototype.getItems = function (ev) {
        var _this = this;
        this.filterText = ("" + (ev.target.value || '')).toLowerCase();
        this.groupValues.forEach(function (gv) {
            _this.mappedItemsFunc(gv);
        });
    };
    ListPage.prototype.deleteItem = function (i) {
        var _this = this;
        this.commonSvc.confirmDialog(null, '你确定要删除吗?', function () {
            if (_this.listHasKeys) {
                var key_1 = _this.items[i].key || i;
                // console.log(`key = ${key}`);
                if (key_1) {
                    _this.itemsDB.child("" + key_1).remove().then(function () {
                        if (_this.postDeleteCallback) {
                            _this.postDeleteCallback(_this.items[i], key_1).then(function () {
                                _this.commonSvc.toastSuccess('删除成功');
                            });
                        }
                        else {
                            _this.commonSvc.toastSuccess('删除成功');
                        }
                    }).catch(function (err) {
                        _this.commonSvc.toastFailure('删除失败', err);
                    });
                }
            }
            else {
                var item_1 = _this.items.splice(i, 1)[0];
                var itemsToSave = _this.items.map(function (item) { return _this.reverseMapFunc(item); });
                _this.itemsDB.set(itemsToSave).then(function () {
                    if (_this.postDeleteCallback) {
                        _this.postDeleteCallback(item_1, i).then(function () {
                            _this.commonSvc.toastSuccess('删除成功');
                        });
                    }
                    else {
                        _this.commonSvc.toastSuccess('删除成功');
                    }
                }).catch(function (err) {
                    _this.commonSvc.toastFailure('删除失败', err);
                    _this.items.splice(i, 0, item_1);
                });
            }
        });
    };
    ListPage.prototype.defaultSelectFunc = function () {
        this.viewCtrl.dismiss(this.selectedItems());
    };
    ListPage.prototype.addItemPopup = function () {
        var _this = this;
        if (this.addItemFuncFactory && this.addItemUseComponent) {
            this.addItemFuncFactory(this.modalCtrl, this.addItemUseComponent)();
        }
        else {
            var popupModal_1 = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__components_popup_popup__["a" /* PopupComponent */], {
                title: this.title,
                definitions: this.templateForAdd || [],
                cancel: function () { return popupModal_1.dismiss(); },
                save: function (data) {
                    if (_this.listHasKeys) {
                        data.key = data.key || _this.commonSvc.makeRandomString(8);
                        data.isNew = true;
                        var exec_1 = function () {
                            _this.itemsDB.child(data.key).set(data).then(function () {
                                if (_this.postAddCallback) {
                                    _this.postAddCallback(data, data.key).then(function () {
                                        _this.commonSvc.toastSuccess('添加成功');
                                    });
                                }
                                else {
                                    _this.commonSvc.toastSuccess('添加成功');
                                }
                                popupModal_1.dismiss();
                            }).catch(function (err) {
                                _this.commonSvc.toastFailure('添加失败', err);
                                _this.items.pop();
                                popupModal_1.dismiss();
                            });
                        };
                        if (_this.preAddCallback) {
                            _this.preAddCallback(data, data.key).then(function () {
                                exec_1();
                            });
                        }
                        else {
                            exec_1();
                        }
                    }
                    else {
                        data.id = data.id || _this.commonSvc.makeRandomString(8);
                        data.isNew = true;
                        _this.items.push(data);
                        var itemsToSave_1 = _this.items.map(function (item) { return _this.reverseMapFunc(item); });
                        var exec_2 = function () {
                            _this.itemsDB.set(itemsToSave_1).then(function () {
                                if (_this.postAddCallback) {
                                    _this.postAddCallback(data, _this.items.length - 1).then(function (result) {
                                        _this.commonSvc.toastSuccess('添加成功');
                                    });
                                }
                                else {
                                    _this.commonSvc.toastSuccess('添加成功');
                                }
                                popupModal_1.dismiss();
                            }).catch(function (err) {
                                _this.commonSvc.toastFailure('添加失败', err);
                                _this.items.pop();
                                popupModal_1.dismiss();
                            });
                        };
                        if (_this.preAddCallback) {
                            _this.preAddCallback(data, data.key).then(function () {
                                exec_2();
                            });
                        }
                        else {
                            exec_2();
                        }
                    }
                }
            });
            popupModal_1.present();
        }
    };
    ListPage.prototype.editItemPopup = function (i) {
        // let itemToEdit = {};
        // this.templateForAdd.forEach(d => {
        //   itemToEdit[d.key] = this.items[i][d.key] || null;
        // });
        var _this = this;
        var popupModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__components_popup_popup__["a" /* PopupComponent */], {
            title: this.title,
            definitions: this.templateForAdd || [],
            item: this.items[i],
            index: this.getItemIndex(this.items[i]),
            cancel: function () { return popupModal.dismiss(); },
            save: function (item) {
                // console.log('--- item ---');
                // console.log(this.reverseMapFunc(item));
                // console.log(`--- number i = ${i} ---`);
                var k = _this.listHasKeys && _this.items[i].key || i;
                var exec = function () {
                    _this.itemsDB.child("" + k).update(_this.reverseMapFunc(item)).then(function () {
                        _this.commonSvc.toastSuccess('编辑成功');
                        popupModal.dismiss();
                    }, function (err) {
                        _this.commonSvc.toastFailure('编辑失败', err);
                        _this.items.pop();
                        popupModal.dismiss();
                    });
                };
                if (_this.preAddCallback) {
                    _this.preAddCallback(item, k).then(function () {
                        exec();
                    });
                }
                else {
                    exec();
                }
            }
        });
        popupModal.present();
    };
    ListPage.prototype.itemTapped = function (event, item) {
        var _this = this;
        var i = this.getItemIndex(item);
        if (this.itemTappedPreFunc) {
            this.itemTappedPreFunc(item, i);
        }
        var k = this.listHasKeys ? item.key : i;
        if (this.fullPermission) {
            this.itemsDB.child(k + "/isNew").set(false);
        }
        if (item.hyperlink) {
            this.browser.openPage(item.hyperlink);
        }
        else if (item.redirect) {
            var index = this.items.map(function (item) { return item.id; }).indexOf(item.id);
            if (typeof item.params == 'string') {
                try {
                    item.params = JSON.parse(item.params);
                }
                catch (e) { }
            }
            this.navCtrl.push(item.redirect, Object.assign({
                item$: this.items$.map(function (res) { return res.filter(function (resItem) { return _this.listHasKeys ? (resItem.key == item.key) : (resItem.id == item.id); })[0]; }),
                itemDB: this.itemsDB.child("" + index),
                itemKey: item.key,
                itemId: item.id,
                itemIndex: i
            }, item.params || {}));
        }
        else if (this.callFunc) {
            this.callFunc(item);
        }
        // That's right, we're pushing to ourselves!
        // this.navCtrl.push(ListPage, {
        //   item: item
        // }); 
    };
    ListPage.prototype.markAsRead = function (i, read) {
        if (read === void 0) { read = true; }
        var k = this.listHasKeys ? this.items[i].key : i;
        this.itemsDB.child(k + "/read").set(read);
    };
    ListPage.prototype.selectionFillAll = function () {
        var _this = this;
        this.items.forEach(function (item) {
            var mappedItem = _this.mapFunc(item);
            if (mappedItem.key) {
                _this.selectedObj[mappedItem.key] = true;
            }
        });
    };
    ListPage.prototype.selectionEmptyAll = function () {
        var _this = this;
        this.items.forEach(function (item, index) {
            var mappedItem = _this.mapFunc(item, index);
            if (mappedItem.key) {
                _this.selectedObj[mappedItem.key] = false;
            }
        });
    };
    ListPage.prototype.selectedItems = function () {
        var _this = this;
        return this.items.filter(function (item) { return _this.selectedObj[_this.mapFunc(item).key]; });
    };
    ListPage.prototype.cancelSelection = function () {
        this.viewCtrl.dismiss();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])('searchBar'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* Searchbar */])
    ], ListPage.prototype, "searchBar", void 0);
    ListPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-list',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/list/list.html"*/'<ion-header>\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>{{title}}</ion-title>\n\n    <ion-buttons end>\n      <button [hidden]="!fullPermission && commonSvc.readonly || forSelection" ion-button class="bar-button-menutoggle-ios" (click)="addItemPopup()" >\n        <ion-icon name="add"></ion-icon>\n      </button>   \n\n      <button color="primary" [hidden]="!fullPermission && commonSvc.readonly || !forSelection" ion-button class="bar-button-menutoggle-ios" (click)="cancelSelection()">\n        Cancel\n      </button>      \n      <button color="primary" [hidden]="!fullPermission && commonSvc.readonly || !forSelection" ion-button class="bar-button-menutoggle-ios" (click)="selectFunc ? selectFunc(selectedItems()) : defaultSelectFunc()">\n        Done\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<load-tracker></load-tracker>\n\n<ion-content no-bounce>\n  <ion-list>\n    <div fxLayout="row" fxLayoutAlign="start center">\n      <button [hidden]="!fullPermission && commonSvc.readonly || !forSelection" ion-button clear small (click)="selectionEmptyAll()">\n        清空\n      </button>\n      <ion-searchbar #searchBar (ionInput)="getItems($event)"></ion-searchbar>\n      <button [hidden]="!fullPermission && commonSvc.readonly || !forSelection" ion-button clear small (click)="selectionFillAll()">\n        全選\n      </button>\n    </div>\n\n    <div *ngFor="let groupVal of groupValues">\n      <h3 text-center [hidden]="groupEmpty(groupVal)">{{groupByCaptionFunc(groupVal, groupBy)}}</h3>\n      <ng-container *ngIf="!forSelection">\n        <ion-item-sliding *ngFor="let item of mappedItems[groupVal]; let i = index" [style.opacity]="item.read ? 0.3: 1">\n          <button ion-item [question]="item.popUpQuestion" (answer)="itemTapped($event, item)" [hidden]="!visibility[groupVal][i]">\n            <ion-avatar item-start *ngIf="item.avatar || defaultAvatarImg">\n              <img [src]="item.avatar || defaultAvatarImg">\n            </ion-avatar>\n            <ion-badge *ngIf="checkNew && item.isNew" color="danger" class="ibc-badge">New!</ion-badge>\n            <ion-thumbnail item-start *ngIf="item.thumbnail || defaultThumbnailImg" fxLayout="column" fxLayoutAlign="center center">\n              <img class="ratio-4-3" style="height: auto" [src]="item.thumbnail || defaultThumbnailImg">\n            </ion-thumbnail>\n            <ion-icon *ngIf="!item.thumbnail && !item.avatar && !defaultAvatarImg && !defaultThumbnailImg" name="share-alt" item-left></ion-icon>\n            <div class="ibc-full-height ibc-full-width">\n              <div class="ibc-bottom-margin-5 ibc-allow-wrap">{{item.title || titleAs(item, auxiliaryItems)}}</div>\n              <ion-note wrap style="color: #808080; font-size: 1.5rem" *ngIf="item.subtitle || subtitleAs">{{item.subtitle || subtitleAs(item, auxiliaryItems)}}</ion-note>\n            </div>\n          </button>\n          <ion-item-options side="right" *ngIf="!noSlideOptions">\n            <a ion-button color="teal-1" *ngIf="showReadOrUnread" (click)="markAsRead(getItemIndex(item), !item.read)">\n              {{item.read ? \'未讀\' : \'已讀\'}}\n            </a>\n            <a ion-button [color]="additionalSlideButton.getColor(item, auxiliaryItems)" *ngIf="additionalSlideButton" (click)="additionalSlideButton.click(item, auxiliaryItems)">\n              {{additionalSlideButton.getTitle(item, auxiliaryItems)}}\n            </a>\n            <a ion-button [hidden]="hideEdit" *ngIf="fullPermission || !commonSvc.readonly" (click)="editItemPopup(getItemIndex(item))">\n              編輯\n            </a>         \n            <a ion-button [hidden]="hideDelete" *ngIf="fullPermission || !commonSvc.readonly" color="danger" (click)="deleteItem(getItemIndex(item))">\n              删除\n            </a>\n          </ion-item-options>\n        </ion-item-sliding>          \n      </ng-container>\n\n      <ng-container *ngIf="forSelection">\n        <ion-item *ngFor="let item of mappedItems[groupVal]; let i = index" [hidden]="!visibility[groupVal][i]">\n          <ion-checkbox [(ngModel)]="selectedObj[item.key]"></ion-checkbox>\n          <ion-label>{{item.title || titleAs(item, auxiliaryItems)}}</ion-label>\n<!--           <ion-avatar item-start *ngIf="item.avatar || defaultAvatarImg">\n            <img [src]="item.avatar || defaultAvatarImg">\n          </ion-avatar>\n          <ion-badge *ngIf="checkNew && item.isNew" color="danger" class="ibc-badge">New!</ion-badge>\n          <ion-thumbnail item-start *ngIf="item.thumbnail || defaultThumbnailImg" fxLayout="column" fxLayoutAlign="center center">\n            <img class="ratio-4-3" style="height: auto" [src]="item.thumbnail || defaultThumbnailImg">\n          </ion-thumbnail>\n          <ion-icon *ngIf="!item.thumbnail && !item.avatar && !defaultAvatarImg && !defaultThumbnailImg" name="share-alt" item-left></ion-icon>\n          <div class="ibc-full-height ibc-full-width">\n            <div class="ibc-bottom-margin-5">{{item.title || titleAs(item, auxiliaryItems)}}</div>\n            <ion-note wrap small *ngIf="item.subtitle || subtitleAs">{{item.subtitle || subtitleAs(item, auxiliaryItems)}}</ion-note>\n          </div> -->\n        </ion-item>\n      </ng-container>\n    </div>\n\n<!--     <ion-item-sliding *ngFor="let item of mappedItems; let i = index">\n      <button ion-item (click)="itemTapped($event, item)" [hidden]="!visibility[i]">\n        <ion-avatar item-start *ngIf="item.avatar">\n          <img [src]="item.avatar">\n        </ion-avatar>\n        <ion-thumbnail item-start *ngIf="item.thumbnail" fxLayout="column" fxLayoutAlign="center center">\n          <img style="height: auto" [src]="item.thumbnail">\n        </ion-thumbnail>\n        <ion-icon *ngIf="!item.thumbnail && !item.avatar" name="share-alt" item-left></ion-icon>\n        {{item.title}}\n        <ion-note item-right>\n          {{item.subtitle}}\n        </ion-note>\n      </button>\n      <ion-item-options side="right" *ngIf="!commonSvc.readonly">\n        <a ion-button (click)="editItemPopup(i)">\n          編輯\n        </a>         \n        <a ion-button color="danger" (click)="deleteItem(i)">\n          删除\n        </a>       \n      </ion-item-options>      \n    </ion-item-sliding> -->  \n  </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/list/list.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__providers_data_adaptor_data_adaptor__["a" /* DataProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_5__providers_s2t_s2t__["a" /* S2tProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_browser_browser__["a" /* BrowserProvider */]])
    ], ListPage);
    return ListPage;
}());

//# sourceMappingURL=list.js.map

/***/ }),

/***/ 13:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_platform_browser__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__app_env__ = __webpack_require__(41);
/* unused harmony reexport ToastController */
/* unused harmony reexport AlertController */
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









/*
  Generated class for the CommonProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var CommonProvider = (function () {
    function CommonProvider(http, toastCtrl, sanitizer, platform, ibcFB, alertCtrl) {
        var _this = this;
        this.http = http;
        this.toastCtrl = toastCtrl;
        this.sanitizer = sanitizer;
        this.platform = platform;
        this.ibcFB = ibcFB;
        this.alertCtrl = alertCtrl;
        this.text = {};
        this.doNotRemindUpdating = false;
        ibcFB.afDB.database.ref('version').on('value', function (snapshot) {
            _this.newVersion = snapshot.val();
        });
        this.ibcFB.afDB.database.ref('text').on('value', function (snapshot) {
            var text = snapshot.val();
            _this.text = text;
        });
    }
    Object.defineProperty(CommonProvider.prototype, "versionTooOld", {
        get: function () {
            return this.compareVersion(__WEBPACK_IMPORTED_MODULE_6__app_env__["a" /* ENV */].version, this.newVersion);
        },
        enumerable: true,
        configurable: true
    });
    CommonProvider.prototype.compareVersion = function (preVersion, curVersion) {
        if (preVersion && curVersion) {
            var pattern = new RegExp(/^(\d+)\.(\d+)\.(\d+)$/);
            var oldPatternMatches = preVersion.match(pattern);
            var newPatternMatches = curVersion.match(pattern);
            if (oldPatternMatches.length == 4 && newPatternMatches.length == 4) {
                var oldMajor = parseInt(oldPatternMatches[1]);
                var newMajor = parseInt(newPatternMatches[1]);
                var oldMinor = parseInt(oldPatternMatches[2]);
                var newMinor = parseInt(newPatternMatches[2]);
                var oldPatch = parseInt(oldPatternMatches[3]);
                var newPatch = parseInt(newPatternMatches[3]);
                if (oldMajor < newMajor)
                    return true;
                else if (oldMajor > newMajor) {
                    return false;
                }
                else if (oldMinor < newMinor) {
                    return true;
                }
                else if (oldMinor > newMinor) {
                    return false;
                }
                else if (oldPatch < newPatch) {
                    return true;
                }
                else {
                    return false;
                }
            }
            else {
                return false;
            }
        }
    };
    Object.defineProperty(CommonProvider.prototype, "appStoreLink", {
        get: function () {
            if (this.isIos) {
                return "https://itunes.apple.com/us/app/id1338517393?ls=1&mt=8";
            }
            else {
                return "https://play.google.com/store/apps/details?id=com.rjwebsolution.ibcchinese";
            }
        },
        enumerable: true,
        configurable: true
    });
    CommonProvider.prototype.goToStorePage = function () {
        window.open(this.appStoreLink, '_system', 'location=no');
    };
    CommonProvider.prototype.ignoreUpdate = function () {
        this.doNotRemindUpdating = true;
    };
    Object.defineProperty(CommonProvider.prototype, "isWeb", {
        get: function () {
            return this.platform.is('core') || this.platform.is('mobileweb');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CommonProvider.prototype, "isMobile", {
        get: function () {
            return !this.isWeb;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CommonProvider.prototype, "isAndroid", {
        get: function () {
            return this.platform.is('android');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CommonProvider.prototype, "isIos", {
        get: function () {
            return this.platform.is('ios');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CommonProvider.prototype, "readonly", {
        get: function () {
            return this.ibcFB.access_level == null || this.ibcFB.access_level < 2;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CommonProvider.prototype, "isMember", {
        /// Note: It's possible that both isMember and isNotMember being false
        /// because access_level can be null or undefined.
        get: function () {
            return this.isLoggedIn && this.ibcFB.access_level > 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CommonProvider.prototype, "isNotMember", {
        get: function () {
            return this.isLoggedIn && this.ibcFB.access_level === 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CommonProvider.prototype, "isLoggedIn", {
        get: function () {
            return !!this.ibcFB.userProfile;
        },
        enumerable: true,
        configurable: true
    });
    CommonProvider.prototype.differDays = function (timestamp) {
        return __WEBPACK_IMPORTED_MODULE_5_moment__().diff(__WEBPACK_IMPORTED_MODULE_5_moment__(timestamp)) / 86400000;
    };
    CommonProvider.prototype.sanitize = function (url) {
        return this.sanitizer.bypassSecurityTrustResourceUrl(url);
    };
    CommonProvider.prototype.confirmDialog = function (title, message, confirmCallback, cancelCallback, config) {
        var alert = this.alertCtrl.create({
            title: title,
            message: message,
            buttons: [
                {
                    text: config && config.negativeLabel || '否',
                    role: 'cancel',
                    handler: cancelCallback || (function () { })
                },
                {
                    text: config && config.positiveLabel || '是',
                    handler: confirmCallback || (function () { })
                }
            ]
        });
        alert.present();
    };
    CommonProvider.prototype.makeRandomString = function (len) {
        var text = "";
        var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        for (var i = 0; i < len; i++)
            text += possible.charAt(Math.floor(Math.random() * possible.length));
        return text;
    };
    CommonProvider.prototype.toastSuccess = function (msg, duration) {
        if (duration === void 0) { duration = 3000; }
        var toast = this.toastCtrl.create({
            message: msg,
            duration: duration,
            position: 'top',
            cssClass: 'toast-success',
            showCloseButton: true
        });
        toast.present();
    };
    CommonProvider.prototype.toastFailure = function (msg, err, duration) {
        if (duration === void 0) { duration = 3000; }
        var toast = this.toastCtrl.create({
            message: err ? (msg + ': ' + JSON.stringify(err)) : msg,
            duration: duration,
            position: 'top',
            cssClass: 'toast-danger',
            showCloseButton: true
        });
        toast.present();
    };
    CommonProvider.prototype.arrayUniq = function (value, index, self) {
        return self.indexOf(value) === index;
    };
    CommonProvider.prototype.getArrayDiffs = function (oldArray, newArray, key, val, showUpdateDetail) {
        if (!oldArray)
            oldArray = [];
        if (!newArray)
            newArray = [];
        var result = {
            deletedItems: [],
            updatedItems: [],
            newItems: []
        };
        var oldKeys = [];
        var newKeys = [];
        if (!key) {
            oldKeys = oldArray;
            newKeys = newArray;
        }
        else {
            oldKeys = oldArray.map(function (item) { return item[key]; });
            newKeys = newArray.map(function (item) { return item[key]; });
        }
        /* Get unique key values from both oldArray and newArray */
        var allKeys = oldKeys.concat(newKeys).filter(function (val, index, self) { return self.indexOf(val) === index; });
        // console.log(allKeys);
        allKeys.forEach(function (k) {
            if (oldKeys.indexOf(k) > -1 && newKeys.indexOf(k) == -1) {
                result.deletedItems.push(oldArray[oldKeys.indexOf(k)]);
            }
            else if (oldKeys.indexOf(k) > -1 && newKeys.indexOf(k) > -1) {
                var oldItem = oldArray[oldKeys.indexOf(k)];
                var newItem = newArray[newKeys.indexOf(k)];
                if (showUpdateDetail) {
                    result.updatedItems.push({
                        key: k,
                        oldItem: oldItem,
                        newItem: newItem
                    });
                }
                else if (val && oldItem[val] != newItem[val]) {
                    result.updatedItems.push(newArray[newKeys.indexOf(k)]);
                }
            }
            else if (oldKeys.indexOf(k) == -1 && newKeys.indexOf(k) > -1) {
                result.newItems.push(newArray[newKeys.indexOf(k)]);
            }
        });
        return result;
    };
    CommonProvider.prototype.resolve = function () {
        var _this = this;
        return Promise.all([
            this.ibcFB.afDB.database.ref('apiServer').once('value'),
            this.ibcFB.afDB.database.ref('text').once('value'),
            this.ibcFB.afDB.database.ref('version').once('value'),
            this.ibcFB.afDB.database.ref('versionForceUpdate').once('value'),
            this.ibcFB.afDB.database.ref('versionNotes').once('value'),
            this.ibcFB.afDB.database.ref('dailyVerses').once('value')
        ])
            .then(function (res) {
            var apiUrl = res[0].val();
            __WEBPACK_IMPORTED_MODULE_6__app_env__["a" /* ENV */].apiServer = apiUrl;
            var text = res[1].val();
            _this.text = text;
            _this.newVersion = res[2].val();
            var forceUpdateVersion = res[3].val();
            if (forceUpdateVersion) {
                _this.forceUpdateVersion = _this.compareVersion(__WEBPACK_IMPORTED_MODULE_6__app_env__["a" /* ENV */].version, forceUpdateVersion);
            }
            var allNotes = res[4].val();
            if (allNotes && _this.newVersion) {
                _this.versionNotes = allNotes[_this.newVersion.replace(/\./g, '_')];
            }
            var verses = res[5].val() || [];
            var today = __WEBPACK_IMPORTED_MODULE_5_moment__().format('YYYY-MM-DD');
            var found = verses.filter(function (v) { return v.datetime == today; })[0];
            if (found) {
                _this.dailyVerseDate = found.datetime;
                // this.navCtrl.push('daily-verse-page', { date: found.datetime });
            }
        });
    };
    CommonProvider.prototype.parseURLParameters = function (s) {
        var result = {};
        s.split('&').forEach(function (seg) {
            var parts = seg.split('=');
            result[parts[0]] = parts[1];
        });
        return result;
    };
    CommonProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_common_http__["a" /* HttpClient */], __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* ToastController */], __WEBPACK_IMPORTED_MODULE_4__angular_platform_browser__["c" /* DomSanitizer */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["l" /* Platform */], __WEBPACK_IMPORTED_MODULE_3__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */], __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["a" /* AlertController */]])
    ], CommonProvider);
    return CommonProvider;
}());

//# sourceMappingURL=common.js.map

/***/ }),

/***/ 15:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return TypeInputUI; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DataProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_file_cache_file_cache__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__s2t_s2t__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__video_video__ = __webpack_require__(115);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_badge__ = __webpack_require__(521);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__app_env__ = __webpack_require__(41);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_wechat_wechat__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_bible_bible__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_rxjs__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_rxjs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_firebase_app__ = __webpack_require__(158);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_firebase_app___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_firebase_app__);
/* unused harmony reexport database */
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















var TypeInputUI;
(function (TypeInputUI) {
    TypeInputUI["Number"] = "number";
    TypeInputUI["Text"] = "text";
    TypeInputUI["Textarea"] = "textarea";
    TypeInputUI["Boolean"] = "boolean";
    TypeInputUI["Date"] = "date";
    TypeInputUI["Location"] = "location";
    TypeInputUI["Dropdown"] = "dropdown";
    TypeInputUI["MultiDropdown"] = "multi-dropdown";
})(TypeInputUI || (TypeInputUI = {}));
;

/*
  Generated class for the DataProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var DataProvider = (function () {
    function DataProvider(http, ibcFB, badge, wechat, platform, s2t, videoSvc, cacheSvc, modalCtrl, commonSvc, bibleSvc) {
        var _this = this;
        this.http = http;
        this.ibcFB = ibcFB;
        this.badge = badge;
        this.wechat = wechat;
        this.platform = platform;
        this.s2t = s2t;
        this.videoSvc = videoSvc;
        this.cacheSvc = cacheSvc;
        this.modalCtrl = modalCtrl;
        this.commonSvc = commonSvc;
        this.bibleSvc = bibleSvc;
        this.homeCards = [];
        this.urls = {};
        this.urlPageAdjustments = [];
        this.allContacts = [];
        this.existingSubscriptions = [];
        this.errorObservableHandler = function (err) {
            console.log(err);
            _this.cleanDataWithAuth();
            return __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].empty();
        };
        this.allowWechat = false;
        this.createAddChatIdFunc = function (title, db) { return function (item, key) {
            return _this.lastCountDB.once('value').then(function (snapshot) {
                var lastCount = snapshot.val();
                var newId = lastCount.contacts + 1;
                return Promise.all([
                    _this.allContactsDB.child("" + newId).set({
                        id: newId,
                        name: title,
                        chinese_name: item.title,
                        skills: [],
                        class: 'group',
                        hidden: true,
                        createDT: __WEBPACK_IMPORTED_MODULE_6_moment__().format("YYYY-MM-DD HH:mm:ss")
                    }),
                    _this.lastCountDB.child('contacts').set(newId).then(function () { return item; })
                ]).then(function () {
                    return db.child("" + key).child('chatId').set(newId);
                });
            });
        }; };
        this.createRemoveChatIdFunc = function (item) {
            var chatId = item.chatId;
            if (chatId) {
                return _this.allContactsDB.child("" + chatId).remove();
            }
            else {
                return __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].of(null).toPromise();
            }
        };
        window['ENV'] = __WEBPACK_IMPORTED_MODULE_9__app_env__["a" /* ENV */];
        console.log("======= RUNNING MODE: " + __WEBPACK_IMPORTED_MODULE_9__app_env__["a" /* ENV */].mode + " ========");
        if (this.platform.is('ios')) {
            setTimeout(function () {
                _this.wechat.wechatInstalled().then(function () {
                    _this.ibcFB.afDB.database.ref('allowWechat').on('value', function (snapshot) {
                        var val = snapshot.val();
                        _this.allowWechat = val;
                        // alert(this.allowWechat);
                    });
                }, function () {
                    _this.allowWechat = false;
                });
            }, 1000);
        }
        else if (this.platform.is('android')) {
            this.allowWechat = true;
        }
        else {
            this.allowWechat = false;
        }
        // setTimeout(() => {
        //   this.badge.clear();
        // }, 1000);
        this.userAuthHandler();
        this.homeCardsDB = this.ibcFB.afDB.database.ref('homecards');
        this.homeCards$ = this.ibcFB.afDB.list('homecards').valueChanges();
        this.homeCardsParams = {
            title: '首页卡片',
            items$: this.homeCards$,
            itemsDB: this.homeCardsDB,
            templateForAdd: [
                {
                    key: 'title',
                    caption: '標題'
                },
                {
                    key: 'subtitle',
                    caption: '描述'
                },
                {
                    key: 'hyperlink',
                    caption: '超鏈接'
                },
                {
                    key: 'thumbnail',
                    caption: '縮略圖',
                },
                {
                    key: 'isHidden',
                    caption: '隐藏',
                    type: TypeInputUI.Boolean,
                    default: false
                },
                {
                    key: 'sortOrder',
                    caption: '顺序',
                    type: TypeInputUI.Number,
                    default: 0
                },
                {
                    key: 'isNew',
                    caption: '显示最新',
                    type: TypeInputUI.Boolean,
                    default: false
                },
                {
                    key: 'redirect',
                    caption: '重定向頁面',
                    hidden: function (card) { return card.hyperlink; },
                    type: TypeInputUI.Dropdown,
                    lookupSource: __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].of([
                        {
                            val: null,
                            cap: 'N/A'
                        },
                        {
                            val: 'list-page',
                            cap: '列表頁面'
                        },
                        {
                            val: 'song-page',
                            cap: '詩歌頁面'
                        },
                        {
                            val: 'activity-page',
                            cap: '活動頁面'
                        },
                        {
                            val: 'task-page',
                            cap: '任務頁面'
                        },
                        {
                            val: 'ministry-page',
                            cap: '侍奉人員頁面'
                        },
                        {
                            val: 'sermon-page',
                            cap: '講道頁面'
                        },
                        {
                            val: 'chat-page',
                            cap: '討論頁面'
                        }
                    ]),
                    lookupCaption: 'cap',
                    lookupValue: 'val'
                },
                {
                    key: 'params',
                    caption: '重定向参数（高级）',
                    type: TypeInputUI.Dropdown,
                    hidden: function (card) { return !card.redirect || card.redirect != 'list-page'; },
                    lookupSource: __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].of([
                        {
                            val: '{"type":"fullSongPageParams"}',
                            cap: '全部詩歌列表'
                        },
                        {
                            val: '{"type":"nextSongPageParams"}',
                            cap: '本週敬拜詩歌列表'
                        },
                        {
                            val: '{"type":"myTasksParams"}',
                            cap: '我的任務列表'
                        },
                        {
                            val: '{"type":"activitiesParams"}',
                            cap: '活動列表'
                        }
                    ]),
                    lookupCaption: 'cap',
                    lookupValue: 'val'
                },
                {
                    key: 'params',
                    caption: '重定向参数（高级）',
                    hidden: function (card) { return !card.redirect || card.redirect == 'list-page'; },
                },
                {
                    key: 'content',
                    caption: '內容（高级）',
                    type: TypeInputUI.Textarea
                },
                {
                    key: 'badgeCount',
                    caption: '提醒計數（高級）'
                }
            ]
        };
        // export interface IntHomeCard {
        //     title?: string;
        //     subtitle?: string;
        //     thumbnail?: string;
        //     content?: string;
        //     redirect?: string;
        //     hyperlink?: string;
        //     notifCount?: number;
        //     badgeCount?: string;
        // }        
        this.beliefUrlsDB = this.ibcFB.afDB.database.ref('beliefs');
        this.beliefUrls$ = this.ibcFB.afDB.list('beliefs').valueChanges();
        this.beliefUrlsParams = {
            title: '關於信仰',
            items$: this.beliefUrls$,
            itemsDB: this.beliefUrlsDB,
            templateForAdd: [
                {
                    key: 'title',
                    caption: '標題'
                },
                {
                    key: 'subtitle',
                    caption: '描述'
                },
                {
                    key: 'hyperlink',
                    caption: '超鏈接'
                }
            ]
        };
        this.songsDB = this.ibcFB.afDB.database.ref('songs');
        this.songs$ = this.ibcFB.afDB.list('songs').valueChanges().debounceTime(200);
        this.fullSongPageParams = {
            title: '贊美詩歌',
            items$: this.songs$,
            itemsDB: this.songsDB,
            templateForAdd: [
                {
                    key: 'id',
                    caption: 'Youtube ID'
                },
                {
                    key: 'name',
                    caption: '歌名'
                },
                {
                    key: 'set',
                    caption: 'Set',
                    groupByFunc: function (val, key) {
                        if (val == 0) {
                            return '保留詩歌';
                        }
                        else {
                            return key + " " + val;
                        }
                    }
                },
                {
                    key: 'album',
                    caption: '專輯'
                },
                {
                    key: 'composer',
                    caption: '作曲'
                },
                {
                    key: 'lyricWriter',
                    caption: '作詞'
                },
                {
                    key: 'lyric',
                    caption: '歌詞',
                    type: TypeInputUI.Textarea
                },
                {
                    key: 'language',
                    caption: '語言',
                    type: TypeInputUI.Dropdown,
                    lookupSource: __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].of([
                        {
                            val: '國語',
                            cap: '國語'
                        },
                        {
                            val: '粵語',
                            cap: '粵語'
                        },
                        {
                            val: '英語',
                            cap: '英語'
                        }
                    ]),
                    lookupCaption: 'cap',
                    lookupValue: 'val'
                },
                {
                    key: 'note',
                    caption: '備注',
                    type: TypeInputUI.Textarea
                }
            ],
            filterFunc: function (val, item) {
                if (!isNaN(val)) {
                    return item.set == val;
                }
                else if (val.length < 5) {
                    return _this.s2t.tranStr(item.name + " " + item.album + " " + item.composer + " " + item.lyricWriter, true).indexOf(_this.s2t.tranStr(val, true)) > -1;
                }
                else {
                    return _this.s2t.tranStr(item.name + " " + item.album + " " + item.lyric || "", true).indexOf(_this.s2t.tranStr(val, true)) > -1;
                }
            },
            subtitleAs: function (item, auxiliaryItems) {
                if (!auxiliaryItems)
                    return item.album;
                var index = auxiliaryItems.indexOf(item.id);
                if (index > -1) {
                    return '本週贊美詩歌';
                }
                else {
                    return item.album;
                }
            },
            mapFunc: function (item) {
                return {
                    id: item.id,
                    title: item.name,
                    set: item.set,
                    thumbnail: 'https://img.youtube.com/vi/' + item.id + '/0.jpg',
                    redirect: 'song-page',
                    album: item.album,
                    composer: item.composer,
                    lyricWriter: item.lyricWriter,
                    params: {
                        id: item.id,
                        album: item.album,
                        title: item.name,
                        set: item.set,
                        lyric: item.lyric,
                        language: item.language,
                        composer: item.composer,
                        lyricWriter: item.lyricWriter,
                        note: item.note
                    }
                };
            },
            groupBy: 'set',
            groupOrderByFunc: function (a, b) {
                return parseInt(a) < parseInt(b) ? -1 : 1;
            },
            additionalSlideButton: {
                getAuxiliaryDB: function () { return _this.nextServiceSongsDB; },
                exists: function (item, auxiliaryItems) {
                    if (!auxiliaryItems)
                        return false;
                    var index = auxiliaryItems.indexOf(item.id);
                    if (index > -1) {
                        return true;
                    }
                    else {
                        return false;
                    }
                },
                getColor: function (item, auxiliaryItems) {
                    if (!auxiliaryItems)
                        return 'teal-1';
                    var index = auxiliaryItems.indexOf(item.id);
                    if (index > -1) {
                        return 'danger';
                    }
                    else {
                        return 'teal-1';
                    }
                },
                getTitle: function (item, auxiliaryItems) {
                    if (!auxiliaryItems)
                        return '添加为本周赞美';
                    var index = auxiliaryItems.indexOf(item.id);
                    if (index > -1) {
                        return '删除本周赞美';
                    }
                    else {
                        return '添加为本周赞美';
                    }
                },
                click: function (item, auxiliaryItems) {
                    if (!auxiliaryItems)
                        return;
                    var index = auxiliaryItems.indexOf(item.id);
                    if (index > -1) {
                        auxiliaryItems.splice(index, 1);
                    }
                    else {
                        auxiliaryItems.push(item.id);
                    }
                    _this.nextServiceSongsDB.set(auxiliaryItems).then(function () {
                        _this.commonSvc.toastSuccess('本週贊美詩已更新');
                    }, function (err) {
                        _this.commonSvc.toastFailure('本週贊美詩更新失敗', err);
                    });
                }
            }
            // callFunc: (item) => {
            //     this.videoSvc.play(item.id);
            // }
        };
        this.nextServiceSongsDB = this.ibcFB.afDB.database.ref('nextServiceSongs');
        this.nextServiceSongs$ = __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].combineLatest(this.songs$, this.ibcFB.afDB.list('nextServiceSongs').valueChanges()).map(function (res) {
            var _songList = res[0];
            var _nextSongStrings = res[1];
            return _songList.filter(function (s) { return _nextSongStrings.filter(function (nss) { return nss == s.id; }).length > 0; });
        });
        this.nextSongPageParams = Object.assign({}, this.fullSongPageParams, {
            title: '本周贊美詩歌',
            itemsDB: this.nextServiceSongsDB,
            items$: this.nextServiceSongs$,
            reverseMapFunc: function (item) { return item.id; },
            templateForAdd: [
                {
                    key: 'id',
                    caption: 'Youtube ID',
                    type: 'dropdown',
                    lookupSource: this.songs$,
                    lookupCaption: 'name',
                    lookupValue: 'id'
                },
            ]
        });
        this.sermonsDB = this.ibcFB.afDB.database.ref('sermons');
        this.sermons$ = this.ibcFB.afDB.list('sermons').valueChanges();
        this.sermonPageParams = {
            title: '教會講道',
            items$: this.sermons$,
            itemsDB: this.sermonsDB,
            templateForAdd: [
                {
                    key: 'id',
                    caption: 'YoutubeID (Audio可不填)'
                },
                {
                    key: 'type',
                    caption: '媒体类型',
                    type: TypeInputUI.Dropdown,
                    lookupSource: __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].of([
                        {
                            val: 'video',
                            cap: 'Youtube视频'
                        },
                        {
                            val: 'audio',
                            cap: '音频'
                        }
                    ]),
                    lookupCaption: 'cap',
                    lookupValue: 'val'
                },
                {
                    key: 'title',
                    caption: '标题'
                },
                {
                    key: 'subtitle',
                    caption: '副标题'
                },
                {
                    key: 'description',
                    caption: '介绍',
                    type: TypeInputUI.Textarea
                }
            ],
            mapFunc: function (item) {
                return {
                    id: item.id,
                    title: item.title,
                    subtitle: item.subtitle,
                    thumbnail: 'https://img.youtube.com/vi/' + item.id + '/0.jpg',
                    redirect: 'sermon-page',
                    params: {
                        id: item.id
                    }
                };
            },
            postAddCallback: this.createAddChatIdFunc('Sermon', this.sermonsDB),
            postDeleteCallback: this.createRemoveChatIdFunc
        };
        this.dailyVersesDB = this.ibcFB.afDB.database.ref('dailyVerses');
        this.dailyVerses$ = this.ibcFB.afDB.list('dailyVerses').valueChanges();
        this.dailyVersesPageParams = {
            title: '每日金句',
            items$: this.dailyVerses$,
            itemsDB: this.dailyVersesDB,
            templateForAdd: [
                {
                    key: 'datetime',
                    caption: '日期',
                    type: TypeInputUI.Date
                },
                {
                    key: 'bookSN',
                    caption: '選擇聖經Book',
                    type: TypeInputUI.Dropdown,
                    lookupSource: __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].from(this.bibleSvc.getBooks()),
                    lookupCaption: 'FullName',
                    lookupValue: 'SN'
                },
                {
                    key: 'chapterSN',
                    caption: '章(Chapter)',
                    type: TypeInputUI.Number
                },
                {
                    key: 'verseSN',
                    caption: '節(Verse)',
                    type: TypeInputUI.Number
                },
                {
                    key: 'subtitle',
                    caption: '經文(自動顯示)',
                    disabled: true,
                    type: TypeInputUI.Text
                },
                {
                    key: 'description',
                    caption: '備注',
                    type: TypeInputUI.Textarea
                },
                {
                    key: 'chatId',
                    caption: '讨论区ID',
                    type: TypeInputUI.Text
                },
                {
                    key: 'thumbnail',
                    caption: '縮略圖',
                    default: 'http://ibc.medocs.com.au/img/IBC.ico'
                }
            ],
            filterFunc: function (val, item) {
                return _this.s2t.tranStr(item.title + " " + item.subtitle || "", true).indexOf(_this.s2t.tranStr(val, true)) > -1;
            },
            mapFunc: function (item) {
                return {
                    id: item.id,
                    title: __WEBPACK_IMPORTED_MODULE_6_moment__(item.datetime).format('M月D日'),
                    subtitle: item.subtitle,
                    datetime: item.datetime,
                    thumbnail: item.thumbnail,
                    redirect: 'daily-verse-page',
                    params: { date: item.datetime }
                };
            },
            orderByFunc: function (a, b) { return a.datetime > b.datetime ? -1 : 1; },
            preAddCallback: function (item, keyOrIndex) {
                console.log(JSON.stringify(item));
                return _this.bibleSvc.getAVerse(item.bookSN, item.chapterSN, item.verseSN).then(function (verse) {
                    if (verse) {
                        item.subtitle = "" + verse.ShortName + verse.ChapterSN + ":" + verse.VerseSN + " - " + verse.Chinese;
                    }
                    return item;
                });
            }
        };
        this.allContactsDB = this.ibcFB.afDB.database.ref('contacts');
        this.allContacts$ = this.ibcFB.afDB.list('contacts').valueChanges().catch(function (err) { return __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].of(null); }).map(function (contacts) {
            if (!contacts)
                return [];
            return contacts.sort(function (a, b) {
                var classA = a.class || 'user';
                var classB = b.class || 'user';
                return classA < classB ? -1 : classA > classB ? 1 : (a.name < b.name ? -1 : 1);
            });
        }).debounceTime(500);
        this.contactsParams = {
            title: '聯繫人',
            forSelection: true,
            items$: this.allContacts$.map(function (contacts) { return contacts.filter(function (c) { return c.class != 'group' && !c.hidden; }); }),
            itemsDB: this.allContactsDB,
            defaultAvatarImg: 'assets/img/default-photo.jpg',
            titleAs: function (item) { return item.chinese_name + " (" + item.name + ")"; },
            filterFunc: function (val, item) {
                return (item.chinese_name + " " + item.name).toLowerCase().indexOf(_this.s2t.tranStr(val, true)) > -1;
            },
            mapFunc: function (item) {
                return {
                    id: item.id,
                    subtitle: item.name,
                    chinese_name: item.chinese_name,
                    name: item.name,
                    key: item.username,
                    avatar: item.photoURL
                };
            }
        };
        this.activitiesDB = this.ibcFB.afDB.database.ref('activities');
        this.activities$ = this.ibcFB.afDB.list('activities').valueChanges().map(function (items) {
            items.forEach(function (item) {
                item.isNew = __WEBPACK_IMPORTED_MODULE_6_moment__().isBefore(item.datetime);
            });
            return items;
        });
        this.activitiesParams = {
            title: '教會活動',
            items$: this.activities$,
            itemsDB: this.activitiesDB,
            checkNew: true,
            // groupBy: 'past',
            // groupOrderByFunc: (a,b) => (a?1:0) < (b?1:0) ? -1 : 1,
            orderByFunc: function (a, b) { return a.datetime > b.datetime ? -1 : 1; },
            templateForAdd: [
                {
                    key: 'title',
                    caption: '標題'
                },
                {
                    key: 'description',
                    caption: '描述',
                    type: TypeInputUI.Textarea
                },
                {
                    key: 'datetime',
                    caption: '日期',
                    type: TypeInputUI.Date
                },
                {
                    key: 'location',
                    caption: '地點',
                    type: TypeInputUI.Text
                },
                // {
                //     key: 'past',
                //     groupByFunc: (val) => {
                //         return val ? '過去的活動' : '新活動';
                //     },
                //     caption: '這是舊的活動',
                //     type: TypeInputUI.Boolean,
                //     default: false,
                // },
                {
                    key: 'question',
                    caption: '需要参加者填写的问题'
                },
                {
                    key: 'questionType',
                    caption: '问题类型',
                    type: TypeInputUI.Dropdown,
                    hidden: function (act) { return !act.question; },
                    lookupSource: __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].of([
                        {
                            val: TypeInputUI.Boolean,
                            cap: '回答Yes或No'
                        },
                        {
                            val: TypeInputUI.Dropdown,
                            cap: '選擇題'
                        },
                        {
                            val: TypeInputUI.Text,
                            cap: '需要具體輸入'
                        }
                    ]),
                    lookupCaption: 'cap',
                    lookupValue: 'val'
                },
                {
                    key: 'answerChoices',
                    caption: '問答選項（請用逗號分隔）',
                    hidden: function (act) { return act.questionType != TypeInputUI.Dropdown; }
                },
                {
                    key: 'thumbnail',
                    caption: '縮略圖'
                }
            ],
            mapFunc: function (item) {
                return {
                    id: item.id,
                    title: item.title,
                    subtitle: __WEBPACK_IMPORTED_MODULE_6_moment__(item.datetime).format('YYYY年M月D日'),
                    datetime: item.datetime,
                    thumbnail: item.thumbnail,
                    redirect: 'activity-page',
                    isNew: item.isNew,
                    params: { id: item.id }
                };
            },
            postAddCallback: this.createAddChatIdFunc('Activity', this.activitiesDB),
            postDeleteCallback: this.createRemoveChatIdFunc
        };
        /* User Management */
        this.userManagementParams = {
            title: '用户页面',
            noSlideOptions: true,
            items$: this.allContacts$.map(function (contacts) { return contacts.filter(function (c) { return c.class != 'group' && !c.hidden; }); }),
            itemsDB: this.allContactsDB,
            defaultAvatarImg: 'assets/img/default-photo.jpg',
            titleAs: function (item) { return item.chinese_name + " (" + item.name + ")"; },
            filterFunc: function (val, item) {
                return (item.chinese_name + " " + item.name).toLowerCase().indexOf(_this.s2t.tranStr(val, true)) > -1;
            },
            mapFunc: function (item) {
                return {
                    id: item.id,
                    subtitle: item.name,
                    chinese_name: item.chinese_name,
                    name: item.name,
                    key: item.username,
                    avatar: item.photoURL
                };
            }
        };
        /* User group management */
        this.groupManagementDB = this.ibcFB.afDB.database.ref('userGroups');
        this.groupManagement$ = this.ibcFB.afDB.list('userGroups').valueChanges();
        this.groupManagementParams = {
            title: '群组管理',
            items$: this.groupManagement$,
            itemsDB: this.groupManagementDB,
            defaultAvatarImg: 'assets/img/user-group.png',
            templateForAdd: [
                {
                    key: 'groupName',
                    caption: '群组关键字（英）'
                },
                {
                    key: 'title',
                    caption: '群组名（中）'
                },
                {
                    key: 'subtitle',
                    caption: '描述'
                },
                {
                    key: 'avatar',
                    caption: '头像URL'
                }
            ],
            itemTappedPreFunc: function (group, groupIndex) {
                _this.tempListPageParams = Object.assign({}, _this.userManagementParams);
                _this.tempListPageParams.title = group.title;
                var members$ = new __WEBPACK_IMPORTED_MODULE_13_rxjs__["BehaviorSubject"](group.members || []);
                _this.tempListPageParams.items$ = __WEBPACK_IMPORTED_MODULE_13_rxjs__["Observable"].combineLatest(_this.allContacts$.map(function (contacts) { return contacts.filter(function (c) { return c.class != 'group' && !c.hidden; }); }), members$).map(function (res) {
                    return res[0].filter(function (c) { return res[1].filter(function (m) { return m == c.username; }).length > 0; });
                });
                _this.tempListPageParams.addItemUseComponent = 'list-page';
                _this.tempListPageParams.addItemFuncFactory = function (modalCtrl, component) {
                    return function () {
                        var modal = modalCtrl.create(component, {
                            type: Object.assign({}, _this.contactsParams, {
                                preselectedItemKeys: group.members,
                            })
                        });
                        modal.onDidDismiss(function (contacts) {
                            if (contacts) {
                                var newMembers_1 = contacts.map(function (c) { return c.username; });
                                _this.groupManagementDB.child(groupIndex + "/members").set(newMembers_1).then(function () {
                                    members$.next(newMembers_1);
                                    group.members = newMembers_1;
                                    _this.commonSvc.toastSuccess('成功更新成员！');
                                }).catch(function (err) {
                                    _this.commonSvc.toastFailure('无法更新成员', err);
                                });
                            }
                        });
                        modal.present();
                    };
                };
            },
            mapFunc: function (group, groupIndex) {
                return {
                    id: group.id,
                    name: group.groupName,
                    title: group.title,
                    subtitle: group.groupDescription,
                    avatar: group.avatar,
                    redirect: 'list-page',
                    members: group.members,
                    params: {
                        type: function () { return _this.tempListPageParams; }
                    }
                };
            }
        };
        /* public URLs */
        this.ibcFB.afDB.database.ref('urls').on('value', function (snapshot) {
            _this.urls = snapshot.val();
        });
        this.urlPageAdjustments$ = this.ibcFB.afDB.list('urlPageAdjustments').valueChanges();
        this.existingSubscriptions.push(this.urlPageAdjustments$.subscribe(function (res) {
            _this.urlPageAdjustments = res;
        }, function (err) { }));
        this.ministriesDB = this.ibcFB.afDB.database.ref('ministries');
        this.ministries$ = this.ibcFB.afDB.list('ministries').valueChanges().debounceTime(500);
        this.threadDB = this.ibcFB.afDB.database.ref('threads');
        this.fileCache$ = this.ibcFB.afDB.list('updateCaches').valueChanges().debounceTime(500);
        this.fileCache$.subscribe(function (caches) {
            caches.forEach(function (c) {
                _this.cacheSvc.checkAndClearCache(c.key, new Date(c.timestamp));
            });
        }, console.error);
        this.lastCountDB = this.ibcFB.afDB.database.ref('lastCounts');
        this.lastCounts$ = this.ibcFB.afDB.object('lastCounts').valueChanges();
        this.allStatusDB = this.ibcFB.afDB.database.ref('status');
        this.allStatus$ = this.ibcFB.afDB.object('status').valueChanges();
        this.versionDB = this.ibcFB.afDB.database.ref('version');
    }
    DataProvider.prototype.userAuthHandler = function () {
        var _this = this;
        this.currentUser$ = this.ibcFB.userProfile$.filter(function (u) { return u != null; }).flatMap(function (authUser) {
            _this.auth = authUser;
            _this.ibcFB.userProfile = authUser;
            /* Update Auth User profile we have it in auth.providedData */
            if ((!authUser.displayName || !authUser.photoURL) && authUser.providerData && authUser.providerData[0]) {
                _this.ibcFB.updateAuthUserProfile(authUser, authUser.providerData[0].displayName, authUser.providerData[0].photoURL);
            }
            /* Update access_level of ibcFB */
            _this.ibcFB.afDB.database.ref('roles/superuser').once('value').then(function (val) {
                console.log("You are a superuser!");
                _this.ibcFB.access_level = 3;
            })
                .catch(function (err) { return _this.ibcFB.afDB.database.ref('roles/admin').once('value').then(function (val) {
                console.log("You are an admin!");
                _this.ibcFB.access_level = 2;
            }); })
                .catch(function (err) { return _this.ibcFB.afDB.database.ref('roles/internal').once('value').then(function (val) {
                console.log("You are an internal user!");
                _this.ibcFB.access_level = 1;
            }); })
                .catch(function (err) {
                console.log('--- no access_level ---');
                _this.ibcFB.access_level = 0;
            });
            return _this.ibcFB.afDB.object("userMap/" + authUser.uid).valueChanges().flatMap(function (res) {
                _this.myselfContactDB = _this.ibcFB.afDB.database.ref("contacts/" + res.contactId);
                return _this.ibcFB.afDB.object("contacts/" + res.contactId).valueChanges();
            }).catch(_this.errorObservableHandler);
        }).catch(this.errorObservableHandler).debounceTime(500);
        this.currentUser$.subscribe(function (contact) {
            // console.log("--- current contact ---");
            // console.log(contact);
            _this.myselfContact = contact;
            if (!contact.photoURL && _this.auth.providerData[0] && _this.auth.providerData[0].photoURL) {
                _this.myselfContactDB.update({ photoURL: _this.auth.providerData[0].photoURL });
            }
            if (!contact.photoURL && _this.ibcFB.wechatAuthInfo.headimgurl) {
                _this.myselfContactDB.update({ photoURL: _this.ibcFB.wechatAuthInfo.headimgurl });
            }
            if (_this.ibcFB.wechatAuthInfo.nickname) {
                _this.myselfContactDB.update({ wechat: _this.ibcFB.wechatAuthInfo.nickname });
            }
            /* Update email & displayName property of auth using the info from /users (firebase DB) */
            // if (!this.auth.email) {
            //     this.ibcFB.updateAuthUserEmail(this.auth, contact.email);
            // }
            if (!_this.auth.displayName) {
                _this.ibcFB.updateAuthUserProfile(_this.auth, contact.name, '');
            }
            _this.myTasksDB = _this.ibcFB.afDB.database.ref("tasks/" + contact.id);
            _this.myTasks$ = _this.ibcFB.afDB.list("tasks/" + contact.id).valueChanges();
            _this.myTasksParams = {
                title: '我的任務',
                items$: _this.myTasks$,
                itemsDB: _this.myTasksDB,
                checkNew: true,
                hideEdit: false,
                listHasKeys: true,
                fullPermission: true,
                subtitleAs: function (item) {
                    return __WEBPACK_IMPORTED_MODULE_6_moment__(item.createdDT).format('M月D日 HH:mm:ss 发送');
                },
                orderByFunc: function (a, b) {
                    // let newA = !a.isNew || 0;
                    // let newB = !b.isNew || 0;
                    // let readA = a.read || 0;
                    // let readB = b.read || 0;
                    var timeA = a.datetime || "2100-01-01";
                    var timeB = b.datetime || "2100-01-01";
                    var createdTimeA = a.createdDT || '2000-01-01 00:00:00';
                    var createdTimeB = b.createdDT || '2000-01-01 00:00:00';
                    // return newA < newB ? -1 : newA > newB ? 1 : 
                    //        readA < readB ? -1 : readA > readB ? 1 : 
                    return timeA < timeB ? -1 : timeA > timeB ? 1 :
                        createdTimeA < createdTimeB ? 1 : createdTimeA > createdTimeB ? -1 : 0;
                },
                templateForAdd: [
                    {
                        key: 'title',
                        caption: '標題'
                    },
                    {
                        key: 'subtitle',
                        caption: '描述'
                    },
                    {
                        key: 'redirect',
                        caption: '链接页面'
                    },
                    {
                        key: 'hyperlink',
                        caption: '链接页面'
                    },
                    {
                        key: 'thumbnail',
                        caption: '链接页面'
                    },
                    {
                        key: 'datetime',
                        caption: '日期时间',
                        type: TypeInputUI.Date
                    }
                ]
            };
            _this.initSubscribeWithAuth();
        }, this.errorObservableHandler);
    };
    DataProvider.prototype.initSubscribeWithAuth = function () {
        var _this = this;
        while (this.existingSubscriptions.length > 0) {
            var subscription = this.existingSubscriptions.pop();
            if (subscription) {
                subscription.unsubscribe();
            }
        }
        this.existingSubscriptions.push(this.allContacts$.subscribe(function (contacts) {
            _this.allContacts = contacts;
            contacts.forEach(function (contact) {
                if (contact.photoURL) {
                    _this.cacheSvc.cacheFile(contact.photoURL, 'image').then(function (url) {
                        // cache all photoURLs
                        // console.log(JSON.stringify(this.cacheSvc.cachingMap[contact.photoURL]));
                    });
                }
            });
        }, console.error));
        this.existingSubscriptions.push(this.homeCards$.subscribe(function (cards) {
            _this.homeCards = cards;
            var content = _this;
            if (content) { } // A trick to avoid tslint warning.
            _this.homeCards.forEach(function (card) {
                try {
                    var list$ = eval(card.badgeCount);
                    _this.existingSubscriptions.push(list$.subscribe(function (count) {
                        card.badgeCount = "" + count;
                    }, function (err) { }));
                }
                catch (e) { }
            });
        }, console.error));
        /* At this time we are not going to use badge because it only gets updated when
           the app is open and running which is not very useful. */
        // this.existingSubscriptions.push(this.myTasks$.subscribe(tasks => {
        //   if (tasks) {
        //     let newTaskCount = tasks.filter(t => t.isNew).length;
        //     console.log(`newTaskCount = ${newTaskCount}`);
        //     if (!newTaskCount) {
        //       this.badge.clear();
        //     } else {
        //       this.badge.set(newTaskCount);
        //     }
        //   }
        // }, e => {}));
        // this.existingSubscriptions.push(this.activities$.subscribe(activities => {
        //   this.activities = activities;
        // }, console.error));
        // this.existingSubscriptions.push(this.myTasks$.subscribe(tasks => {
        //   this.myTasks = tasks;
        //     if (!tasks) tasks = [];
        //     let newCount = tasks.filter(task => task.isNew).length;
        //     setTimeout(() => {
        //         this.badge.set(newCount);
        //         let taskCardIndex = this.homeCards && this.homeCards.map(card => card.redirect).indexOf('TaskPage');
        //         this.homeCards[taskCardIndex].notifCount = newCount;
        //     }, 500);
        // }, console.error));
    };
    DataProvider.prototype.cleanDataWithAuth = function () {
        this.allContacts = [];
        this.myselfContact = null;
        this.ibcFB.access_level = 0;
    };
    DataProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_common_http__["a" /* HttpClient */], __WEBPACK_IMPORTED_MODULE_2__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_badge__["a" /* Badge */], __WEBPACK_IMPORTED_MODULE_10__providers_wechat_wechat__["a" /* WechatProvider */], __WEBPACK_IMPORTED_MODULE_8_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_4__s2t_s2t__["a" /* S2tProvider */], __WEBPACK_IMPORTED_MODULE_5__video_video__["a" /* VideoProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_file_cache_file_cache__["a" /* FileCacheProvider */], __WEBPACK_IMPORTED_MODULE_8_ionic_angular__["g" /* ModalController */], __WEBPACK_IMPORTED_MODULE_11__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_12__providers_bible_bible__["a" /* BibleProvider */]])
    ], DataProvider);
    return DataProvider;
}());

//# sourceMappingURL=data-adaptor.js.map

/***/ }),

/***/ 16:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SharedModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_flex_layout__ = __webpack_require__(1064);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ng2_img_cropper_index__ = __webpack_require__(190);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_common_http__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_user_profile_user_profile__ = __webpack_require__(117);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__directives_directives_module__ = __webpack_require__(1065);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__pages_monthly_verses_monthly_verses_module__ = __webpack_require__(199);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__components_components_module__ = __webpack_require__(1072);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__pipes_pipes_module__ = __webpack_require__(1073);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_ionic_image_loader__ = __webpack_require__(1076);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__angular_http__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_angularfire2__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_angularfire2_database__ = __webpack_require__(157);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_angularfire2_auth__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_angularfire2_firestore__ = __webpack_require__(170);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__components_popup_popup__ = __webpack_require__(119);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__components_load_tracker_load_tracker__ = __webpack_require__(1078);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__components_ibc_map_ibc_map__ = __webpack_require__(1079);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__components_youtube_video_youtube_video__ = __webpack_require__(1080);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__components_editor_editor__ = __webpack_require__(670);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__components_browser_browser__ = __webpack_require__(1081);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__components_photo_edit_photo_edit__ = __webpack_require__(189);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__components_header_pop_over_header__ = __webpack_require__(655);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__components_comment_comment__ = __webpack_require__(1082);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__app_env__ = __webpack_require__(41);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};














// firebase














var SharedModule = (function () {
    function SharedModule() {
    }
    SharedModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_7__pages_user_profile_user_profile__["a" /* ModalSelectAvatar */],
                __WEBPACK_IMPORTED_MODULE_18__components_popup_popup__["a" /* PopupComponent */],
                __WEBPACK_IMPORTED_MODULE_19__components_load_tracker_load_tracker__["a" /* LoadTrackerComponent */],
                __WEBPACK_IMPORTED_MODULE_20__components_ibc_map_ibc_map__["a" /* IbcMapComponent */],
                __WEBPACK_IMPORTED_MODULE_21__components_youtube_video_youtube_video__["a" /* YoutubeVideoComponent */],
                __WEBPACK_IMPORTED_MODULE_22__components_editor_editor__["a" /* IbcEditorComponent */],
                __WEBPACK_IMPORTED_MODULE_23__components_browser_browser__["a" /* BrowserComponent */],
                __WEBPACK_IMPORTED_MODULE_24__components_photo_edit_photo_edit__["a" /* PhotoEditComponent */],
                __WEBPACK_IMPORTED_MODULE_25__components_header_pop_over_header__["a" /* HeaderPopOverComponent */],
                __WEBPACK_IMPORTED_MODULE_26__components_comment_comment__["a" /* CommentComponent */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_0__angular_common__["b" /* CommonModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["e" /* IonicModule */],
                __WEBPACK_IMPORTED_MODULE_6__angular_common_http__["b" /* HttpClientModule */],
                __WEBPACK_IMPORTED_MODULE_4__angular_flex_layout__["a" /* FlexLayoutModule */],
                __WEBPACK_IMPORTED_MODULE_9__pages_monthly_verses_monthly_verses_module__["MonthlyVersesPageModule"],
                __WEBPACK_IMPORTED_MODULE_13__angular_http__["c" /* HttpModule */],
                __WEBPACK_IMPORTED_MODULE_12_ionic_image_loader__["a" /* IonicImageLoader */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_14_angularfire2__["a" /* AngularFireModule */].initializeApp(__WEBPACK_IMPORTED_MODULE_27__app_env__["a" /* ENV */].firebaseConfig),
                __WEBPACK_IMPORTED_MODULE_15_angularfire2_database__["b" /* AngularFireDatabaseModule */],
                __WEBPACK_IMPORTED_MODULE_16_angularfire2_auth__["b" /* AngularFireAuthModule */],
                __WEBPACK_IMPORTED_MODULE_17_angularfire2_firestore__["b" /* AngularFirestoreModule */],
                __WEBPACK_IMPORTED_MODULE_5_ng2_img_cropper_index__["c" /* ImageCropperModule */],
                __WEBPACK_IMPORTED_MODULE_8__directives_directives_module__["a" /* CommonDirectivesModule */],
                __WEBPACK_IMPORTED_MODULE_10__components_components_module__["a" /* ComponentsModule */],
                __WEBPACK_IMPORTED_MODULE_11__pipes_pipes_module__["a" /* PipesModule */]
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_7__pages_user_profile_user_profile__["a" /* ModalSelectAvatar */],
                __WEBPACK_IMPORTED_MODULE_0__angular_common__["b" /* CommonModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["e" /* IonicModule */],
                __WEBPACK_IMPORTED_MODULE_6__angular_common_http__["b" /* HttpClientModule */],
                __WEBPACK_IMPORTED_MODULE_4__angular_flex_layout__["a" /* FlexLayoutModule */],
                __WEBPACK_IMPORTED_MODULE_11__pipes_pipes_module__["a" /* PipesModule */],
                __WEBPACK_IMPORTED_MODULE_9__pages_monthly_verses_monthly_verses_module__["MonthlyVersesPageModule"],
                __WEBPACK_IMPORTED_MODULE_13__angular_http__["c" /* HttpModule */],
                __WEBPACK_IMPORTED_MODULE_15_angularfire2_database__["b" /* AngularFireDatabaseModule */],
                __WEBPACK_IMPORTED_MODULE_16_angularfire2_auth__["b" /* AngularFireAuthModule */],
                __WEBPACK_IMPORTED_MODULE_17_angularfire2_firestore__["b" /* AngularFirestoreModule */],
                __WEBPACK_IMPORTED_MODULE_5_ng2_img_cropper_index__["c" /* ImageCropperModule */],
                __WEBPACK_IMPORTED_MODULE_8__directives_directives_module__["a" /* CommonDirectivesModule */],
                __WEBPACK_IMPORTED_MODULE_18__components_popup_popup__["a" /* PopupComponent */],
                __WEBPACK_IMPORTED_MODULE_19__components_load_tracker_load_tracker__["a" /* LoadTrackerComponent */],
                __WEBPACK_IMPORTED_MODULE_20__components_ibc_map_ibc_map__["a" /* IbcMapComponent */],
                __WEBPACK_IMPORTED_MODULE_21__components_youtube_video_youtube_video__["a" /* YoutubeVideoComponent */],
                __WEBPACK_IMPORTED_MODULE_22__components_editor_editor__["a" /* IbcEditorComponent */],
                __WEBPACK_IMPORTED_MODULE_23__components_browser_browser__["a" /* BrowserComponent */],
                __WEBPACK_IMPORTED_MODULE_24__components_photo_edit_photo_edit__["a" /* PhotoEditComponent */],
                __WEBPACK_IMPORTED_MODULE_25__components_header_pop_over_header__["a" /* HeaderPopOverComponent */],
                __WEBPACK_IMPORTED_MODULE_26__components_comment_comment__["a" /* CommentComponent */]
            ],
            entryComponents: [
                __WEBPACK_IMPORTED_MODULE_7__pages_user_profile_user_profile__["a" /* ModalSelectAvatar */],
                __WEBPACK_IMPORTED_MODULE_18__components_popup_popup__["a" /* PopupComponent */],
                __WEBPACK_IMPORTED_MODULE_19__components_load_tracker_load_tracker__["a" /* LoadTrackerComponent */],
                __WEBPACK_IMPORTED_MODULE_20__components_ibc_map_ibc_map__["a" /* IbcMapComponent */],
                __WEBPACK_IMPORTED_MODULE_21__components_youtube_video_youtube_video__["a" /* YoutubeVideoComponent */],
                __WEBPACK_IMPORTED_MODULE_22__components_editor_editor__["a" /* IbcEditorComponent */],
                __WEBPACK_IMPORTED_MODULE_23__components_browser_browser__["a" /* BrowserComponent */],
                __WEBPACK_IMPORTED_MODULE_24__components_photo_edit_photo_edit__["a" /* PhotoEditComponent */],
                __WEBPACK_IMPORTED_MODULE_25__components_header_pop_over_header__["a" /* HeaderPopOverComponent */],
                __WEBPACK_IMPORTED_MODULE_26__components_comment_comment__["a" /* CommentComponent */]
            ]
        })
    ], SharedModule);
    return SharedModule;
}());

//# sourceMappingURL=shared.module.js.map

/***/ }),

/***/ 187:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HomePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_browser_browser__ = __webpack_require__(116);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_ibc_style_ibc_style__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_rxjs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_header_pop_over_header__ = __webpack_require__(655);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_about_about__ = __webpack_require__(665);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__pages_user_profile_user_profile__ = __webpack_require__(117);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_about_app_about_app__ = __webpack_require__(280);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_photo_photo__ = __webpack_require__(118);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_file_cache_file_cache__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_status_bar__ = __webpack_require__(194);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__providers_wechat_wechat__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__ionic_native_file_opener__ = __webpack_require__(188);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__ionic_native_file__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__ionic_native_social_sharing__ = __webpack_require__(195);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__providers_audio_audio__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__providers_load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__providers_ibc_deeplink_ibc_deeplink__ = __webpack_require__(666);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__ionic_native_deeplinks__ = __webpack_require__(196);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














// import { InAppBrowser } from '@ionic-native/in-app-browser';










// declare var cordova;
var HomePage = (function () {
    function HomePage(navCtrl, navParams, ibcFB, platform, toastCtrl, alertCtrl, popOverCtrl, ibcStyle, photoSvc, app, browserSvc, statusBar, common, content, fileOpener, file, fileCacheSvc, audioSvc, socialSharing, wechat, deepLinks, ibcDeepLinkSvc, loadTrackerSvc) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.ibcFB = ibcFB;
        this.platform = platform;
        this.toastCtrl = toastCtrl;
        this.alertCtrl = alertCtrl;
        this.popOverCtrl = popOverCtrl;
        this.ibcStyle = ibcStyle;
        this.photoSvc = photoSvc;
        this.app = app;
        this.browserSvc = browserSvc;
        this.statusBar = statusBar;
        this.common = common;
        this.content = content;
        this.fileOpener = fileOpener;
        this.file = file;
        this.fileCacheSvc = fileCacheSvc;
        this.audioSvc = audioSvc;
        this.socialSharing = socialSharing;
        this.wechat = wechat;
        this.deepLinks = deepLinks;
        this.ibcDeepLinkSvc = ibcDeepLinkSvc;
        this.loadTrackerSvc = loadTrackerSvc;
        this.showCustomLoginConfirm = false;
    }
    Object.defineProperty(HomePage.prototype, "cards", {
        get: function () {
            return this.content.homeCards.sort(function (a, b) {
                if (!a.sortOrder)
                    a.sortOrder = 0;
                if (!b.sortOrder)
                    b.sortOrder = 0;
                return a.sortOrder < b.sortOrder ? -1 : a.sortOrder > b.sortOrder ? 1 : 0;
            });
        },
        enumerable: true,
        configurable: true
    });
    HomePage.prototype.ionViewWillEnter = function () {
        var _this = this;
        window['rxjs'] = __WEBPACK_IMPORTED_MODULE_6_rxjs__;
        if (this.common.dailyVerseDate && (this.common.doNotRemindUpdating || !this.common.versionTooOld)) {
            var date = this.common.dailyVerseDate;
            this.common.dailyVerseDate = null;
            this.navCtrl.push('daily-verse-page', { date: date });
        }
        this.userProfileSubscription = this.ibcFB.userProfile$.filter(function (auth) { return auth != null; }).subscribe(function (userProfile) {
            _this.authUser = userProfile;
            console.log('--- user profile updated! ---');
            var subscription = _this.content.currentUser$.subscribe(function (contact) {
                // console.log('--- user here! ---');
                // console.log(contact);
                if (contact && !contact.visited) {
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__pages_user_profile_user_profile__["b" /* UserProfilePage */]);
                }
                subscription.unsubscribe();
            });
            // ibcFB.userProfile = userProfile;
            /* Set standard background for authenticated users */
            if (_this.authUser && _this.ibcFB.access_level > 0) {
                _this.bgClass = _this.ibcStyle.stdBg;
            }
            else {
                _this.bgClass = 'home-bg-0';
            }
        }, function (err) {
            _this.authUser = undefined;
            _this.bgClass = _this.ibcStyle.randomBg;
        });
        if (!this.common.doNotRemindUpdating) {
            setTimeout(function () {
                if (_this.common.versionTooOld) {
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__pages_about_app_about_app__["a" /* AboutAppPage */]);
                }
            });
        }
        this.ibcDeepLinkSvc.listen(this.navCtrl);
    };
    HomePage.prototype.ionViewDidEnter = function () {
        this.bgClass = this.ibcStyle.randomBg;
    };
    HomePage.prototype.ionViewWillLeave = function () {
        if (this.userProfileSubscription) {
            this.userProfileSubscription.unsubscribe();
        }
    };
    HomePage.prototype.aboutUs = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__pages_about_about__["a" /* AboutPage */]);
    };
    Object.defineProperty(HomePage.prototype, "gmailLinkable", {
        get: function () {
            return this.content.myselfContact && this.content.myselfContact.email && /@gmail.com$/.test(this.content.myselfContact.email);
        },
        enumerable: true,
        configurable: true
    });
    HomePage.prototype.googleLogin = function () {
        this.ibcFB.loginGoogle();
    };
    HomePage.prototype.wechatLogin = function () {
        this.ibcFB.loginWechat();
        // this.wechat.weChatLogin().then((res) => {
        //     console.log(JSON.stringify(res, null, 2));
        // }, err => {});
    };
    HomePage.prototype.logout = function () {
        var _this = this;
        this.ibcFB.logoutGoogle().then(function () {
            _this.audioSvc.play('logoutOk');
        });
        this.authUser = null;
        this.ibcFB.access_level = null;
        this.bgClass = this.ibcStyle.randomBg;
    };
    HomePage.prototype.openBulletin = function () {
        this.browserSvc.openPage(this.content.urls['c-bulletin']);
    };
    HomePage.prototype.openPPT = function () {
        this.browserSvc.openPage(this.content.urls['c-latestpptx']);
        // 
        // this.file.resolveLocalFilesystemUrl('www/c-latestpptx.pdf').then(res => {
        //     console.log(JSON.stringify(res));
        // }, err => JSON.stringify(err));
        // console.log(this.file.applicationDirectory.replace('file://','') + '/www/c-latestpptx.pdf');
        // this.fileOpener.open(this.file.applicationDirectory.replace('file://','') + '/www/c-latestpptx.pdf', 'application/pdf')
        //     .then(() => console.log('File is opened'))
        //     .catch(e => console.log('Error openening file', JSON.stringify(e)));
        // this.browserSvc.openPage(cordova.file.applicationDirectory+'/www/c-latestpptx.pptx');
        // this.browserSvc.openPage('file:///private/var/mobile/Containers/Data/Application/4DA4A1B3-B6EC-46DA-B41F-55694F6DF454/tmp/tempFile.pdf');
        // this.browserSvc.openPage('cdvfile://localhost/cache/tempFile.pdf');
        // this.browserSvc.openPage('cdvfile://localhost/cache/aHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9pYmMtYXBwLTk0NDY2LmFwcHNwb3QuY29tL28vYXZhdGFyJTJGaWJjX1V3ZWVmYWU5R2FpdGg/YWx0PW1lZGlhJnRva2VuPTY4MzJhYjM3LWVmMjctNDdmMC1iMzgyLWUzOWI1ODc0ODE4Nw==/avatar/ibc_Uweefae9Gaith');
        // this.browserSvc.openPage('cdvfile://localhost/cache/aHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9pYmMtYXBwLTk0NDY2LmFwcHNwb3QuY29tL28vYXZhdGFyJTJGaWJjX1V3ZWVmYWU5R2FpdGg/YWx0PW1lZGlhJnRva2VuPTY4MzJhYjM3LWVmMjctNDdmMC1iMzgyLWUzOWI1ODc0ODE4Nw==');
    };
    HomePage.prototype.presentPopover = function (myEvent) {
        if (!this.authUser.uid || !this.ibcFB.access_level) {
            return;
        }
        var popover = this.popOverCtrl.create(__WEBPACK_IMPORTED_MODULE_7__components_header_pop_over_header__["a" /* HeaderPopOverComponent */], {
            logout: this.logout.bind(this)
        });
        // let rect;
        // let rectDom = myEvent.target.getBoundingClientRect();
        // if (typeof rectDom.toJSON == 'function') {
        //   rect = rectDom.toJSON();
        //   rect.top = 80;
        // } else {
        //   rect = rectDom;
        // }
        // myEvent.target.getBoundingClientRect = () => rect;
        popover.present({
            ev: myEvent
            // ev: {
            //   target: {
            //     getBoundingClientRect: () => rect
            //   }
            // }
        });
    };
    HomePage.prototype.homecardRedirect = function (card) {
        var params;
        try {
            params = eval(JSON.parse(card.params));
        }
        catch (e) {
        }
        if (card.hyperlink) {
            this.browserSvc.openPage(card.hyperlink);
        }
        else if (card.redirect) {
            this.navCtrl.push(card.redirect, Object.assign({}, params));
        }
    };
    HomePage.prototype.badgeCountIsNumber = function (badgeCount) {
        return badgeCount != null && !isNaN(badgeCount);
    };
    HomePage.prototype.socialShare = function () {
        this.socialSharing['share']("Hello World!", null, null);
    };
    HomePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-home',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/home/home.html"*/'<ion-header [ngClass]="common.isLoggedIn?\'std-header-bg\':\'\'">\n  <ion-navbar align-title="center" color="transparent">\n\n    <ion-buttons left>\n        <button ion-button menuToggle icon-only>\n          <ion-icon name="menu"></ion-icon>\n        </button>\n    </ion-buttons>\n\n    <h4 ion-text text-center style="color: white"><p>依斯靈頓中文教會</p></h4>\n    \n    <ion-buttons right *ngIf="common.isLoggedIn && content.myselfContact?.photoURL">\n      <button ion-button style="height: 60px" (click)="presentPopover($event)">\n        <img class="img-avatar" [src]="common.sanitize(fileCacheSvc.cachingMap[content.myselfContact?.photoURL]?.target || \'assets/img/default-photo.jpg\')">\n\n        <!-- Android supports cdvfile:// path, however iOS doesn\'t -->\n        <!-- We can only use base64 encoded image for iOS, however readAsDataURL doesn\'t work for android, which\n        means we can\'t encode a base64 string from given URL -->\n        <!-- <img class="img-avatar" src="cdvfile://localhost/temporary/aHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9pYmMtYXBwLTk0NDY2LmFwcHNwb3QuY29tL28vYXZhdGFyJTJGaWJjX0xlaW5naWU0b29naXQ/YWx0PW1lZGlhJnRva2VuPWI5YjdlZTIwLTdmMGQtNGMyYi05MTMxLTVhMzExYjJkMGNmNA=="> -->\n      </button>   \n    </ion-buttons>\n\n    <ion-buttons right *ngIf="common.isLoggedIn && !content.myselfContact?.photoURL">\n      <button ion-button icon-only (click)="presentPopover($event)">\n        <ion-icon name="contact"></ion-icon>\n      </button>\n    </ion-buttons>\n\n  </ion-navbar>\n</ion-header>\n\n<!-- <div class="ibc-overlay"></div> -->\n\n<!-- <ion-content class="page-spinner-container" *ngIf="ibcFB.beingLoggedIn">\n  <ion-spinner class="page-spinner"></ion-spinner>\n</ion-content> -->\n\n<load-tracker></load-tracker>\n\n<ion-content no-bounce [ngClass]="bgClass">\n\n<!--   <div *ngIf="!user">\n    <img src="assets/img/churchyard_950x293.png" alt="">\n\n    <p *ngIf="!user || !user.uid">\n      歡迎來到依斯靈頓浸信會（中文堂），更多信息，請訪問我們的網站<a href="http://chinese.islingtonbaptist.org.au/">docs</a>.\n    </p>    \n  </div> -->\n\n  <div class="ibc-full-height" [hidden]="loadTrackerSvc.loading">\n      \n    <ng-container *ngIf="!common.isLoggedIn">\n\n      <div class="ibc-full-width" [@showAnimation]="showCustomLoginConfirm?\'invisible\':\'visible\'" fxLayout="column" fxLayoutAlign="center center">\n\n        <h3>同來敬拜</h3>\n        <h3>Come to Worship with Us</h3>\n\n        <div ion-text>星期日上午 9:30am</div>\n        <div ion-text>180 Maitland Road Islington NSW 2296</div>\n\n        <ion-buttons class="ibc-top-margin-20">\n          <button ion-button (click)="openBulletin()">本週崇拜期刊</button>\n          <button ion-button color="teal" (click)="openPPT()">本週崇拜PPT</button>\n        </ion-buttons>\n\n      </div>\n\n      <div class="ibc-full-width">\n\n        <ng-container>\n            <button ion-button block color="teal" (click)="showCustomLoginConfirm = !showCustomLoginConfirm">\n              <ion-icon name="logo-arrow-forward"></ion-icon>\n              登入 Sign In\n            </button>\n\n            <ng-container *ngIf="showCustomLoginConfirm">\n              <ion-item>\n                <ion-label fixed>用戶名</ion-label>\n                <ion-input autocorrect="false" #username type="text"></ion-input>\n              </ion-item>\n\n              <ion-item>\n                <ion-label fixed>密碼</ion-label>\n                <ion-input #password type="password"></ion-input>\n              </ion-item>\n\n              <button ion-button block color="teal" (click)="ibcFB.customLogin(username.value, password.value); showCustomLoginConfirm = false;">\n                <ion-icon name="logo-arrow-forward"></ion-icon>\n                確認\n              </button>\n\n            </ng-container>      \n        </ng-container>\n\n        <div fxLayout="row" fxLayout="start center" fxLayoutGap="5px">\n          <button fxFlex ion-button color="danger" (click)="googleLogin()">\n            <ion-icon name="logo-googleplus"></ion-icon>&nbsp;\n            Google登入\n          </button>\n\n          <button *ngIf="content.allowWechat" fxFlex ion-button color="green" (click)="wechatLogin()">\n            <ion-icon name="logo-wechat"></ion-icon>&nbsp;\n            微信登入\n          </button>           \n        </div>       \n\n<!--         <button ion-button block color="blue-800" (click)="aboutUs()">\n          關於我們\n        </button>     -->      \n\n      </div> \n    </ng-container>  \n\n    <ng-container *ngIf="common.isMember">\n        <ion-list>\n          <button ion-item *ngFor="let card of cards" [hidden]="card.isHidden" (click)="homecardRedirect(card)">\n            <img class="ratio-4-3" [ngStyle]="common.isWeb ? {width: \'160px\', height: \'120px\'} : {}" [src]="card.thumbnail" alt="" item-left>\n            <ion-badge *ngIf="badgeCountIsNumber(card.badgeCount) && card.badgeCount > 0" color="danger" class="ibc-badge">{{card.badgeCount}}</ion-badge>\n            <ion-badge *ngIf="card.isNew" color="danger" class="ibc-badge">New!</ion-badge>\n            <div class="ibc-full-height ibc-full-width">\n              <div class="ibc-allow-wrap"><strong>{{card.title}}</strong></div>\n              <br>\n              <ion-note wrap>{{card.subtitle}}</ion-note>\n            </div>\n          </button>\n        </ion-list>\n    </ng-container>\n\n    <ng-container *ngIf="common.isNotMember">\n\n      <div class="ibc-full-width ibc-full-height" [class.ibc-fade-in]="!alwaysShowTexts" fxLayout="column" fxLayoutAlign="center center">\n\n        <div style="width: 300px">\n          <div ion-text>感謝您登陸依斯靈頓中文教會, 但我們無法找到和 <b>{{authUser?.email}}</b> 關聯的教會帳號</div>\n          <br>\n          <div ion-text>请首先使用用户名和密码方式登入，然后进入<i>用户设置</i>→选择<i>關聯到Google帳戶</i></div>\n        </div>\n\n        <br class="ibc-v-margin-10">\n\n        <button ion-button color="light" (click)="logout()">\n          <ion-icon name="logo-arrow-backward"></ion-icon>\n          登出 Sign Out\n        </button>\n\n        <div class="ibc-v-margin-30"></div>\n\n        <div style="width: 300px">\n          <div ion-text>若您沒有用戶名和密碼，但是有意加入我們教會，請聯繫我們！</div>\n        </div>\n\n        <br class="ibc-v-margin-10">\n\n        <button ion-button color="blue-800" (click)="aboutUs()">\n          <ion-icon name="logo-arrow-backward"></ion-icon>\n          聯繫我們\n        </button>\n\n      </div>\n    </ng-container>\n\n  </div>\n\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/home/home.html"*/,
            animations: [
                Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_25" /* trigger */])('showAnimation', [
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_22" /* state */])('invisible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_23" /* style */])({
                        opacity: 0,
                        visibility: 'hidden',
                        height: '0px'
                    })),
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_22" /* state */])('visible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_23" /* style */])({
                        opacity: 1,
                        visibility: 'visible',
                        height: 'calc(100% - 100px)'
                    })),
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_24" /* transition */])('invisible => visible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_14" /* animate */])('300ms ease-in')),
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_24" /* transition */])('visible => invisible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_14" /* animate */])('300ms ease-out'))
                ])
            ]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* PopoverController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_ibc_style_ibc_style__["a" /* IbcStyleProvider */],
            __WEBPACK_IMPORTED_MODULE_11__providers_photo_photo__["a" /* PhotoProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* App */],
            __WEBPACK_IMPORTED_MODULE_4__providers_browser_browser__["a" /* BrowserProvider */],
            __WEBPACK_IMPORTED_MODULE_13__ionic_native_status_bar__["a" /* StatusBar */],
            __WEBPACK_IMPORTED_MODULE_3__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_14__providers_data_adaptor_data_adaptor__["a" /* DataProvider */],
            __WEBPACK_IMPORTED_MODULE_16__ionic_native_file_opener__["a" /* FileOpener */],
            __WEBPACK_IMPORTED_MODULE_17__ionic_native_file__["a" /* File */],
            __WEBPACK_IMPORTED_MODULE_12__providers_file_cache_file_cache__["a" /* FileCacheProvider */],
            __WEBPACK_IMPORTED_MODULE_19__providers_audio_audio__["a" /* AudioProvider */],
            __WEBPACK_IMPORTED_MODULE_18__ionic_native_social_sharing__["a" /* SocialSharing */],
            __WEBPACK_IMPORTED_MODULE_15__providers_wechat_wechat__["a" /* WechatProvider */],
            __WEBPACK_IMPORTED_MODULE_22__ionic_native_deeplinks__["a" /* Deeplinks */],
            __WEBPACK_IMPORTED_MODULE_21__providers_ibc_deeplink_ibc_deeplink__["a" /* IbcDeeplinkProvider */],
            __WEBPACK_IMPORTED_MODULE_20__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */]])
    ], HomePage);
    return HomePage;
}());

//# sourceMappingURL=home.js.map

/***/ }),

/***/ 189:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PhotoEditComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ng2_img_cropper__ = __webpack_require__(190);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var PhotoEditComponent = (function () {
    function PhotoEditComponent(navCtrl, navParams, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        /**
         * Object for storing image data
         */
        this.data = {};
        /**
         * Determines whether the Save Image button is to be displayed or not
         */
        this.canSave = false;
    }
    PhotoEditComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.navParams.data) {
            var image_1 = new Image();
            image_1.src = this.navParams.data.imgData;
            // Assign the Image object to the ImageCropper component
            setTimeout(function () {
                _this.ImageCropper.setImage(image_1);
            });
            this.successHandler = this.navParams.data.successHandler;
            this.failureHandler = this.navParams.data.failureHandler;
            // Here we set up the Image Cropper component settings
            this.cropperSettings = new __WEBPACK_IMPORTED_MODULE_2_ng2_img_cropper__["a" /* CropperSettings */]();
            this.cropperSettings.width = 200;
            // this.cropperSettings.croppedWidth = 200;
            // this.cropperSettings.croppedHeight = 200;
            // If you set preserveSize = true, then croppedWidth/Height will not 
            // be used. the actual size of the cropped image is exactly the same
            // one you cropped.
            this.cropperSettings.preserveSize = true;
            // Hide the default file input for image selection (we'll be
            // using the Camera plugin instead)
            this.cropperSettings.noFileInput = true;
            // Create a new cropped image object when the cropping tool
            // is resized
            this.cropperSettings.cropOnResize = true;
            // We want to convert the file type for a cropped image to a
            // JPEG format
            this.cropperSettings.fileType = 'image/png';
            // We want to be able to adjust the size of the cropping tool
            // by dragging from any corner in any direction
            this.cropperSettings.keepAspect = false;
            this.cropperSettings.canvasWidth = window.innerWidth;
            // this.cropperSettings.canvasHeight = window.innerHeight - 120;            
            if (this.navParams.data.croppingOptions) {
                Object.keys(this.navParams.data.croppingOptions).forEach(function (k) {
                    if (k != null) {
                        _this.cropperSettings[k] = _this.navParams.data.croppingOptions[k];
                    }
                });
            }
        }
    };
    /**
      *
      * Determine the width & height for the cropped image (and enable the
      * Save Image button)
      *
      * @public
      * @method handleCropping
      * @param bounds              {Bounds}      Capture the component's crop event
                                                 (and subsequent properties)
      * @return none
      */
    PhotoEditComponent.prototype.handleCropping = function (bounds) {
        this.croppedHeight = bounds.bottom - bounds.top;
        this.croppedWidth = bounds.right - bounds.left;
        this.canSave = true;
    };
    // /**
    //   *
    //   * Select an image from the device Photo Library
    //   *
    //   * @public
    //   * @method selectImage
    //   * @return none
    //   */
    // selectImage() {
    //     this.canSave = false;
    //     this._PHOTO.selectImage()
    //         .then((data: any) => {
    //             // Create an Image object, assign retrieved base64 image from
    //             // the device photo library
    //             let image: any = new Image();
    //             image.src = data;
    //             // Assign the Image object to the ImageCropper component
    //             this.ImageCropper.setImage(image);
    //         })
    //         .catch((error: any) => {
    //             this.navCtrl.pop();
    //         });
    // }
    /**
      *
      * Retrieve the cropped image value (base64 image data)
      *
      * @public
      * @method saveImage
      * @return none
      */
    PhotoEditComponent.prototype.saveImage = function () {
        if (typeof this.successHandler == 'function') {
            this.successHandler(this.data.image.replace(/^data.*;base64,/, ''));
            // this.navCtrl.pop();
            this.viewCtrl.dismiss();
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])('cropper'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2_ng2_img_cropper__["b" /* ImageCropperComponent */])
    ], PhotoEditComponent.prototype, "ImageCropper", void 0);
    PhotoEditComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'photo-edit',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/photo-edit/photo-edit.html"*/'<ion-header>\n   <ion-navbar>\n      <ion-title>\n         Photo Edit\n      </ion-title>\n   </ion-navbar>\n</ion-header>\n\n<ion-content>\n\n\n   <!-- Select image from device photolibrary -->\n<!--    <button\n      ion-button\n      block\n      color="primary"\n      (click)="selectImage()">Select an Image</button> -->\n\n\n\n   <!-- Declare image cropper with following aspects:\n\n        1. Template reference variable to allow component\n           class to \'hook\' into the cropper tool in DOM\n        2. Set image from the component class\'s data object\n        3. Apply settings from the component class\'s\n           cropperSettings object\n        4. Call the handleCropping method in the image\n           cropper\'s onCrop event\n    -->\n   <img-cropper\n      #cropper\n      [image]="data"\n      [settings]="cropperSettings"\n      (onCrop)="handleCropping($event)"></img-cropper>\n\n\n   <!-- Display the cropped image -->\n<!--    <div\n      *ngIf="data.image">\n\n       <img\n          [src]="data.image"\n          [width]="croppedWidth"\n          [height]="croppedHeight">\n   </div> -->\n\n\n   <!-- Display the save image button IF canSave\n        property value is true\n   -->\n   <button\n      *ngIf="canSave"\n      ion-button\n      block\n      color="secondary"\n      (click)="saveImage()">Save Image</button>\n\n\n</ion-content>'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/photo-edit/photo-edit.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */]])
    ], PhotoEditComponent);
    return PhotoEditComponent;
}());

//# sourceMappingURL=photo-edit.js.map

/***/ }),

/***/ 197:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MapPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the MapPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MapPage = (function () {
    function MapPage(viewCtrl, navParams) {
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.title = navParams.get('title');
        this.address = navParams.get('address');
        this.height = window.innerHeight - 120;
    }
    MapPage.prototype.cancel = function () {
        this.viewCtrl.dismiss();
    };
    MapPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad MapPage');
    };
    MapPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-map',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/map/map.html"*/'<!--\n  Generated template for the MapPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <ion-buttons left>\n      <button ion-button icon-only (click)="cancel()">\n        <!-- <ion-icon name="arrow-back"></ion-icon> -->\n      </button>\n    </ion-buttons>\n\n    <ion-title>{{title || \'\'}}</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content>\n    <ibc-map\n        [address]="address"\n        [title]="address" \n        [height]="height + \'px\'">\n    </ibc-map>\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/map/map.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */]])
    ], MapPage);
    return MapPage;
}());

//# sourceMappingURL=map.js.map

/***/ }),

/***/ 199:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MonthlyVersesPageModule", function() { return MonthlyVersesPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__monthly_verses__ = __webpack_require__(1071);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_ibc_style_ibc_style__ = __webpack_require__(89);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var MonthlyVersesPageModule = (function () {
    function MonthlyVersesPageModule() {
    }
    MonthlyVersesPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__monthly_verses__["a" /* MonthlyVersesPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__monthly_verses__["a" /* MonthlyVersesPage */]),
            ],
            providers: [
                __WEBPACK_IMPORTED_MODULE_3__providers_ibc_style_ibc_style__["a" /* IbcStyleProvider */]
            ]
        })
    ], MonthlyVersesPageModule);
    return MonthlyVersesPageModule;
}());

//# sourceMappingURL=monthly-verses.module.js.map

/***/ }),

/***/ 201:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChatPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_file_cache_file_cache__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_notification_notification__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_rxjs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_audio_audio__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__components_editor_editor__ = __webpack_require__(670);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_ibc_http_ibc_http__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












/**
 * Generated class for the ChatPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ChatPage = (function () {
    function ChatPage(http, navCtrl, navParams, cacheSvc, commonSvc, audioSvc, notificationSvc, modalCtrl, loadTrackerSvc, content) {
        var _this = this;
        this.http = http;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.cacheSvc = cacheSvc;
        this.commonSvc = commonSvc;
        this.audioSvc = audioSvc;
        this.notificationSvc = notificationSvc;
        this.modalCtrl = modalCtrl;
        this.loadTrackerSvc = loadTrackerSvc;
        this.content = content;
        this.thread = null;
        this.messageCount = 0;
        this.incomingMessage$ = new __WEBPACK_IMPORTED_MODULE_6_rxjs__["BehaviorSubject"](null);
        this.height = '100%';
        this.partnerUnreadCount = 0;
        window['moment'] = __WEBPACK_IMPORTED_MODULE_11_moment__;
        this.time_lastHour = __WEBPACK_IMPORTED_MODULE_11_moment__().startOf('hour');
        this.time_today = __WEBPACK_IMPORTED_MODULE_11_moment__().startOf('day');
        this.time_yesterday = __WEBPACK_IMPORTED_MODULE_11_moment__().subtract(1, 'day').startOf('day');
        this.time_lastWeek = __WEBPACK_IMPORTED_MODULE_11_moment__().subtract(1, 'week').startOf('isoWeek');
        this.time_lastMonth = __WEBPACK_IMPORTED_MODULE_11_moment__().subtract(1, 'month').startOf('month');
        this.time_lastYear = __WEBPACK_IMPORTED_MODULE_11_moment__().subtract(1, 'year').startOf('year');
        this.partnerId = this.navParams.get('partnerId');
        var preloaded_thread = this.navParams.get('thread');
        this.content.allContactsDB.once('value', function (snapshot) {
            _this.contacts = snapshot.val();
            if (_this.partnerId) {
                _this.partner = _this.contacts[_this.partnerId];
            }
            else {
                _this.partner = _this.navParams.get('contact');
            }
            console.log('Your chatting partner is:');
            console.log(_this.partner);
            if (_this.partner) {
                _this.subscription = _this.content.currentUser$.flatMap(function (auth) {
                    var body = { receiver_id: _this.partner.id };
                    _this.activate();
                    /* Clear all Unread Notifications */
                    _this.content.allStatusDB
                        .child(_this.content.myselfContact.id)
                        .child(_this.partner.id)
                        .child('chat_notifs').set(0);
                    _this.loadTrackerSvc.loading = true;
                    if (preloaded_thread) {
                        return __WEBPACK_IMPORTED_MODULE_6_rxjs__["Observable"].of(preloaded_thread);
                    }
                    else {
                        return __WEBPACK_IMPORTED_MODULE_6_rxjs__["Observable"].from(_this.http.post("firebase/thread_with", body)).timeout(5000);
                    }
                }).flatMap(function (data) {
                    _this.threadId = data.result;
                    var thread = data.thread;
                    preloaded_thread = null;
                    if (!thread.messages) {
                        thread.messages = [];
                    }
                    if (thread.messages.length > 0) {
                        thread.messages.pop();
                    }
                    _this.thread = thread;
                    return _this.content.ibcFB.afDB.object("threads/" + _this.threadId).valueChanges();
                }).catch(function (error) {
                    console.error(error);
                    return __WEBPACK_IMPORTED_MODULE_6_rxjs__["Observable"].of(null);
                })
                    .subscribe(function (res) {
                    // console.log(res);
                    // this.thread = res;
                    _this.loadTrackerSvc.loading = false;
                    var fireDBThread = res;
                    if (fireDBThread && fireDBThread.messages && fireDBThread.messages.length > 0) {
                        if (_this.thread.messages.length == 0 ||
                            _this.thread.messages[_this.thread.messages.length - 1].timestamp != fireDBThread.messages[0].timestamp)
                            _this.thread.messages.push(fireDBThread.messages[0]);
                    }
                    var messageCount = _this.thread && _this.thread.messages && _this.thread.messages.length || 0;
                    if (messageCount > _this.messageCount
                        && _this.thread.messages[messageCount - 1].sender != _this.content.myselfContact.id) {
                        _this.incomingMessage$.next(_this.thread.messages[messageCount - 1]);
                    }
                    _this.messageCount = messageCount;
                    _this.scrollDown();
                }, function (error) {
                    _this.loadTrackerSvc.loading = false;
                });
            }
        });
        this.incomingMessage$.skip(1).subscribe(function (m) {
            _this.audioSvc.play('incomingMessage');
        });
    }
    ChatPage.prototype.ngOnInit = function () {
        var _this = this;
        /* Make sure set chat_active to false when the app is no longer in use */
        this.commonSvc.platform.pause.subscribe(function (e) {
            console.log('=== quit chatting! ===');
            _this.deactivate();
        });
        window.addEventListener('beforeunload', function () {
            _this.deactivate();
        });
    };
    ChatPage.prototype.ngOnDestroy = function () {
        this.deactivate();
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    };
    ChatPage.prototype.updateActive = function (val) {
        if (val === void 0) { val = true; }
        this.content.allStatusDB
            .child(this.content.myselfContact.id)
            .child(this.partner.id)
            .child('chat_active').set(val);
    };
    ChatPage.prototype.activate = function () {
        this.updateActive(true);
    };
    ChatPage.prototype.deactivate = function () {
        this.updateActive(false);
    };
    ChatPage.prototype.timeDivider = function (time) {
        var dt = __WEBPACK_IMPORTED_MODULE_11_moment__(time);
        if (dt >= this.time_lastHour) {
            return dt.format('HH:');
        }
        else if (dt >= this.time_today) {
            return "今天";
        }
        else if (dt >= this.time_yesterday) {
            return "昨天";
        }
        else if (dt >= this.time_lastWeek) {
            return dt.format('MM/DD');
        }
        else if (dt >= this.time_lastMonth) {
            return dt.format('MM/DD non');
        }
        else if (dt >= this.time_lastYear) {
            return dt.format('MM');
        }
        else {
            return dt.format('YYYY');
        }
    };
    ChatPage.prototype.timeDividerMessage = function (divider, timestamp) {
        var dt = __WEBPACK_IMPORTED_MODULE_11_moment__(timestamp);
        if (divider.match(/^\d\d:$/)) {
            return dt.format('H:mm a');
        }
        else if (divider == '今天' || divider == '昨天') {
            return divider + ' ' + dt.format('H:mm a');
        }
        else if (divider.match(/^\d\d\/\d\d$/)) {
            return dt.format('dddd M月D日 h:mm a');
        }
        else if (divider.match(/^\d\d\/\d\d non$/)) {
            return dt.format('M月D日');
        }
        else if (divider.match(/^\d\d$/)) {
            return dt.format('M月');
        }
        else {
            return dt.format('YYYY年');
        }
    };
    ChatPage.prototype.addPartnerNotif = function () {
        var _this = this;
        if (this.partner.class == 'group')
            return;
        this.content.allStatusDB
            .child(this.partner.id)
            .child(this.content.myselfContact.id)
            .child('chat_active')
            .once('value', function (snapshot) {
            var val = snapshot.val();
            /* Do not add notif if chatting is active */
            if (val)
                return;
            _this.content.allStatusDB
                .child(_this.partner.id)
                .child(_this.content.myselfContact.id)
                .child('chat_notifs').once('value', function (snapshot) {
                var notif = snapshot.val();
                if (notif == null) {
                    _this.content.allStatusDB
                        .child(_this.partner.id)
                        .child(_this.content.myselfContact.id)
                        .child('chat_notifs').set(1);
                    _this.partnerUnreadCount = 1;
                }
                else {
                    _this.content.allStatusDB
                        .child(_this.partner.id)
                        .child(_this.content.myselfContact.id)
                        .child('chat_notifs').set(notif + 1);
                    _this.partnerUnreadCount = notif + 1;
                }
                _this.sendAddNotification();
            });
        });
    };
    ChatPage.prototype.clearPartnerNotif = function () {
    };
    ChatPage.prototype.scrollDown = function () {
        var _this = this;
        setTimeout(function () {
            if (_this.chatArea) {
                _this.chatArea.nativeElement.scrollTop = _this.chatArea.nativeElement.scrollHeight;
            }
        }, 500);
    };
    ChatPage.prototype.ionViewDidLoad = function () {
    };
    ChatPage.prototype.formatMessageBody = function (text) {
        if (!text)
            return;
        return text;
    };
    ChatPage.prototype.sendMessage = function () {
        var _this = this;
        var callback = function (data) {
            var message = data && data.message;
            if (!message)
                return;
            console.log("Message: " + message);
            return _this.http.post('firebase/thread_add_msg', {
                thread_id: _this.threadId,
                message: {
                    body: message
                }
            })
                .then(function () {
                console.log('--- message added ---');
                setTimeout(function () { return _this.audioSvc.play('messageSent'); }, 1000);
                /* Add notif to the partner's status container */
                _this.addPartnerNotif();
                return null;
            }, console.error);
        };
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__components_editor_editor__["a" /* IbcEditorComponent */], {
            titleContent: "To " + this.partner.name,
            useNavController: true,
            callBack: callback
        });
        // let modal = this.modalCtrl.create(EditorPage, {
        //     titleContent: `To ${this.partner.name}`
        // });
        // modal.present();
        // modal.onDidDismiss(data => {
        //     let message = data && data.message;
        //     if (!message) return;
        //     this.http.post(`${ENV.apiServer}/firebase/thread_add_msg`, {
        //        thread_id: this.threadId,
        //        message: {
        //            body: message
        //        }
        //     }, new RequestOptions({ headers: this.headers }))
        //         .timeout(5000)
        //         .subscribe(() => {
        //             this.audioSvc.play('messageSent');
        //             /* Add notif to the partner's status container */
        //             this.addPartnerNotif();                
        //         }, console.error);            
        // });
    };
    ChatPage.prototype.sendAddNotification = function () {
        if (!this.partner)
            return;
        var datetimeCaption = __WEBPACK_IMPORTED_MODULE_11_moment__().format("M月D日 HH:mm");
        var item = {
            datetime: datetimeCaption,
            isNew: true,
            key: this.partner.id + "-message",
            value: this.partner.id + "-" + this.partnerUnreadCount,
            params: {
                contact: this.content.myselfContact
            },
            redirect: "chat-page",
            sender: this.content.myselfContact.id,
            subtitle: "點擊查看",
            title: this.content.myselfContact.name + "\u7D66\u4F60\u767C\u4E86\u6D88\u606F"
        };
        this.notificationSvc.addNotification(this.partner.id, item);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])('chatArea'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], ChatPage.prototype, "chatArea", void 0);
    ChatPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-chat',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/chat/chat.html"*/'<!--\n  Generated template for the ChatPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{partner?.name}} {{partner?.chinese_name}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<load-tracker></load-tracker>\n\n<ion-content no-bounce>\n    <ng-container [ngSwitch]="content?.myselfContact?.id && content?.myselfContact?.id == partner?.id">\n      <div *ngSwitchCase="true" style="text-align: center; margin-top: 20px">\n        <ion-chip color="danger">\n          <ion-label>你不可以和自己聊天：-）</ion-label>\n        </ion-chip>        \n      </div>\n      <div *ngSwitchDefault fxLayout="column" [style.height]="height" style="width: 100%; background-color: #eee;">\n          <div fxFlex style="overflow:auto; margin-top: 10px" #chatArea class="ibc-h-padding-5">\n            <div *ngFor="let message of thread?.messages; let i = index">\n              <div text-center class="ics-full-width ics-v-padding-10" \n                 *ngIf="timeDivider(message?.timestamp) != timeDivider(thread?.messages[i-1]?.timestamp)">\n                <div class="small-note timestamp">{{timeDividerMessage(timeDivider(message?.timestamp), message?.timestamp)}}</div>\n              </div>\n              <div *ngIf="message.sender == content?.myselfContact?.id" class="ibc-full-width ibc-v-padding-10" fxLayout="row" fxLayoutAlign="start end">\n                <div fxLayout="column" fxLayoutAlign="start center">\n                  <div class="small-note">{{content?.myselfContact?.name}} ({{content?.myselfContact?.chinese_name}})</div>\n                  <img class="img-avatar" [src]="cacheSvc.sanitizer.bypassSecurityTrustResourceUrl(cacheSvc.cachingMap[content?.myselfContact?.photoURL]?.target || \'assets/img/default-photo.jpg\')">\n                </div>\n                <div fxLayout="column" fxLayoutAlign="start start">\n                  <div class="sender">{{formatMessageBody(message.body)}}</div>\n                  <!-- <div class="small-note" style="margin-left: 10px;">{{message.timestamp}}</div> -->\n                </div>\n              </div>\n              <div *ngIf="message.sender != content?.myselfContact?.id" class="ibc-full-width ibc-v-padding-10" fxLayout="row" fxLayoutAlign="end end">\n                  <div fxLayout="column" fxLayoutAlign="start end">\n                    <div class="receiver">{{formatMessageBody(message.body)}}</div>\n                    <!-- <div class="small-note" style="margin-right: 10px;">{{message.timestamp}}</div> -->\n                  </div>\n                  <div fxLayout="column" fxLayoutAlign="start center">\n                    <div class="small-note">{{contacts[message.sender]?.name}} ({{contacts[message.sender]?.chinese_name}})</div>\n                    <img class="img-avatar" [src]="cacheSvc.sanitizer.bypassSecurityTrustResourceUrl(cacheSvc.cachingMap[contacts[message.sender]?.photoURL]?.target || \'assets/img/default-photo.jpg\')">\n                  </div>\n              </div>\n            </div>\n          </div>\n          <button ion-button (click)="sendMessage()" full>Send Message</button>\n      </div>      \n    </ng-container>\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/chat/chat.html"*/,
            styles: ["\n        .timestamp {\n            max-width: 150px !important;\n            margin-left: auto !important;\n            margin-right: auto !important;\n            background-color: #CCC !important;\n            border-radius: 10px !important;\n            color: #FFF !important;\n        }\n    "]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_10__providers_ibc_http_ibc_http__["a" /* IbcHttpProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_4__providers_file_cache_file_cache__["a" /* FileCacheProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_7__providers_audio_audio__["a" /* AudioProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_notification_notification__["a" /* NotificationProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_9__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__["a" /* DataProvider */]])
    ], ChatPage);
    return ChatPage;
}());

//# sourceMappingURL=chat.js.map

/***/ }),

/***/ 233:
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = 233;

/***/ }),

/***/ 278:
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"../pages/about-app/about-app.module": [
		279
	],
	"../pages/about/about.module": [
		671
	],
	"../pages/activity/activity.module": [
		672
	],
	"../pages/admin-notif/admin-notif.module": [
		673
	],
	"../pages/admin-sms/admin-sms.module": [
		674
	],
	"../pages/admin-system/admin-system.module": [
		675
	],
	"../pages/app-link/app-link.module": [
		1114,
		0
	],
	"../pages/bible/bible-book.module": [
		676
	],
	"../pages/bible/bible-chapter.module": [
		677
	],
	"../pages/bible/bible-search.module": [
		679
	],
	"../pages/bible/bible.module": [
		680
	],
	"../pages/chat/chat.module": [
		681
	],
	"../pages/contact/contact.module": [
		682
	],
	"../pages/daily-verse/daily-verse.module": [
		683
	],
	"../pages/home/home.module": [
		685
	],
	"../pages/iframe/iframe.module": [
		684
	],
	"../pages/list/list.module": [
		686
	],
	"../pages/map/map.module": [
		687
	],
	"../pages/ministry/ministry.module": [
		688
	],
	"../pages/monthly-verses/monthly-verses.module": [
		199
	],
	"../pages/sermon/sermon.module": [
		689
	],
	"../pages/song/song.module": [
		690
	],
	"../pages/user-profile/user-profile.module": [
		691
	]
};
function webpackAsyncContext(req) {
	var ids = map[req];
	if(!ids)
		return Promise.reject(new Error("Cannot find module '" + req + "'."));
	return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {
		return __webpack_require__(ids[0]);
	});
};
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = 278;
module.exports = webpackAsyncContext;

/***/ }),

/***/ 279:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AboutAppPageModule", function() { return AboutAppPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__about_app__ = __webpack_require__(280);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var AboutAppPageModule = (function () {
    function AboutAppPageModule() {
    }
    AboutAppPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__about_app__["a" /* AboutAppPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__about_app__["a" /* AboutAppPage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__about_app__["a" /* AboutAppPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__about_app__["a" /* AboutAppPage */]]
        })
    ], AboutAppPageModule);
    return AboutAppPageModule;
}());

//# sourceMappingURL=about-app.module.js.map

/***/ }),

/***/ 280:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AboutAppPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_home_home__ = __webpack_require__(187);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__app_env__ = __webpack_require__(41);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the AboutAppPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var AboutAppPage = (function () {
    function AboutAppPage(app, navCtrl, viewCtrl, navParams, common, content) {
        this.app = app;
        this.navCtrl = navCtrl;
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.common = common;
        this.content = content;
        this.env = __WEBPACK_IMPORTED_MODULE_5__app_env__["a" /* ENV */];
        // console.log('--- about app constructed! ---');
        // console.log(JSON.stringify(navParams));
    }
    Object.defineProperty(AboutAppPage.prototype, "rootCtrl", {
        get: function () {
            return this.app.getRootNav();
        },
        enumerable: true,
        configurable: true
    });
    AboutAppPage.prototype.goBack = function () {
        this.common.ignoreUpdate();
        if (this.navCtrl.getViews().length > 1) {
            this.navCtrl.pop();
        }
        else {
            this.rootCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_4__pages_home_home__["a" /* HomePage */]);
        }
    };
    AboutAppPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad AboutAppPage');
    };
    AboutAppPage.prototype.ionViewWillEnter = function () {
        this.viewCtrl.showBackButton(!this.common.versionTooOld);
    };
    AboutAppPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-about-app',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/about-app/about-app.html"*/'<!--\n  Generated template for the AboutAppPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n\n    <ion-title>關於APP</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n\n    <h3 text-center>Islington Baptist Church</h3>\n    <div text-center class="ibc-full-width ibc-bottom-margin-10">\n        <ion-note>Chinese Edition 中文版</ion-note>\n    </div>\n\n    <div text-center class="ibc-full-width ibc-bottom-margin-10">\n        <ion-note>当前版本 {{env.mode == \'Development\'?\'测试版 \':\'\'}}v{{env.version}}</ion-note>\n    </div>\n\n    <p *ngIf="common.forceUpdateVersion" text-center><b style="color: red">您的APP版本過舊，必須更新才能繼續使用</b></p>\n        \n    <div text-center class="ibc-full-width" *ngIf="common.versionTooOld">\n        <p text-center>若在APP Store中未發現Update選項，<br />您需要刪除IBC APP並重新安裝</p>\n        <button style="max-width: 400px; margin-left: auto; margin-right: auto;" ion-button block (click)="common.goToStorePage()">\n          更新至最新版{{common.newVersion}}\n        </button>\n        <div text-left [innerHtml]="common.versionNotes">\n        </div>\n        <button *ngIf="!common.forceUpdateVersion" color="light" style="max-width: 400px; margin-left: auto; margin-right: auto;" ion-button block (click)="goBack()">\n          忽略更新\n        </button>        \n    </div>\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/about-app/about-app.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* App */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_data_adaptor_data_adaptor__["a" /* DataProvider */]])
    ], AboutAppPage);
    return AboutAppPage;
}());

//# sourceMappingURL=about-app.js.map

/***/ }),

/***/ 30:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LoadTrackerProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/*
  Generated class for the LoadTrackerProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var LoadTrackerProvider = (function () {
    function LoadTrackerProvider(http) {
        this.http = http;
        console.log('Hello LoadTrackerProvider Provider');
    }
    LoadTrackerProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_common_http__["a" /* HttpClient */]])
    ], LoadTrackerProvider);
    return LoadTrackerProvider;
}());

//# sourceMappingURL=load-tracker.js.map

/***/ }),

/***/ 32:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IbcFirebaseProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__ = __webpack_require__(33);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_angularfire2_database__ = __webpack_require__(157);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_angularfire2_firestore__ = __webpack_require__(170);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_angularfire2_auth__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_firebase_app__ = __webpack_require__(158);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_firebase_app___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_firebase_app__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_firebase_storage__ = __webpack_require__(791);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_firebase_storage___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_firebase_storage__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_google_plus__ = __webpack_require__(305);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_rxjs__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_rxjs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__audio_audio__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__wechat_wechat__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__app_env__ = __webpack_require__(41);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_js_base64__ = __webpack_require__(1049);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_js_base64___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15_js_base64__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






// import { AngularFirestore, AngularFirestoreCollection, AngularFirestoreDocument } from 'angularfire2/firestore';

// import * as firebase from 'firebase/app';










var IbcFirebaseProvider = (function () {
    function IbcFirebaseProvider(platform, afDB, afAuth, afStore, googlePlus, http, loadTrackerSvc, toastCtrl, audioSvc, wechatSvc) {
        var _this = this;
        this.platform = platform;
        this.afDB = afDB;
        this.afAuth = afAuth;
        this.afStore = afStore;
        this.googlePlus = googlePlus;
        this.http = http;
        this.loadTrackerSvc = loadTrackerSvc;
        this.toastCtrl = toastCtrl;
        this.audioSvc = audioSvc;
        this.wechatSvc = wechatSvc;
        this.userProfile$ = new __WEBPACK_IMPORTED_MODULE_10_rxjs__["BehaviorSubject"](null);
        this.wechatAuthInfo = {};
        this.myselfContact = {};
        /*=========================================
        =            Succeess Handlers            =
        =========================================*/
        this.authSuccessHandler = function (user) {
            console.log("Info (App): Sign-In successfully!");
            _this.audioSvc.play('loginOk');
            _this.loadTrackerSvc.loading = false;
        };
        this.providerAuthSuccessHandler = function () {
            var uid = _this.afAuth.auth.currentUser.uid;
            /* Only church members have uid with pattern ^ibc_.*, however, no matter it is a church member or not,
               we should always call /auth/uid because that API deletes that invalid account from firebase, otherwise
               you would have no chance to connect that gmail account with the correct uid.
             */
            /* Provider doesn't carry additional token data such as access_leve, to make additional token
             * data available, regardless whether it matches ^ibc_.* or not, we have to logout firebase first,
             * send uid to API server, and then signIn with customer token.
             */
            _this.logoutGoogle().then(function () {
                _this.http.post(__WEBPACK_IMPORTED_MODULE_14__app_env__["a" /* ENV */].apiServer + "/auth/uid", {
                    uid: uid
                }).subscribe(function (res) {
                    var data = res.json();
                    if (data && data.token) {
                        __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"]().signInWithCustomToken(data.token).then(_this.authSuccessHandler, _this.authFailureHandler);
                    }
                    else {
                        _this.loadTrackerSvc.loading = false;
                    }
                }, function () {
                    _this.loadTrackerSvc.loading = false;
                });
            }, _this.authFailureHandler);
        };
        /*=====  End of Succeess Handlers  ======*/
        /*========================================
        =            Failure Handlers            =
        ========================================*/
        this.passwordFailureHandler = function (err) {
            _this.loadTrackerSvc.loading = false;
            var toast = _this.toastCtrl.create({
                message: '用戶名和密碼錯誤',
                duration: 3000,
                position: 'top',
                cssClass: 'toast-danger'
            });
            toast.present();
        };
        this.authFailureHandler = function (err) {
            _this.loadTrackerSvc.loading = false;
            var toast = _this.toastCtrl.create({
                message: '登入失敗',
                duration: 3000,
                position: 'top',
                cssClass: 'toast-danger'
            });
            toast.present();
        };
        this.logOutFailureHandler = function (err) {
            _this.loadTrackerSvc.loading = false;
            var toast = _this.toastCtrl.create({
                message: '登出失敗！',
                duration: 3000,
                position: 'top',
                cssClass: 'toast-danger'
            });
            toast.present();
        };
        this.successHandlerLinkWechat = function (message) { return function (res) {
            _this.loadTrackerSvc.loading = false;
            var userInfo = res.json();
            _this.wechatAuthInfo = userInfo;
            var toast = _this.toastCtrl.create({
                message: message,
                duration: 3000,
                position: 'top',
                cssClass: 'toast-success'
            });
            toast.present();
            // this.wechatSvc.linkingInProgress = false;
        }; };
        this.failureHandlerLinkWechat = function (message) { return function (err) {
            _this.loadTrackerSvc.loading = false;
            var toast = _this.toastCtrl.create({
                message: message,
                duration: 3000,
                position: 'top',
                cssClass: 'toast-danger'
            });
            toast.present();
            // this.wechatSvc.linkingInProgress = false;
        }; };
        window['firebase'] = __WEBPACK_IMPORTED_MODULE_7_firebase_app__;
        window['ibcFB'] = this;
        /* If user has already logged In, but didn't logout, when they reopen the App,
         * authSuccessHandler will not be called, but following event onAuthStateChanged
         * will still be triggered.
         */
        __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"]().onAuthStateChanged(function (user) {
            if (user) {
                var val = user.toJSON(), token = void 0;
                if (token = val['stsTokenManager'] && val['stsTokenManager'].accessToken) {
                    try {
                        var base64str = token.split('.')[1];
                        var extraTokenData = JSON.parse(__WEBPACK_IMPORTED_MODULE_15_js_base64__["Base64"].decode(base64str));
                        if (extraTokenData.wechat) {
                            _this.wechatAuthInfo = extraTokenData.wechat;
                        }
                    }
                    catch (e) {
                    }
                }
                // let subscription = this.afDB.object(`/users/${user.uid}`).valueChanges().subscribe((res) => {
                //     this.myselfContact = res;
                //     console.log('---- myself contact ---');
                //     console.log(this.myselfContact);
                //     subscription.unsubscribe();
                // }, err => subscription.unsubscribe());
                if (user != _this.userProfile ||
                    user && _this.userProfile && user.uid != _this.userProfile.uid) {
                    _this.userProfile$.next(user);
                }
            }
        });
    }
    Object.defineProperty(IbcFirebaseProvider.prototype, "user", {
        get: function () {
            return this.afAuth.authState;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IbcFirebaseProvider.prototype, "isAuthed", {
        get: function () {
            return this.afAuth && this.afAuth.auth && this.afAuth.auth.currentUser ? true : false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IbcFirebaseProvider.prototype, "providerData", {
        get: function () {
            if (this.afAuth &&
                this.afAuth.auth.currentUser &&
                this.afAuth.auth.currentUser.providerData &&
                this.afAuth.auth.currentUser.providerData.length > 0) {
                return this.afAuth.auth.currentUser.providerData;
            }
            else {
                return [];
            }
        },
        enumerable: true,
        configurable: true
    });
    /*=====  End of Failure Handlers  ======*/
    // Utility function called by both loginGoogle and linkGoogle
    IbcFirebaseProvider.prototype.googleAuth = function () {
        return this.googlePlus.login({
            // 'webClientId': '870700462998-0nfjspo3fkbqp1jft5jm985t41p5v0tj.apps.googleusercontent.com', // this is the web app client Id, not iOS client Id, nor Android client ID.
            'webClientId': '1050330285156-njj7aova0gar2q26l8spgu2hkv5fo7lb.apps.googleusercontent.com',
            'offline': true
        });
    };
    /* Old Android SHA-1: 49:70:97:F3:CB:99:31:40:F8:B7:95:9E:14:2F:8C:BD:40:C2:EB:16 */
    /* New Android SHA-1: FE:60:85:0E:F0:7F:A5:92:FF:DC:67:59:7A:E1:8B:C6:E5:92:83:D5 */
    /* Test Sign-In with custom token:
       firebase.auth().signInWithCustomToken(token).then(res => console.log(res))
     */
    IbcFirebaseProvider.prototype.loginGoogle = function () {
        var _this = this;
        /* SignIn to GooglePlus */
        this.loadTrackerSvc.loading = true;
        if (this.platform.is('core') || this.platform.is('mobileweb')) {
            return this.afAuth.auth.signInWithPopup(new __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"].GoogleAuthProvider())
                .then(this.providerAuthSuccessHandler, this.authFailureHandler);
            // .then(this.authSuccessHandler, this.authFailureHandler);
        }
        else {
            this.googleAuth().then(function (res) {
                /* SignIn to Firebase */
                var googleCredential = __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"].GoogleAuthProvider.credential(res.idToken);
                return __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"]().signInWithCredential(googleCredential)
                    .then(_this.providerAuthSuccessHandler, _this.authFailureHandler);
                // .then(this.authSuccessHandler, this.authFailureHandler);
            }, this.authFailureHandler);
        }
    };
    IbcFirebaseProvider.prototype.loginWechat = function () {
        var _this = this;
        /* SignIn to GooglePlus */
        this.loadTrackerSvc.loading = true;
        return this.wechatSvc.weChatLogin().then(function (res) {
            var data = res.json();
            if (data && data.token) {
                return __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"]().signInWithCustomToken(data.token).then(_this.authSuccessHandler, _this.authFailureHandler);
            }
        }, this.authFailureHandler);
    };
    IbcFirebaseProvider.prototype.logoutGoogle = function () {
        var _this = this;
        this.userProfile = null;
        this.userProfile$.next(this.userProfile);
        if (this.platform.is('core') || this.platform.is('mobileweb')) {
            return __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"]().signOut().then(function () { return _this.afAuth.auth.signOut(); });
        }
        else {
            return __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"]().signOut().then(function () {
                _this.googlePlus.logout();
            });
        }
    };
    // loginBrowser(): firebase.Promise<firebase.User> {
    //     this.beingLoggedIn = true;
    //     return this.afAuth.auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()).then((user) => {
    //         // console.log("Info (Browser): Sign-In successfully!");
    //         // console.log("Firebase success: " + JSON.stringify(user,null,2));
    //         this.userProfile = this.afAuth.auth.currentUser;
    //         this.userProfile$.next(this.userProfile);  
    //         this.beingLoggedIn = false;         
    //         return this.userProfile;
    //     }, err => {
    //         this.beingLoggedIn = false;
    //         console.error("Error (Browser): Sign-In failed: ", err)
    //     });
    // }
    // logoutBrowser(): firebase.Promise<any> {
    //     this.userProfile = null;
    //     this.userProfile$.next(this.userProfile);
    //     return firebase.auth().signOut().then(() => this.afAuth.auth.signOut());
    // }
    IbcFirebaseProvider.prototype.customLogin = function (username, password) {
        var _this = this;
        if (!username || !password)
            return;
        console.log(username);
        this.loadTrackerSvc.loading = true;
        this.http.post(__WEBPACK_IMPORTED_MODULE_14__app_env__["a" /* ENV */].apiServer + "/auth", {
            username: username,
            password: password
        }).subscribe(function (res) {
            var data = res.json();
            if (data && data.token) {
                // console.log(data.token);
                __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"]().signInWithCustomToken(data.token).then(_this.authSuccessHandler, _this.authFailureHandler);
            }
            else {
                _this.loadTrackerSvc.loading = false;
            }
        }, this.passwordFailureHandler);
    };
    IbcFirebaseProvider.prototype.linkGoogle = function () {
        var _this = this;
        var provider = new __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"].GoogleAuthProvider();
        var linkErrorHandler = function (error) {
            var toast = _this.toastCtrl.create({
                message: 'Google帳戶關聯失敗！',
                duration: 3000,
                position: 'top',
                cssClass: 'toast-danger'
            });
            toast.present();
            _this.loadTrackerSvc.loading = false;
        };
        var linkSuccessHandler = function (result) {
            console.log('=== gmail linked ===');
            console.log(JSON.stringify(result));
            var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]({
                Authorization: "Bearer " + result.uid,
                Accept: 'application/json',
                'Content-Type': 'application/json'
            });
            _this.http.post(__WEBPACK_IMPORTED_MODULE_14__app_env__["a" /* ENV */].apiServer + "/auth/changeemail", {
                email: result.email
            }, new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: headers })).subscribe(function (res) {
                var toast = _this.toastCtrl.create({
                    message: '成功關聯到Google帳戶',
                    duration: 3000,
                    position: 'top',
                    cssClass: 'toast-success'
                });
                toast.present();
                _this.loadTrackerSvc.loading = false;
                _this.providerAuthSuccessHandler();
            }, function (err) {
                linkErrorHandler(err);
            });
            // this.logoutGoogle();
            // window['result_user'] = result.user;
            // if (this.afAuth.auth.currentUser.providerData.length > 0) {
            //     let displayName = this.afAuth.auth.currentUser.providerData[0].displayName;
            //     let photoURL = this.afAuth.auth.currentUser.providerData[0].photoURL;
            //     this.updateAuthUserProfile(this.afAuth.auth.currentUser, displayName, photoURL);
            // }
        };
        this.loadTrackerSvc.loading = true;
        if (this.platform.is('core') || this.platform.is('mobileweb')) {
            this.afAuth.auth.currentUser.linkWithPopup(provider).then(linkSuccessHandler).catch(linkErrorHandler);
        }
        else {
            this.googleAuth().then(function (res) {
                var googleCredential = __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"].GoogleAuthProvider.credential(res.idToken);
                _this.afAuth.auth.currentUser.linkWithCredential(googleCredential).then(linkSuccessHandler).catch(linkErrorHandler);
            }, linkErrorHandler);
        }
    };
    IbcFirebaseProvider.prototype.linkWechat = function () {
        this.loadTrackerSvc.loading = true;
        this.wechatSvc.weChatLink(this.userProfile.uid)
            .then(this.successHandlerLinkWechat('成功關聯到WeChat帳戶'))
            .catch(this.failureHandlerLinkWechat('Wechat帳戶關聯失敗！'));
    };
    /* Ideally we should only use linkWechat/loginWechat. The reason why we must send another request
     via linkWeChatSendApiRequest/loginWeChatSendApiRequest is that deepLinks intercepts the incoming HTTP request such that
     the callback function from weChat.auth() will never be executed.

     linkWeChatSendApiRequest/loginWeChatSendApiRequest must be called within the routing logic from deepLinks.
     */
    IbcFirebaseProvider.prototype.linkWeChatSendApiRequest = function (code) {
        this.loadTrackerSvc.loading = true;
        this.wechatSvc.weChatLinkSendApiRequest(this.userProfile.uid, code)
            .subscribe(this.successHandlerLinkWechat('成功關聯到WeChat帳戶'), this.failureHandlerLinkWechat('Wechat帳戶關聯失敗！'));
    };
    IbcFirebaseProvider.prototype.loginWeChatSendApiRequest = function (code) {
        var _this = this;
        this.loadTrackerSvc.loading = true;
        this.wechatSvc.weChatLoginSendApiRequest(code)
            .subscribe(function (res) {
            var data = res.json();
            if (data && data.token) {
                return __WEBPACK_IMPORTED_MODULE_7_firebase_app__["auth"]().signInWithCustomToken(data.token).then(_this.authSuccessHandler, _this.authFailureHandler);
            }
        }, this.failureHandlerLinkWechat('Wechat登入失敗！'));
    };
    IbcFirebaseProvider.prototype.uploadFile = function (fileContent, options, successHandler, failureHandler) {
        if (!fileContent || !options) {
            console.error("Error: uploadFile function must have fileContent and options parameters");
        }
        var path = options.path;
        var encoding = options.encoding;
        var fileType = options.fileType;
        if (!path || !encoding || !fileType) {
            console.error('Error: uploadFile function must have path, encoding and fileType.');
        }
        try {
            var uploadTask_1 = __WEBPACK_IMPORTED_MODULE_7_firebase_app__["storage"]().ref(path).putString(fileContent, encoding, { contentType: fileType });
            uploadTask_1.on('state_changed', function (snapshot) {
            }, function (error) {
                console.log(JSON.stringify(error));
                failureHandler && failureHandler(error);
            }, function () {
                var downloadURL = uploadTask_1.snapshot.downloadURL;
                console.log(downloadURL);
                successHandler && successHandler(downloadURL);
            });
        }
        catch (error) {
            console.log(JSON.stringify(error));
            failureHandler && failureHandler(error);
        }
    };
    IbcFirebaseProvider.prototype.updateAuthUserEmail = function (user, email) {
        user.updateEmail(email).then(function () {
        }, function (error) {
        });
    };
    IbcFirebaseProvider.prototype.updateAuthUserProfile = function (user, displayName, photoURL) {
        user.updateProfile({
            displayName: displayName,
            photoURL: photoURL
        }).then(function () {
            // Update successful.
        }).catch(function (error) {
            // An error happened.
        });
    };
    IbcFirebaseProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_4_angularfire2_database__["a" /* AngularFireDatabase */],
            __WEBPACK_IMPORTED_MODULE_6_angularfire2_auth__["a" /* AngularFireAuth */],
            __WEBPACK_IMPORTED_MODULE_5_angularfire2_firestore__["a" /* AngularFirestore */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_google_plus__["a" /* GooglePlus */],
            __WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */],
            __WEBPACK_IMPORTED_MODULE_12__load_tracker_load_tracker__["a" /* LoadTrackerProvider */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_11__audio_audio__["a" /* AudioProvider */],
            __WEBPACK_IMPORTED_MODULE_13__wechat_wechat__["a" /* WechatProvider */]])
    ], IbcFirebaseProvider);
    return IbcFirebaseProvider;
}());

//# sourceMappingURL=ibc-firebase.js.map

/***/ }),

/***/ 38:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WechatProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_http__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__app_env__ = __webpack_require__(41);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_load_tracker_load_tracker__ = __webpack_require__(30);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the WechatProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var WechatProvider = (function () {
    function WechatProvider(http, loadTrackerSvc) {
        this.http = http;
        this.loadTrackerSvc = loadTrackerSvc;
    }
    WechatProvider.prototype.wechatInstalled = function () {
        return new Promise(function (resolve, reject) {
            Wechat.isInstalled(resolve, reject);
        });
    };
    WechatProvider.prototype.weChatLogin = function () {
        var _this = this;
        var scope = "snsapi_userinfo", state = "_" + (+new Date());
        this.LoggingInProgress = true;
        return new Promise(function (resolve, reject) {
            Wechat.auth(scope, state, function (response) {
                // you may use response.code to get the access token.
                // console.log(`code = ${response.code}`);
                // resolve(response);
                _this.http.post(__WEBPACK_IMPORTED_MODULE_2__app_env__["a" /* ENV */].apiServer + "/wechat/login", { code: response.code }).subscribe(function (res) {
                    _this.LoggingInProgress = false;
                    resolve(res);
                }, function (err) {
                    _this.LoggingInProgress = false;
                    reject(err);
                });
                // this.weChatShare();
            }, reject);
        });
    };
    WechatProvider.prototype.weChatLoginSendApiRequest = function (code) {
        var _this = this;
        return this.http.post(__WEBPACK_IMPORTED_MODULE_2__app_env__["a" /* ENV */].apiServer + "/wechat/login", { code: code }).do(function () {
            console.log('========= weChat successfully logged in! ===========');
            _this.LoggingInProgress = false;
        });
    };
    WechatProvider.prototype.weChatLink = function (uid) {
        var _this = this;
        var scope = "snsapi_userinfo", state = "_" + (+new Date());
        var headers = new __WEBPACK_IMPORTED_MODULE_0__angular_http__["a" /* Headers */]({
            Authorization: "Bearer " + uid,
            Accept: 'application/json',
            'Content-Type': 'application/json'
        });
        this.linkingInProgress = true;
        return new Promise(function (resolve, reject) {
            Wechat.auth(scope, state, function (response) {
                _this.linkingInProgress = false;
                _this.http.post(__WEBPACK_IMPORTED_MODULE_2__app_env__["a" /* ENV */].apiServer + "/wechat/associate", { code: response.code }, new __WEBPACK_IMPORTED_MODULE_0__angular_http__["d" /* RequestOptions */]({ headers: headers })).subscribe(function (res) {
                    _this.linkingInProgress = false;
                    resolve(res);
                }, function (err) {
                    _this.linkingInProgress = false;
                    reject(err);
                });
                // this.weChatShare();
            }, function (err) {
                _this.linkingInProgress = false;
                reject(err);
            });
        });
    };
    WechatProvider.prototype.weChatLinkSendApiRequest = function (fbAuthUid, code) {
        var _this = this;
        var headers = new __WEBPACK_IMPORTED_MODULE_0__angular_http__["a" /* Headers */]({
            Authorization: "Bearer " + fbAuthUid,
            Accept: 'application/json',
            'Content-Type': 'application/json'
        });
        // console.log('======= calling weChatLinkSendApiRequest =========');
        // console.log(`authUid = ${fbAuthUid}; code = ${code}`);
        return this.http.post(__WEBPACK_IMPORTED_MODULE_2__app_env__["a" /* ENV */].apiServer + "/wechat/associate", { code: code }, new __WEBPACK_IMPORTED_MODULE_0__angular_http__["d" /* RequestOptions */]({ headers: headers })).do(function () {
            console.log('========= weChat successfully linked! ===========');
            _this.linkingInProgress = false;
        });
    };
    WechatProvider.prototype.weChatShareLink = function (webpageUrl, title, description, thumb) {
        var _this = this;
        this.loadTrackerSvc.loading = true;
        var params = {
            scene: 0,
            message: {
                title: title,
                description: description,
                thumb: thumb,
                media: {
                    type: Wechat.Type.LINK,
                    webpageUrl: webpageUrl
                }
            }
        };
        Wechat.share(params, function () {
            _this.loadTrackerSvc.loading = false;
        }, function (reason) {
            _this.loadTrackerSvc.loading = false;
        });
        setTimeout(function () {
            _this.loadTrackerSvc.loading = false;
        }, 10000);
    };
    WechatProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_http__["b" /* Http */], __WEBPACK_IMPORTED_MODULE_3__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */]])
    ], WechatProvider);
    return WechatProvider;
}());

//# sourceMappingURL=wechat.js.map

/***/ }),

/***/ 41:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ENV; });
var ENV = {
    mode: 'Development',
    version: '0.3.2',
    // apiServer: 'http://192.168.0.160:3000',
    // apiServer: 'http://192.168.0.3:3000',
    // apiServer: 'http://localhost:3000',
    // apiServer: 'http://192.168.0.30:3000',
    // apiServer: 'http://192.168.0.21:3000',
    apiServer: '',
    firebaseConfig: {
        apiKey: "AIzaSyA-m-AkKYqeKusk0aXgdZax9n5MbRngyj0",
        authDomain: "ibc-app-94466.firebaseapp.com",
        databaseURL: "https://ibc-app-94466-c9f76.firebaseio.com",
        projectId: "ibc-app-94466",
        storageBucket: "ibc-app-94466.appspot.com",
        messagingSenderId: "1050330285156"
    }
    // firebaseConfig: { // PROD FireDB
    //   apiKey: "AIzaSyA-m-AkKYqeKusk0aXgdZax9n5MbRngyj0",
    //   authDomain: "ibc-app-94466.firebaseapp.com",
    //   databaseURL: "https://ibc-app-94466.firebaseio.com",
    //   projectId: "ibc-app-94466",
    //   storageBucket: "ibc-app-94466.appspot.com",
    //   messagingSenderId: "1050330285156"
    // }  
};
//# sourceMappingURL=environment.dev.js.map

/***/ }),

/***/ 56:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return S2tProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(33);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/*
  Generated class for the S2tProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
// 共收录2553条简繁对照
// 尚未考证是否正确、重复、完整
/**
 * 简体字
 * @const
 */
var S = new String('万与丑专业丛东丝丢两严丧个丬丰临为丽举么义乌乐乔习乡书买乱争于亏云亘亚产亩亲亵亸亿仅从仑仓仪们价众优伙会伛伞伟传伤伥伦伧伪伫体余佣佥侠侣侥侦侧侨侩侪侬俣俦俨俩俪俭债倾偬偻偾偿傥傧储傩儿兑兖党兰关兴兹养兽冁内冈册写军农冢冯冲决况冻净凄凉凌减凑凛几凤凫凭凯击凼凿刍划刘则刚创删别刬刭刽刿剀剂剐剑剥剧劝办务劢动励劲劳势勋勐勚匀匦匮区医华协单卖卢卤卧卫却卺厂厅历厉压厌厍厕厢厣厦厨厩厮县参叆叇双发变叙叠叶号叹叽吁后吓吕吗吣吨听启吴呒呓呕呖呗员呙呛呜咏咔咙咛咝咤咴咸哌响哑哒哓哔哕哗哙哜哝哟唛唝唠唡唢唣唤唿啧啬啭啮啰啴啸喷喽喾嗫呵嗳嘘嘤嘱噜噼嚣嚯团园囱围囵国图圆圣圹场坂坏块坚坛坜坝坞坟坠垄垅垆垒垦垧垩垫垭垯垱垲垴埘埙埚埝埯堑堕塆墙壮声壳壶壸处备复够头夸夹夺奁奂奋奖奥妆妇妈妩妪妫姗姜娄娅娆娇娈娱娲娴婳婴婵婶媪嫒嫔嫱嬷孙学孪宁宝实宠审宪宫宽宾寝对寻导寿将尔尘尧尴尸尽层屃屉届属屡屦屿岁岂岖岗岘岙岚岛岭岳岽岿峃峄峡峣峤峥峦崂崃崄崭嵘嵚嵛嵝嵴巅巩巯币帅师帏帐帘帜带帧帮帱帻帼幂幞干并广庄庆庐庑库应庙庞废庼廪开异弃张弥弪弯弹强归当录彟彦彻径徕御忆忏忧忾怀态怂怃怄怅怆怜总怼怿恋恳恶恸恹恺恻恼恽悦悫悬悭悯惊惧惨惩惫惬惭惮惯愍愠愤愦愿慑慭憷懑懒懔戆戋戏戗战戬户扎扑扦执扩扪扫扬扰抚抛抟抠抡抢护报担拟拢拣拥拦拧拨择挂挚挛挜挝挞挟挠挡挢挣挤挥挦捞损捡换捣据捻掳掴掷掸掺掼揸揽揿搀搁搂搅携摄摅摆摇摈摊撄撑撵撷撸撺擞攒敌敛数斋斓斗斩断无旧时旷旸昙昼昽显晋晒晓晔晕晖暂暧札术朴机杀杂权条来杨杩杰极构枞枢枣枥枧枨枪枫枭柜柠柽栀栅标栈栉栊栋栌栎栏树栖样栾桊桠桡桢档桤桥桦桧桨桩梦梼梾检棂椁椟椠椤椭楼榄榇榈榉槚槛槟槠横樯樱橥橱橹橼檐檩欢欤欧歼殁殇残殒殓殚殡殴毁毂毕毙毡毵氇气氢氩氲汇汉污汤汹沓沟没沣沤沥沦沧沨沩沪沵泞泪泶泷泸泺泻泼泽泾洁洒洼浃浅浆浇浈浉浊测浍济浏浐浑浒浓浔浕涂涌涛涝涞涟涠涡涢涣涤润涧涨涩淀渊渌渍渎渐渑渔渖渗温游湾湿溃溅溆溇滗滚滞滟滠满滢滤滥滦滨滩滪漤潆潇潋潍潜潴澜濑濒灏灭灯灵灾灿炀炉炖炜炝点炼炽烁烂烃烛烟烦烧烨烩烫烬热焕焖焘煅煳熘爱爷牍牦牵牺犊犟状犷犸犹狈狍狝狞独狭狮狯狰狱狲猃猎猕猡猪猫猬献獭玑玙玚玛玮环现玱玺珉珏珐珑珰珲琎琏琐琼瑶瑷璇璎瓒瓮瓯电画畅畲畴疖疗疟疠疡疬疮疯疱疴痈痉痒痖痨痪痫痴瘅瘆瘗瘘瘪瘫瘾瘿癞癣癫癯皑皱皲盏盐监盖盗盘眍眦眬着睁睐睑瞒瞩矫矶矾矿砀码砖砗砚砜砺砻砾础硁硅硕硖硗硙硚确硷碍碛碜碱碹磙礼祎祢祯祷祸禀禄禅离秃秆种积称秽秾稆税稣稳穑穷窃窍窑窜窝窥窦窭竖竞笃笋笔笕笺笼笾筑筚筛筜筝筹签简箓箦箧箨箩箪箫篑篓篮篱簖籁籴类籼粜粝粤粪粮糁糇紧絷纟纠纡红纣纤纥约级纨纩纪纫纬纭纮纯纰纱纲纳纴纵纶纷纸纹纺纻纼纽纾线绀绁绂练组绅细织终绉绊绋绌绍绎经绐绑绒结绔绕绖绗绘给绚绛络绝绞统绠绡绢绣绤绥绦继绨绩绪绫绬续绮绯绰绱绲绳维绵绶绷绸绹绺绻综绽绾绿缀缁缂缃缄缅缆缇缈缉缊缋缌缍缎缏缐缑缒缓缔缕编缗缘缙缚缛缜缝缞缟缠缡缢缣缤缥缦缧缨缩缪缫缬缭缮缯缰缱缲缳缴缵罂网罗罚罢罴羁羟羡翘翙翚耢耧耸耻聂聋职聍联聩聪肃肠肤肷肾肿胀胁胆胜胧胨胪胫胶脉脍脏脐脑脓脔脚脱脶脸腊腌腘腭腻腼腽腾膑臜舆舣舰舱舻艰艳艹艺节芈芗芜芦苁苇苈苋苌苍苎苏苘苹茎茏茑茔茕茧荆荐荙荚荛荜荞荟荠荡荣荤荥荦荧荨荩荪荫荬荭荮药莅莜莱莲莳莴莶获莸莹莺莼萚萝萤营萦萧萨葱蒇蒉蒋蒌蓝蓟蓠蓣蓥蓦蔷蔹蔺蔼蕲蕴薮藁藓虏虑虚虫虬虮虽虾虿蚀蚁蚂蚕蚝蚬蛊蛎蛏蛮蛰蛱蛲蛳蛴蜕蜗蜡蝇蝈蝉蝎蝼蝾螀螨蟏衅衔补衬衮袄袅袆袜袭袯装裆裈裢裣裤裥褛褴襁襕见观觃规觅视觇览觉觊觋觌觍觎觏觐觑觞触觯詟誉誊讠计订讣认讥讦讧讨让讪讫训议讯记讱讲讳讴讵讶讷许讹论讻讼讽设访诀证诂诃评诅识诇诈诉诊诋诌词诎诏诐译诒诓诔试诖诗诘诙诚诛诜话诞诟诠诡询诣诤该详诧诨诩诪诫诬语诮误诰诱诲诳说诵诶请诸诹诺读诼诽课诿谀谁谂调谄谅谆谇谈谊谋谌谍谎谏谐谑谒谓谔谕谖谗谘谙谚谛谜谝谞谟谠谡谢谣谤谥谦谧谨谩谪谫谬谭谮谯谰谱谲谳谴谵谶谷豮贝贞负贠贡财责贤败账货质贩贪贫贬购贮贯贰贱贲贳贴贵贶贷贸费贺贻贼贽贾贿赀赁赂赃资赅赆赇赈赉赊赋赌赍赎赏赐赑赒赓赔赕赖赗赘赙赚赛赜赝赞赟赠赡赢赣赪赵赶趋趱趸跃跄跖跞践跶跷跸跹跻踊踌踪踬踯蹑蹒蹰蹿躏躜躯车轧轨轩轪轫转轭轮软轰轱轲轳轴轵轶轷轸轹轺轻轼载轾轿辀辁辂较辄辅辆辇辈辉辊辋辌辍辎辏辐辑辒输辔辕辖辗辘辙辚辞辩辫边辽达迁过迈运还这进远违连迟迩迳迹适选逊递逦逻遗遥邓邝邬邮邹邺邻郁郄郏郐郑郓郦郧郸酝酦酱酽酾酿释里鉅鉴銮錾钆钇针钉钊钋钌钍钎钏钐钑钒钓钔钕钖钗钘钙钚钛钝钞钟钠钡钢钣钤钥钦钧钨钩钪钫钬钭钮钯钰钱钲钳钴钵钶钷钸钹钺钻钼钽钾钿铀铁铂铃铄铅铆铈铉铊铋铍铎铏铐铑铒铕铗铘铙铚铛铜铝铞铟铠铡铢铣铤铥铦铧铨铪铫铬铭铮铯铰铱铲铳铴铵银铷铸铹铺铻铼铽链铿销锁锂锃锄锅锆锇锈锉锊锋锌锍锎锏锐锑锒锓锔锕锖锗错锚锜锞锟锠锡锢锣锤锥锦锨锩锫锬锭键锯锰锱锲锳锴锵锶锷锸锹锺锻锼锽锾锿镀镁镂镃镆镇镈镉镊镌镍镎镏镐镑镒镕镖镗镙镚镛镜镝镞镟镠镡镢镣镤镥镦镧镨镩镪镫镬镭镮镯镰镱镲镳镴镶长门闩闪闫闬闭问闯闰闱闲闳间闵闶闷闸闹闺闻闼闽闾闿阀阁阂阃阄阅阆阇阈阉阊阋阌阍阎阏阐阑阒阓阔阕阖阗阘阙阚阛队阳阴阵阶际陆陇陈陉陕陧陨险随隐隶隽难雏雠雳雾霁霉霭靓静靥鞑鞒鞯鞴韦韧韨韩韪韫韬韵页顶顷顸项顺须顼顽顾顿颀颁颂颃预颅领颇颈颉颊颋颌颍颎颏颐频颒颓颔颕颖颗题颙颚颛颜额颞颟颠颡颢颣颤颥颦颧风飏飐飑飒飓飔飕飖飗飘飙飚飞飨餍饤饥饦饧饨饩饪饫饬饭饮饯饰饱饲饳饴饵饶饷饸饹饺饻饼饽饾饿馀馁馂馃馄馅馆馇馈馉馊馋馌馍馎馏馐馑馒馓馔馕马驭驮驯驰驱驲驳驴驵驶驷驸驹驺驻驼驽驾驿骀骁骂骃骄骅骆骇骈骉骊骋验骍骎骏骐骑骒骓骔骕骖骗骘骙骚骛骜骝骞骟骠骡骢骣骤骥骦骧髅髋髌鬓魇魉鱼鱽鱾鱿鲀鲁鲂鲄鲅鲆鲇鲈鲉鲊鲋鲌鲍鲎鲏鲐鲑鲒鲓鲔鲕鲖鲗鲘鲙鲚鲛鲜鲝鲞鲟鲠鲡鲢鲣鲤鲥鲦鲧鲨鲩鲪鲫鲬鲭鲮鲯鲰鲱鲲鲳鲴鲵鲶鲷鲸鲹鲺鲻鲼鲽鲾鲿鳀鳁鳂鳃鳄鳅鳆鳇鳈鳉鳊鳋鳌鳍鳎鳏鳐鳑鳒鳓鳔鳕鳖鳗鳘鳙鳛鳜鳝鳞鳟鳠鳡鳢鳣鸟鸠鸡鸢鸣鸤鸥鸦鸧鸨鸩鸪鸫鸬鸭鸮鸯鸰鸱鸲鸳鸴鸵鸶鸷鸸鸹鸺鸻鸼鸽鸾鸿鹀鹁鹂鹃鹄鹅鹆鹇鹈鹉鹊鹋鹌鹍鹎鹏鹐鹑鹒鹓鹔鹕鹖鹗鹘鹚鹛鹜鹝鹞鹟鹠鹡鹢鹣鹤鹥鹦鹧鹨鹩鹪鹫鹬鹭鹯鹰鹱鹲鹳鹴鹾麦麸黄黉黡黩黪黾鼋鼌鼍鼗鼹齄齐齑齿龀龁龂龃龄龅龆龇龈龉龊龋龌龙龚龛龟志制咨只里系范松没尝尝闹面准钟别闲干尽脏拼');
/**
 * 繁体字
 * @const
 */
var T = new String('萬與醜專業叢東絲丟兩嚴喪個爿豐臨為麗舉麼義烏樂喬習鄉書買亂爭於虧雲亙亞產畝親褻嚲億僅從侖倉儀們價眾優夥會傴傘偉傳傷倀倫傖偽佇體餘傭僉俠侶僥偵側僑儈儕儂俁儔儼倆儷儉債傾傯僂僨償儻儐儲儺兒兌兗黨蘭關興茲養獸囅內岡冊寫軍農塚馮衝決況凍淨淒涼淩減湊凜幾鳳鳧憑凱擊氹鑿芻劃劉則剛創刪別剗剄劊劌剴劑剮劍剝劇勸辦務勱動勵勁勞勢勳猛勩勻匭匱區醫華協單賣盧鹵臥衛卻巹廠廳曆厲壓厭厙廁廂厴廈廚廄廝縣參靉靆雙發變敘疊葉號歎嘰籲後嚇呂嗎唚噸聽啟吳嘸囈嘔嚦唄員咼嗆嗚詠哢嚨嚀噝吒噅鹹呱響啞噠嘵嗶噦嘩噲嚌噥喲嘜嗊嘮啢嗩唕喚呼嘖嗇囀齧囉嘽嘯噴嘍嚳囁嗬噯噓嚶囑嚕劈囂謔團園囪圍圇國圖圓聖壙場阪壞塊堅壇壢壩塢墳墜壟壟壚壘墾坰堊墊埡墶壋塏堖塒塤堝墊垵塹墮壪牆壯聲殼壺壼處備複夠頭誇夾奪奩奐奮獎奧妝婦媽嫵嫗媯姍薑婁婭嬈嬌孌娛媧嫻嫿嬰嬋嬸媼嬡嬪嬙嬤孫學孿寧寶實寵審憲宮寬賓寢對尋導壽將爾塵堯尷屍盡層屭屜屆屬屢屨嶼歲豈嶇崗峴嶴嵐島嶺嶽崠巋嶨嶧峽嶢嶠崢巒嶗崍嶮嶄嶸嶔崳嶁脊巔鞏巰幣帥師幃帳簾幟帶幀幫幬幘幗冪襆幹並廣莊慶廬廡庫應廟龐廢廎廩開異棄張彌弳彎彈強歸當錄彠彥徹徑徠禦憶懺憂愾懷態慫憮慪悵愴憐總懟懌戀懇惡慟懨愷惻惱惲悅愨懸慳憫驚懼慘懲憊愜慚憚慣湣慍憤憒願懾憖怵懣懶懍戇戔戲戧戰戩戶紮撲扡執擴捫掃揚擾撫拋摶摳掄搶護報擔擬攏揀擁攔擰撥擇掛摯攣掗撾撻挾撓擋撟掙擠揮撏撈損撿換搗據撚擄摑擲撣摻摜摣攬撳攙擱摟攪攜攝攄擺搖擯攤攖撐攆擷擼攛擻攢敵斂數齋斕鬥斬斷無舊時曠暘曇晝曨顯晉曬曉曄暈暉暫曖劄術樸機殺雜權條來楊榪傑極構樅樞棗櫪梘棖槍楓梟櫃檸檉梔柵標棧櫛櫳棟櫨櫟欄樹棲樣欒棬椏橈楨檔榿橋樺檜槳樁夢檮棶檢欞槨櫝槧欏橢樓欖櫬櫚櫸檟檻檳櫧橫檣櫻櫫櫥櫓櫞簷檁歡歟歐殲歿殤殘殞殮殫殯毆毀轂畢斃氈毿氌氣氫氬氳彙漢汙湯洶遝溝沒灃漚瀝淪滄渢溈滬濔濘淚澩瀧瀘濼瀉潑澤涇潔灑窪浹淺漿澆湞溮濁測澮濟瀏滻渾滸濃潯濜塗湧濤澇淶漣潿渦溳渙滌潤澗漲澀澱淵淥漬瀆漸澠漁瀋滲溫遊灣濕潰濺漵漊潷滾滯灩灄滿瀅濾濫灤濱灘澦濫瀠瀟瀲濰潛瀦瀾瀨瀕灝滅燈靈災燦煬爐燉煒熗點煉熾爍爛烴燭煙煩燒燁燴燙燼熱煥燜燾煆糊溜愛爺牘犛牽犧犢強狀獷獁猶狽麅獮獰獨狹獅獪猙獄猻獫獵獼玀豬貓蝟獻獺璣璵瑒瑪瑋環現瑲璽瑉玨琺瓏璫琿璡璉瑣瓊瑤璦璿瓔瓚甕甌電畫暢佘疇癤療瘧癘瘍鬁瘡瘋皰屙癰痙癢瘂癆瘓癇癡癉瘮瘞瘺癟癱癮癭癩癬癲臒皚皺皸盞鹽監蓋盜盤瞘眥矓著睜睞瞼瞞矚矯磯礬礦碭碼磚硨硯碸礪礱礫礎硜矽碩硤磽磑礄確鹼礙磧磣堿镟滾禮禕禰禎禱禍稟祿禪離禿稈種積稱穢穠穭稅穌穩穡窮竊竅窯竄窩窺竇窶豎競篤筍筆筧箋籠籩築篳篩簹箏籌簽簡籙簀篋籜籮簞簫簣簍籃籬籪籟糴類秈糶糲粵糞糧糝餱緊縶糸糾紆紅紂纖紇約級紈纊紀紉緯紜紘純紕紗綱納紝縱綸紛紙紋紡紵紖紐紓線紺絏紱練組紳細織終縐絆紼絀紹繹經紿綁絨結絝繞絰絎繪給絢絳絡絕絞統綆綃絹繡綌綏絛繼綈績緒綾緓續綺緋綽緔緄繩維綿綬繃綢綯綹綣綜綻綰綠綴緇緙緗緘緬纜緹緲緝縕繢緦綞緞緶線緱縋緩締縷編緡緣縉縛縟縝縫縗縞纏縭縊縑繽縹縵縲纓縮繆繅纈繚繕繒韁繾繰繯繳纘罌網羅罰罷羆羈羥羨翹翽翬耮耬聳恥聶聾職聹聯聵聰肅腸膚膁腎腫脹脅膽勝朧腖臚脛膠脈膾髒臍腦膿臠腳脫腡臉臘醃膕齶膩靦膃騰臏臢輿艤艦艙艫艱豔艸藝節羋薌蕪蘆蓯葦藶莧萇蒼苧蘇檾蘋莖蘢蔦塋煢繭荊薦薘莢蕘蓽蕎薈薺蕩榮葷滎犖熒蕁藎蓀蔭蕒葒葤藥蒞蓧萊蓮蒔萵薟獲蕕瑩鶯蓴蘀蘿螢營縈蕭薩蔥蕆蕢蔣蔞藍薊蘺蕷鎣驀薔蘞藺藹蘄蘊藪槁蘚虜慮虛蟲虯蟣雖蝦蠆蝕蟻螞蠶蠔蜆蠱蠣蟶蠻蟄蛺蟯螄蠐蛻蝸蠟蠅蟈蟬蠍螻蠑螿蟎蠨釁銜補襯袞襖嫋褘襪襲襏裝襠褌褳襝褲襇褸襤繈襴見觀覎規覓視覘覽覺覬覡覿覥覦覯覲覷觴觸觶讋譽謄訁計訂訃認譏訐訌討讓訕訖訓議訊記訒講諱謳詎訝訥許訛論訩訟諷設訪訣證詁訶評詛識詗詐訴診詆謅詞詘詔詖譯詒誆誄試詿詩詰詼誠誅詵話誕詬詮詭詢詣諍該詳詫諢詡譸誡誣語誚誤誥誘誨誑說誦誒請諸諏諾讀諑誹課諉諛誰諗調諂諒諄誶談誼謀諶諜謊諫諧謔謁謂諤諭諼讒諮諳諺諦謎諞諝謨讜謖謝謠謗諡謙謐謹謾謫譾謬譚譖譙讕譜譎讞譴譫讖穀豶貝貞負貟貢財責賢敗賬貨質販貪貧貶購貯貫貳賤賁貰貼貴貺貸貿費賀貽賊贄賈賄貲賃賂贓資賅贐賕賑賚賒賦賭齎贖賞賜贔賙賡賠賧賴賵贅賻賺賽賾贗讚贇贈贍贏贛赬趙趕趨趲躉躍蹌蹠躒踐躂蹺蹕躚躋踴躊蹤躓躑躡蹣躕躥躪躦軀車軋軌軒軑軔轉軛輪軟轟軲軻轤軸軹軼軤軫轢軺輕軾載輊轎輈輇輅較輒輔輛輦輩輝輥輞輬輟輜輳輻輯轀輸轡轅轄輾轆轍轔辭辯辮邊遼達遷過邁運還這進遠違連遲邇逕跡適選遜遞邐邏遺遙鄧鄺鄔郵鄒鄴鄰鬱郤郟鄶鄭鄆酈鄖鄲醞醱醬釅釃釀釋裏钜鑒鑾鏨釓釔針釘釗釙釕釷釺釧釤鈒釩釣鍆釹鍚釵鈃鈣鈈鈦鈍鈔鍾鈉鋇鋼鈑鈐鑰欽鈞鎢鉤鈧鈁鈥鈄鈕鈀鈺錢鉦鉗鈷缽鈳鉕鈽鈸鉞鑽鉬鉭鉀鈿鈾鐵鉑鈴鑠鉛鉚鈰鉉鉈鉍鈹鐸鉶銬銠鉺銪鋏鋣鐃銍鐺銅鋁銱銦鎧鍘銖銑鋌銩銛鏵銓鉿銚鉻銘錚銫鉸銥鏟銃鐋銨銀銣鑄鐒鋪鋙錸鋱鏈鏗銷鎖鋰鋥鋤鍋鋯鋨鏽銼鋝鋒鋅鋶鐦鐧銳銻鋃鋟鋦錒錆鍺錯錨錡錁錕錩錫錮鑼錘錐錦鍁錈錇錟錠鍵鋸錳錙鍥鍈鍇鏘鍶鍔鍤鍬鍾鍛鎪鍠鍰鎄鍍鎂鏤鎡鏌鎮鎛鎘鑷鐫鎳鎿鎦鎬鎊鎰鎔鏢鏜鏍鏰鏞鏡鏑鏃鏇鏐鐔钁鐐鏷鑥鐓鑭鐠鑹鏹鐙鑊鐳鐶鐲鐮鐿鑔鑣鑞鑲長門閂閃閆閈閉問闖閏闈閑閎間閔閌悶閘鬧閨聞闥閩閭闓閥閣閡閫鬮閱閬闍閾閹閶鬩閿閽閻閼闡闌闃闠闊闋闔闐闒闕闞闤隊陽陰陣階際陸隴陳陘陝隉隕險隨隱隸雋難雛讎靂霧霽黴靄靚靜靨韃鞽韉韝韋韌韍韓韙韞韜韻頁頂頃頇項順須頊頑顧頓頎頒頌頏預顱領頗頸頡頰頲頜潁熲頦頤頻頮頹頷頴穎顆題顒顎顓顏額顳顢顛顙顥纇顫顬顰顴風颺颭颮颯颶颸颼颻飀飄飆飆飛饗饜飣饑飥餳飩餼飪飫飭飯飲餞飾飽飼飿飴餌饒餉餄餎餃餏餅餑餖餓餘餒餕餜餛餡館餷饋餶餿饞饁饃餺餾饈饉饅饊饌饢馬馭馱馴馳驅馹駁驢駔駛駟駙駒騶駐駝駑駕驛駘驍罵駰驕驊駱駭駢驫驪騁驗騂駸駿騏騎騍騅騌驌驂騙騭騤騷騖驁騮騫騸驃騾驄驏驟驥驦驤髏髖髕鬢魘魎魚魛魢魷魨魯魴魺鮁鮃鯰鱸鮋鮓鮒鮊鮑鱟鮍鮐鮭鮚鮳鮪鮞鮦鰂鮜鱠鱭鮫鮮鮺鯗鱘鯁鱺鰱鰹鯉鰣鰷鯀鯊鯇鮶鯽鯒鯖鯪鯕鯫鯡鯤鯧鯝鯢鯰鯛鯨鯵鯴鯔鱝鰈鰏鱨鯷鰮鰃鰓鱷鰍鰒鰉鰁鱂鯿鰠鼇鰭鰨鰥鰩鰟鰜鰳鰾鱈鱉鰻鰵鱅鰼鱖鱔鱗鱒鱯鱤鱧鱣鳥鳩雞鳶鳴鳲鷗鴉鶬鴇鴆鴣鶇鸕鴨鴞鴦鴒鴟鴝鴛鴬鴕鷥鷙鴯鴰鵂鴴鵃鴿鸞鴻鵐鵓鸝鵑鵠鵝鵒鷳鵜鵡鵲鶓鵪鶤鵯鵬鵮鶉鶊鵷鷫鶘鶡鶚鶻鶿鶥鶩鷊鷂鶲鶹鶺鷁鶼鶴鷖鸚鷓鷚鷯鷦鷲鷸鷺鸇鷹鸌鸏鸛鸘鹺麥麩黃黌黶黷黲黽黿鼂鼉鞀鼴齇齊齏齒齔齕齗齟齡齙齠齜齦齬齪齲齷龍龔龕龜誌製谘隻裡係範鬆冇嚐嘗鬨麵準鐘彆閒乾儘臟拚');
var S2tProvider = (function () {
    function S2tProvider(http) {
        this.http = http;
    }
    /**
     * 转换文本
     * @param {String} str - 待转换的文本
     * @param {Boolean} toT - 是否转换成繁体
     * @returns {String} - 转换结果
     */
    S2tProvider.prototype.tranStr = function (str, toT) {
        var i;
        var letter;
        var code;
        var isChinese;
        var index;
        var src, des;
        var result = '';
        if (toT) {
            src = S;
            des = T;
        }
        else {
            src = T;
            des = S;
        }
        if (typeof str !== "string") {
            return str;
        }
        for (i = 0; i < str.length; i++) {
            letter = str.charAt(i);
            code = str.charCodeAt(i);
            // 根据字符的Unicode判断是否为汉字，以提高性能
            // 参考:
            // [1] http://www.unicode.org
            // [2] http://zh.wikipedia.org/wiki/Unicode%E5%AD%97%E7%AC%A6%E5%88%97%E8%A1%A8
            // [3] http://xylonwang.iteye.com/blog/519552
            isChinese = (code > 0x3400 && code < 0x9FC3) || (code > 0xF900 && code < 0xFA6A);
            if (!isChinese) {
                result += letter;
                continue;
            }
            index = src.indexOf(letter);
            if (index !== -1) {
                result += des.charAt(index);
            }
            else {
                result += letter;
            }
        }
        return result;
    };
    /**
   * 转换HTML Element属性
   * @param {Element} element - 待转换的HTML Element节点
   * @param {String|Array} attr - 待转换的属性/属性列表
   * @param {Boolean} toT - 是否转换成繁体
   */
    S2tProvider.prototype.tranAttr = function (element, attr, toT) {
        var i, attrValue;
        if (attr instanceof Array) {
            for (i = 0; i < attr.length; i++) {
                this.tranAttr(element, attr[i], toT);
            }
        }
        else {
            attrValue = element.getAttribute(attr);
            if (attrValue !== "" && attrValue !== null) {
                element.setAttribute(attr, this.tranStr(attrValue, toT));
            }
        }
    };
    /**
     * 转换HTML Element节点
     * @param {Element} element - 待转换的HTML Element节点
     * @param {Boolean} toT - 是否转换成繁体
     */
    S2tProvider.prototype.tranElement = function (element, toT) {
        var i;
        var childNodes;
        if (element.nodeType !== 1) {
            return;
        }
        childNodes = element.childNodes;
        for (i = 0; i < childNodes.length; i++) {
            var childNode = childNodes.item(i);
            // 若为HTML Element节点
            if (childNode.nodeType === 1) {
                // 对以下标签不做处理
                if ("|BR|HR|TEXTAREA|SCRIPT|OBJECT|EMBED|".indexOf("|" + childNode.tagName + "|") !== -1) {
                    continue;
                }
                this.tranAttr(childNode, ['title', 'data-original-title', 'alt', 'placeholder'], toT);
                // input 标签
                // 对text类型的input输入框不做处理
                if (childNode.tagName === "INPUT"
                    && childNode.value !== ""
                    && childNode.type !== "text"
                    && childNode.type !== "hidden") {
                    childNode.value = this.tranStr(childNode.value, toT);
                }
                // 继续递归调用
                this.tranElement(childNode, toT);
            }
            else if (childNode.nodeType === 3) {
                childNode.data = this.tranStr(childNode.data, toT);
            }
        }
    };
    S2tProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */]])
    ], S2tProvider);
    return S2tProvider;
}());

//# sourceMappingURL=s2t.js.map

/***/ }),

/***/ 57:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IbcHttpProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__app_env__ = __webpack_require__(41);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/*
  Generated class for the IbcHttpProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var IbcHttpProvider = (function () {
    function IbcHttpProvider(http, ibcFB, loadTrackerSvc) {
        var _this = this;
        this.http = http;
        this.ibcFB = ibcFB;
        this.loadTrackerSvc = loadTrackerSvc;
        console.log('Hello IbcHttpProvider Provider');
        this.ibcFB.userProfile$.filter(function (auth) { return auth != null; }).subscribe(function (auth) {
            console.log('--- auth ---');
            console.log(auth);
            _this.headers = { Authorization: "Bearer " + auth.uid, Accept: 'application/json', 'Content-Type': 'application/json' };
        });
    }
    IbcHttpProvider.prototype.get = function (url) {
        var _this = this;
        this.loadTrackerSvc.loading = true;
        return this.http.get(__WEBPACK_IMPORTED_MODULE_4__app_env__["a" /* ENV */].apiServer + "/" + url, { headers: this.headers }).toPromise().then(function (res) {
            _this.loadTrackerSvc.loading = false;
            return res;
        }).catch(function (err) {
            _this.loadTrackerSvc.loading = false;
            throw (err);
        });
    };
    IbcHttpProvider.prototype.post = function (url, body) {
        var _this = this;
        this.loadTrackerSvc.loading = true;
        return this.http.post(__WEBPACK_IMPORTED_MODULE_4__app_env__["a" /* ENV */].apiServer + "/" + url, body, { headers: this.headers }).toPromise().then(function (res) {
            _this.loadTrackerSvc.loading = false;
            return res;
        }).catch(function (err) {
            _this.loadTrackerSvc.loading = false;
            throw (err);
        });
    };
    IbcHttpProvider.prototype.put = function (url, body) {
        var _this = this;
        this.loadTrackerSvc.loading = true;
        return this.http.put(__WEBPACK_IMPORTED_MODULE_4__app_env__["a" /* ENV */].apiServer + "/" + url, body, { headers: this.headers }).toPromise().then(function (res) {
            _this.loadTrackerSvc.loading = false;
            return res;
        }).catch(function (err) {
            _this.loadTrackerSvc.loading = false;
            throw (err);
        });
    };
    IbcHttpProvider.prototype.delete = function (url, body) {
        var _this = this;
        if (body === void 0) { body = {}; }
        this.loadTrackerSvc.loading = true;
        var queries = [];
        Object.keys(body).forEach(function (k) {
            queries.push(k + "=" + body[k]);
        });
        console.log(queries);
        return this.http.delete(__WEBPACK_IMPORTED_MODULE_4__app_env__["a" /* ENV */].apiServer + "/" + url + "?" + queries.join('&'), { headers: this.headers }).toPromise().then(function (res) {
            _this.loadTrackerSvc.loading = false;
            return res;
        }).catch(function (err) {
            _this.loadTrackerSvc.loading = false;
            throw (err);
        });
    };
    IbcHttpProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_common_http__["a" /* HttpClient */], __WEBPACK_IMPORTED_MODULE_2__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */]])
    ], IbcHttpProvider);
    return IbcHttpProvider;
}());

//# sourceMappingURL=ibc-http.js.map

/***/ }),

/***/ 61:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FileCacheProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_file__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_transfer__ = __webpack_require__(394);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_base64__ = __webpack_require__(395);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__angular_platform_browser__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





// import { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer';




/*
  Generated class for the FileCacheProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var FileCacheProvider = (function () {
    function FileCacheProvider(http, fileTransfer, sanitizer, platform, file, commonSvc, loadTrackerSvc, base64Svc) {
        this.http = http;
        this.fileTransfer = fileTransfer;
        this.sanitizer = sanitizer;
        this.platform = platform;
        this.file = file;
        this.commonSvc = commonSvc;
        this.loadTrackerSvc = loadTrackerSvc;
        this.base64Svc = base64Svc;
        this.cachingMap = {};
    }
    FileCacheProvider.prototype.cacheFile = function (s, type) {
        var _this = this;
        if (!s)
            return null;
        if (this.commonSvc.isWeb) {
            this.cachingMap[s] = { target: s, timestamp: new Date };
            return new Promise(function (resolve, reject) {
                resolve(s);
            });
        }
        if (this.cachingMap[s]) {
            // console.log(`=== Reading from cache: ${JSON.stringify(this.cachingMap[s])}`);
            return new Promise(function (resolve, reject) {
                resolve(_this.cachingMap[s].target);
            });
        }
        var targetFile = this.getTargetFileFromSource(s);
        return this.file.resolveLocalFilesystemUrl(targetFile)
            .then(function (entry) {
            // console.log(`====== Read existing file: ${entry.toInternalURL()}`);
            return _this.createCache(s, entry, type);
        })
            .catch(function (err) {
            return _this.downloadFile(s, targetFile, type);
        });
    };
    FileCacheProvider.prototype.downloadFile = function (source, target, type) {
        var _this = this;
        var fileTransfer = this.fileTransfer.create();
        console.log("--- building new cache for " + source);
        // this.file.resolveLocalFilesystemUrl(this.file.cacheDirectory+'tempFile.pdf').then(entry => {
        //     console.log("===== cdv path of tempFile.pdf =====");
        //     console.log(entry.toInternalURL());
        // }, err => {
        //     console.log("==== error of tempFile.pdf loading ===");
        //     console.log(err);
        // })
        this.loadTrackerSvc.loading = true;
        return fileTransfer.download(source, target).then(function (entry) {
            _this.loadTrackerSvc.loading = false;
            return _this.createCache(source, entry, type);
        }).catch(function (err) {
            console.log('------ Error during file download --------');
            console.error(JSON.stringify(err));
            _this.loadTrackerSvc.loading = false;
            return null;
        });
    };
    FileCacheProvider.prototype.createCache = function (source, entry, type) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            if (type == 'image' && _this.platform.is('ios')) {
                var normalizedFileName = entry.nativeURL.split('/').pop();
                var path = entry.nativeURL.substring(0, entry.nativeURL.lastIndexOf("/") + 1);
                // Android supports cdvfile:// path, however iOS doesn't
                // We can only use base64 encoded image for iOS, however readAsDataURL doesn't work for android, which
                // means we can't encode a base64 string from given URL
                // console.log(`-------- path = ${path}`);
                // console.log(`-------- file = ${normalizedFileName}`);                
                // console.log(`${JSON.stringify(entry)}`);
                // console.log(`${entry.toInternalURL()}`);
                _this.file.readAsDataURL(path, normalizedFileName)
                    .then(function (base64File) {
                    entry.getMetadata(function (meta) {
                        _this.cachingMap[source] = {
                            target: base64File,
                            timestamp: meta.modificationTime
                        };
                        resolve(base64File);
                    });
                })
                    .catch(function (err) {
                    reject(err);
                });
            }
            else {
                entry.getMetadata(function (meta) {
                    _this.cachingMap[source] = {
                        target: entry.toInternalURL(),
                        timestamp: meta.modificationTime
                    };
                    // if (this.platform.is('android')) {
                    //     resolve(entry.nativeURL);
                    // } else {
                    resolve(entry.toInternalURL());
                    // }
                });
            }
        });
    };
    FileCacheProvider.prototype.getTargetFileFromSource = function (sourceUrl) {
        var ext = '';
        var matches = sourceUrl.match(/.*([.]\w+)$/);
        if (matches) {
            ext = matches[1];
        }
        var cacheRoot = this.platform.is('ios') ? this.file.cacheDirectory : this.file.externalCacheDirectory;
        var hashCode = btoa(sourceUrl);
        return cacheRoot + '/ibc/' + hashCode + ext;
    };
    FileCacheProvider.prototype.checkAndClearCache = function (url, timestamp) {
        var _this = this;
        console.log("-------- check and clear cache -----------");
        if (this.commonSvc.isWeb) {
            return;
        }
        var targetFile = this.getTargetFileFromSource(url);
        /* Empty the cache of this url */
        this.cachingMap[url] = undefined;
        /* Remove existing cache file */
        this.file.resolveLocalFilesystemUrl(targetFile)
            .then(function (entry) {
            entry.getMetadata(function (meta) {
                // console.log(`--- targetFile: ${targetFile} ---`);
                // console.log(`old time: ${meta.modificationTime}`);
                // console.log(`new time: ${timestamp}`);
                if (meta.modificationTime.getTime() < timestamp.getTime()) {
                    console.log("====== URL cache outofdate! Cleaning URL: " + entry.nativeURL);
                    var normalizedFileName = entry.nativeURL.split('/').pop();
                    var path = entry.nativeURL.substring(0, entry.nativeURL.lastIndexOf("/") + 1);
                    _this.file.removeFile(path, normalizedFileName).then(function (res) {
                        console.log('==== Cache file removed! ===');
                        console.log(JSON.stringify(res));
                    }, function (err) {
                        console.error("=== Can't remove file ===");
                        console.error(JSON.stringify(err, null, 2));
                    });
                }
            }, function (failure) {
                console.error('--- failed to get meta data ---');
                console.error(JSON.stringify(failure, null, 2));
            });
            return entry.nativeURL;
        })
            .catch(function (err) { return console.error; });
    };
    FileCacheProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_common_http__["a" /* HttpClient */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_transfer__["a" /* FileTransfer */], __WEBPACK_IMPORTED_MODULE_8__angular_platform_browser__["c" /* DomSanitizer */], __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_3__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_6__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_7__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */], __WEBPACK_IMPORTED_MODULE_5__ionic_native_base64__["a" /* Base64 */]])
    ], FileCacheProvider);
    return FileCacheProvider;
}());

//# sourceMappingURL=file-cache.js.map

/***/ }),

/***/ 62:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BibleProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_native__ = __webpack_require__(186);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__s2t_s2t__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_ibc_http_ibc_http__ = __webpack_require__(57);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/*
  Generated class for the BibleProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var BibleProvider = (function () {
    function BibleProvider(s2t, commonSvc, http) {
        this.s2t = s2t;
        this.commonSvc = commonSvc;
        this.http = http;
        this.books = [];
        this.storage = new __WEBPACK_IMPORTED_MODULE_1_ionic_native__["d" /* SQLite */]();
    }
    BibleProvider.prototype.getDB = function () {
        return this.storage.openDatabase({
            name: 'bible.db',
            location: 'default',
            createFromLocation: 1
        });
    };
    BibleProvider.prototype.getBooks = function () {
        var _this = this;
        if (this.commonSvc.isWeb) {
            this.books = [];
            return this.http.get('bible/summary').then(function (rows) {
                for (var i = 0; i < rows.length; i++) {
                    // console.log(JSON.stringify(rows.item(i)));
                    var book = rows[i];
                    // book.ShortName = this.s2t.tranStr(book.ShortName, true);
                    // book.FullName = this.s2t.tranStr(book.FullName, true);
                    _this.books.push(book);
                }
                // console.log(this.books);
                return _this.books;
            }, function (err) {
                console.error("Can't connect to SQLite!");
                return [];
            });
        }
        else {
            return this.getDB().then(function () {
                _this.books = [];
                return _this.storage.executeSql("SELECT * from BibleID", []).then(function (data) {
                    var rows = data.rows;
                    for (var i = 0; i < rows.length; i++) {
                        // console.log(JSON.stringify(rows.item(i)));
                        var book = rows.item(i);
                        // book.ShortName = this.s2t.tranStr(book.ShortName, true);
                        // book.FullName = this.s2t.tranStr(book.FullName, true);
                        _this.books.push(book);
                    }
                    // this.storage.close();
                    return _this.books;
                }, function (err) {
                    console.error("Can't connect to SQLite!");
                    // this.storage.close();
                    return [];
                });
            });
        }
    };
    BibleProvider.prototype.getAVerse = function (volumeSN, chapterSN, verseSN) {
        var _this = this;
        if (this.commonSvc.isWeb) {
            return this.http.get("bible?VolumeSN=" + volumeSN + "&ChapterSN=" + chapterSN + "&VerseSN=" + verseSN).then(function (rows) {
                if (rows && rows.length > 0) {
                    var verse = rows[0];
                    // verse.Chinese = this.s2t.tranStr(verse.Chinese, true);
                    verse.English = verse.English && verse.English.replace(/\\/g, '');
                    verse.English = verse.English && verse.English.replace(/\{[^{}]*\}/g, '');
                    return verse;
                }
                else {
                    throw ('Error: cannot find the verse');
                }
            }, function (error) {
                console.error("Unable to execute sql", JSON.stringify(error));
                return null;
            });
        }
        else {
            return this.getDB().then(function () {
                return Promise.all([
                    _this.storage.executeSql("SELECT * from Bible where VolumeSN = " + volumeSN + " and ChapterSN = " + chapterSN + " and VerseSN = " + verseSN, []),
                    _this.storage.executeSql("SELECT * from BibleID where SN = " + volumeSN, [])
                ]).then(function (res) {
                    var rows1 = res[0].rows;
                    var rows2 = res[1].rows;
                    if (rows1.length > 0 && rows2.length > 0) {
                        var verse = rows1.item(0);
                        verse.English = verse.English && verse.English.replace(/\\/g, '');
                        verse.English = verse.English && verse.English.replace(/\{[^{}]*\}/g, '');
                        verse = Object.assign({}, verse, rows2.item(0));
                        // this.storage.close();
                        return verse;
                    }
                    else {
                        throw ('Error: cannot find the verse');
                    }
                }, function (error) {
                    console.error("Unable to execute sql", JSON.stringify(error));
                    // this.storage.close();
                });
                /*                return this.storage.executeSql(`SELECT * from Bible join BibleID on Bible.VolumeSN = BibleID.SN where VolumeSN = ${volumeSN} and ChapterSN = ${chapterSN}`, []).then((data) => {
                                    // console.log("Data received: ", data);
                                    let rows = data.rows;
                                    for (let i = 0; i < rows.length; i++) {
                                        // console.log(JSON.stringify(rows.item(i)));
                                        let verse: IntBibleVerse = rows.item(i);
                                        // verse.Chinese = this.s2t.tranStr(verse.Chinese, true);
                                        verse.English = verse.English && verse.English.replace(/\\/g, '');
                                        verse.English = verse.English && verse.English.replace(/\{[^{}]*\}/g, '');
                                        verses.push(verse);
                                    }
                                    this.storage.close();
                                    return verses;
                                }, (error) => {
                                    console.error("Unable to execute sql", JSON.stringify(error));
                                    this.storage.close();
                                    return null;
                                });*/
            });
        }
    };
    BibleProvider.prototype.getAChapter = function (volumeSN, chapterSN) {
        var _this = this;
        if (this.commonSvc.isWeb) {
            return this.http.get("bible?VolumeSN=" + volumeSN + "&ChapterSN=" + chapterSN).then(function (rows) {
                var verses = [];
                // console.log("Data received: ", data);
                for (var i = 0; i < rows.length; i++) {
                    // console.log(JSON.stringify(rows.item(i)));
                    var verse = rows[i];
                    // verse.Chinese = this.s2t.tranStr(verse.Chinese, true);
                    verse.English = verse.English && verse.English.replace(/\\/g, '');
                    verse.English = verse.English && verse.English.replace(/\{[^{}]*\}/g, '');
                    verses.push(verse);
                }
                return verses;
            }, function (error) {
                console.error("Unable to execute sql", JSON.stringify(error));
                return null;
            });
        }
        else {
            return this.getDB().then(function () {
                var verses = [];
                return _this.storage.executeSql("SELECT * from Bible join BibleID on Bible.VolumeSN = BibleID.SN where Bible.VolumeSN = " + volumeSN + " and ChapterSN = " + chapterSN, []).then(function (data) {
                    // console.log("Data received: ", data);
                    var rows = data.rows;
                    for (var i = 0; i < rows.length; i++) {
                        // console.log(JSON.stringify(rows.item(i)));
                        var verse = rows.item(i);
                        // verse.Chinese = this.s2t.tranStr(verse.Chinese, true);
                        verse.English = verse.English && verse.English.replace(/\\/g, '');
                        verse.English = verse.English && verse.English.replace(/\{[^{}]*\}/g, '');
                        verses.push(verse);
                    }
                    // this.storage.close();
                    return verses;
                }, function (error) {
                    console.error("Unable to execute sql", JSON.stringify(error));
                    // this.storage.close();
                    return null;
                });
            });
        }
    };
    BibleProvider.prototype.getVerse = function () {
        var _this = this;
        var booksPromise = this.books.length > 0 ? new Promise(function (resolve, reject) {
            resolve(_this.books);
        }) : this.getBooks();
        booksPromise.then(function (books) {
        });
    };
    BibleProvider.prototype.search = function (keyword) {
        var _this = this;
        // let searchKey = keyword;
        var searchKey = this.s2t.tranStr(keyword, false);
        if (searchKey) {
            searchKey = searchKey.replace(/^\s*|\s*$/, '');
        }
        if (this.commonSvc.isWeb) {
            return this.http.post("bible/search", { keyword: searchKey }).then(function (verses) {
                verses.forEach(function (verse) {
                    verse.English = verse.English && verse.English.replace(/\\/g, '');
                });
                return { count: verses.length, verses: verses.sort(function (a, b) {
                        return a.SN < b.SN ? -1 :
                            a.SN > b.SN ? 1 :
                                a.ChapterSN < b.ChapterSN ? -1 :
                                    a.ChapterSN > b.ChapterSN ? 1 :
                                        a.VerseSN < b.VerseSN ? -1 :
                                            a.VerseSN > b.VerseSN ? 1 :
                                                0;
                    }) };
            });
        }
        else {
            return this.getDB().then(function () {
                return _this.storage.executeSql("SELECT * from Bible join BibleID on Bible.VolumeSN == BibleID.SN where Bible.English like '%" + searchKey + "%' or Bible.Chinese like '%" + searchKey + "%'", [])
                    .then(function (data) {
                    var verses = [];
                    console.log("Data received: ", data);
                    var rows = data.rows;
                    for (var i = 0; i < rows.length; i++) {
                        // console.log(JSON.stringify(rows.item(i)));
                        var verse = rows.item(i);
                        // verse.Chinese = this.s2t.tranStr(verse.Chinese, true);
                        verse.English = verse.English && verse.English.replace(/\\/g, '');
                        verse.English = verse.English && verse.English.replace(/\{[^{}]*\}/g, '');
                        verses.push(verse);
                    }
                    // this.storage.close();
                    return {
                        count: verses.length,
                        verses: verses.sort(function (a, b) {
                            return a.SN < b.SN ? -1 :
                                a.SN > b.SN ? 1 :
                                    a.ChapterSN < b.ChapterSN ? -1 :
                                        a.ChapterSN > b.ChapterSN ? 1 :
                                            a.VerseSN < b.VerseSN ? -1 :
                                                a.VerseSN > b.VerseSN ? 1 :
                                                    0;
                        })
                    };
                }, function (error) {
                    console.error("Unable to execute sql", JSON.stringify(error));
                    // this.storage.close();
                    return null;
                });
            });
        }
    };
    BibleProvider.prototype.s2tConvert = function (text) {
        return this.s2t.tranStr(text, true);
    };
    BibleProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__s2t_s2t__["a" /* S2tProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_ibc_http_ibc_http__["a" /* IbcHttpProvider */]])
    ], BibleProvider);
    return BibleProvider;
}());

//# sourceMappingURL=bible.js.map

/***/ }),

/***/ 65:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AudioProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_native_audio__ = __webpack_require__(392);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_file__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_media__ = __webpack_require__(393);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





var soundFileMap = {
    loginOk: 'assets/sounds/login-ok.mp3',
    logoutOk: 'assets/sounds/logout-ok.mp3',
    incomingAlert: 'assets/sounds/incoming-alert.wav',
    incomingCall: 'assets/sounds/incoming-call.wav',
    incomingMessage: 'assets/sounds/incoming-message-wechat.wav',
    messageSent: 'assets/sounds/message-sent-wechat.wav',
    newGuest: 'assets/sounds/new-guest.wav',
    outcomingCall: 'assets/sounds/outcoming-call.wav',
    startChatting: 'assets/sounds/start-chatting.wav',
};
/*
  Generated class for the AudioProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var AudioProvider = (function () {
    function AudioProvider(nativeAudio, platform, file, media) {
        /* iOS 's native audio player just doesn't work iOS 11.0.2 + Cordova-ios: 4.5.4*/
        // if (this.isMobile) {
        //     Object.keys(soundFileMap).forEach(k => {
        //         this.nativeAudio.preloadSimple(k, 'cdvfile://localhost/bundle/www/' + soundFileMap[k]).then(() => { }, err => console.log(`--- error loading sound file: ${appPath + soundFileMap[k]}`));
        //     });
        // }
        this.nativeAudio = nativeAudio;
        this.platform = platform;
        this.file = file;
        this.media = media;
        this.dummySuccess = function () { };
    }
    Object.defineProperty(AudioProvider.prototype, "isWeb", {
        get: function () {
            return this.platform.is('core') || this.platform.is('mobileweb');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AudioProvider.prototype, "isMobile", {
        get: function () {
            return !this.isWeb;
        },
        enumerable: true,
        configurable: true
    });
    AudioProvider.prototype.play = function (k) {
        var _this = this;
        if (this.isMobile) {
            /* iOS 's native audio player just doesn't work iOS 11.0.2 + Cordova-ios: 4.5.4*/
            // this.nativeAudio.play(k).then(this.dummySuccess, err => console.log(`Error: Failed to play sound ${k}`));
            this.file.resolveLocalFilesystemUrl(this.file.applicationDirectory + '/www/' + soundFileMap[k]).then(function (entry) {
                var cdvPath = entry.toInternalURL();
                var media = _this.media.create(cdvPath);
                media.play();
            });
        }
    };
    AudioProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __param(2, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["z" /* Inject */])(Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_17" /* forwardRef */])(function () { return __WEBPACK_IMPORTED_MODULE_3__ionic_native_file__["a" /* File */]; }))),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__ionic_native_native_audio__["a" /* NativeAudio */], __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["l" /* Platform */], __WEBPACK_IMPORTED_MODULE_3__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_media__["a" /* Media */]])
    ], AudioProvider);
    return AudioProvider;
}());

//# sourceMappingURL=audio.js.map

/***/ }),

/***/ 655:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HeaderPopOverComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages_user_profile_user_profile__ = __webpack_require__(117);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var HeaderPopOverComponent = (function () {
    function HeaderPopOverComponent(app, viewCtrl, navParams, navCtrl) {
        this.app = app;
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.navCtrl = navCtrl;
    }
    HeaderPopOverComponent.prototype.ngOnInit = function () {
        console.log(this.navParams);
    };
    HeaderPopOverComponent.prototype.editUserProfile = function () {
        // this.navCtrl.push(UserProfilePage);
        this.app.getRootNav().push(__WEBPACK_IMPORTED_MODULE_2__pages_user_profile_user_profile__["b" /* UserProfilePage */]);
    };
    HeaderPopOverComponent.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    HeaderPopOverComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            template: "\n    <ion-list>\n      <button ion-item (click)=\"editUserProfile();close()\">\u7DE8\u8F2F Edit</button>\n      <button ion-item (click)=\"navParams.data.logout(); close()\">\u767B\u51FA Sign Out</button>\n    </ion-list>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* App */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */]])
    ], HeaderPopOverComponent);
    return HeaderPopOverComponent;
}());

//# sourceMappingURL=header.js.map

/***/ }),

/***/ 665:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AboutPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_ibc_style_ibc_style__ = __webpack_require__(89);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the AboutPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var AboutPage = (function () {
    function AboutPage(navCtrl, navParams, ibcStyle) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.bgColor = 'home-bg-0'; //ibcStyle.randomBg;
    }
    AboutPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad AboutPage');
    };
    AboutPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-about',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/about/about.html"*/'<!--\n  Generated template for the AboutPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header color="transparent">\n\n  <ion-navbar color="transparent">\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>關於我們</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n<div class="ibc-overlay"></div>\n\n<ion-content padding [ngClass]="bgColor">\n\n    <div class="ibc-full-height" fxLayout="column" fxLayoutAlign="center center">\n        <div fxFlex></div>\n        <h3>崇拜時間</h3>\n        <div ion-text>星期日上午 9:30am</div>\n        <div fxFlex></div>\n        <h3>教會地址</h3>\n        <div [map-link]="\'180 Maitland Road Islington NSW 2296\'" title="教會地址"></div>   \n        <div fxFlex></div>\n        <h3>教會信箱</h3>\n        <div ion-text><a href="mailTo:chineseministry@islingtonbaptist.org.au">chineseministry@islingtonbaptist.org.au</a></div>\n        <div ion-text>郵箱: PO Box 18, Islington, NSW 2296</div>\n        <div fxFlex></div>\n        <h3>中文堂牧者</h3>\n        <h4>陳偉生 Wilson CHAN (傳道)</h4>\n        <a ion-text href="tel:0422325888">0422325888</a>       \n        <div fxFlex></div>     \n        <h3>中文堂事工</h3>\n        <h4>梁宜強 Amos LEUNG</h4>\n        <a ion-text href="tel:0421138972">0421138972</a>   \n        <div fxFlex></div>            \n    </div>\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/about/about.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_2__providers_ibc_style_ibc_style__["a" /* IbcStyleProvider */]])
    ], AboutPage);
    return AboutPage;
}());

//# sourceMappingURL=about.js.map

/***/ }),

/***/ 666:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IbcDeeplinkProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_deeplinks__ = __webpack_require__(196);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_common_common__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








/*
  Generated class for the IbcDeeplinkProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var IbcDeeplinkProvider = (function () {
    function IbcDeeplinkProvider(http, loadTrackerSvc, deepLinks, wechat, ibcFB, app, platform, common) {
        this.http = http;
        this.loadTrackerSvc = loadTrackerSvc;
        this.deepLinks = deepLinks;
        this.wechat = wechat;
        this.ibcFB = ibcFB;
        this.app = app;
        this.platform = platform;
        this.common = common;
        console.log('Hello IbcDeeplinkProvider Provider');
    }
    IbcDeeplinkProvider.prototype.listen = function (navCtrl) {
        var _this = this;
        if (this.listening)
            return;
        if (!this.common.isWeb) {
            this.platform.ready().then(function () {
                _this.loadTrackerSvc.loading = true;
                _this.deepLinks.routeWithNavController(navCtrl, {})
                    .subscribe(function (match) {
                    // match.$route - the route we matched, which is the matched entry from the arguments to route()
                    // match.$args - the args passed in the link
                    // match.$link - the full link data
                    console.log('Successfully matched route', JSON.stringify(match));
                    _this.loadTrackerSvc.loading = false;
                    if (match && match.$link) {
                        var data = match.$link;
                        var queryString = data.queryString;
                        console.log(JSON.stringify(data));
                        if (data.host == '/oauth') {
                            console.log('======= processing wechat info =========');
                            var wechatMatch = queryString.match(/code=(\w+)/);
                            if (_this.wechat.linkingInProgress && wechatMatch) {
                                var code = wechatMatch[1];
                                _this.ibcFB.linkWeChatSendApiRequest(code);
                            }
                            else if (_this.wechat.LoggingInProgress && wechatMatch) {
                                console.log('--- send request to login in! ---');
                                var code = wechatMatch[1];
                                _this.ibcFB.loginWeChatSendApiRequest(code);
                            }
                            else {
                                //////////////////////////////////////////////////
                                /* Generic Path Redirection Handling
                                   path is the page name; queryParams is an object of params to inject.
                                   e.g.
                                   navCtrl.push('activity-page', {itemIndex: 0, itemId: 2})
                                 */
                                //////////////////////////////////////////////////
                                // location.href = `#${data.path}`;
                                // navCtrl.push(data.path.replace(/^\/+/,''));
                                var queryParams = _this.common.parseURLParameters(data.queryString);
                                navCtrl.push(data.path.replace(/^\/+/, ''), queryParams);
                            }
                        }
                    }
                }, function (nomatch) {
                    // nomatch.$link - the full link data
                    console.error('Got a deeplink that didn\'t match', nomatch);
                    _this.loadTrackerSvc.loading = false;
                });
                _this.listening = true;
                setTimeout(function () {
                    _this.loadTrackerSvc.loading = false;
                }, 2000);
            });
        }
    };
    IbcDeeplinkProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_common_http__["a" /* HttpClient */], __WEBPACK_IMPORTED_MODULE_5__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_deeplinks__["a" /* Deeplinks */],
            __WEBPACK_IMPORTED_MODULE_4__providers_wechat_wechat__["a" /* WechatProvider */], __WEBPACK_IMPORTED_MODULE_6__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */], __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["b" /* App */], __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_7__providers_common_common__["a" /* CommonProvider */]])
    ], IbcDeeplinkProvider);
    return IbcDeeplinkProvider;
}());

//# sourceMappingURL=ibc-deeplink.js.map

/***/ }),

/***/ 667:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ContactPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_audio_audio__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_s2t_s2t__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_map_map__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_social_sharing__ = __webpack_require__(195);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_launch_navigator__ = __webpack_require__(198);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_file_cache_file_cache__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__angular_platform_browser__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__components_popup_popup__ = __webpack_require__(119);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_ibc_http_ibc_http__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__providers_ministry_ministry__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_rxjs__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_rxjs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
















/**
 * Generated class for the ContactPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ContactPage = (function () {
    function ContactPage(navCtrl, navParams, s2t, cacheSvc, sanitizer, ibcHttp, content, audioSvc, socialSharing, navLauncher, modalCtrl, commonSvc, ministrySvc) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.s2t = s2t;
        this.cacheSvc = cacheSvc;
        this.sanitizer = sanitizer;
        this.ibcHttp = ibcHttp;
        this.content = content;
        this.audioSvc = audioSvc;
        this.socialSharing = socialSharing;
        this.navLauncher = navLauncher;
        this.modalCtrl = modalCtrl;
        this.commonSvc = commonSvc;
        this.ministrySvc = ministrySvc;
        this.onlyForFriends = false;
        this.subscriptions = [];
        this.lastCounts = {};
        this.templateForAdd = [];
        this.onlyForFriends = this.navParams.get('myFriends');
        this.title = this.navParams.get('title');
        this.prefilter = this.navParams.get('prefilter') || (function () { return true; });
        this.subscriptions.push(__WEBPACK_IMPORTED_MODULE_14_rxjs__["Observable"].combineLatest(this.content.currentUser$, this.content.allContacts$).subscribe(function (res) {
            // console.log(res);
            _this.items = _this.allContacts = res[1];
            if (_this.onlyForFriends) {
                var friends_1 = Object.keys(_this.content.myselfContact.myFriends || {});
                _this.items = _this.items.filter(function (contact) {
                    return friends_1.filter(function (f) { return f == contact.id; }).length > 0;
                });
            }
            if (_this.notifTracker) {
                console.log('=== turn off existing notif tracker ===');
                _this.content.allStatusDB.child(_this.content.myselfContact.id).off('value', _this.notifTracker);
            }
            _this.notifTracker = _this.content.allStatusDB.child(_this.content.myselfContact.id).on('value', function (snapshot) {
                var notifMap = snapshot.val();
                if (notifMap) {
                    _this.items.forEach(function (item) {
                        if (notifMap[item.id]) {
                            item.notifs = notifMap[item.id].chat_notifs;
                        }
                    });
                }
            });
            var value = _this.searchBar.value;
            _this.getItems({ target: { value: value } });
        }, function (err) { }));
        this.subscriptions.push(this.content.lastCounts$.subscribe(function (lastCounts) {
            _this.lastCounts = lastCounts;
        }, function (err) { }));
        this.templateForAdd = [
            {
                key: 'username',
                caption: '用户ID (Unique)',
                disabled: true
            },
            {
                key: 'name',
                caption: '英文名'
            },
            {
                key: 'chinese_name',
                caption: '中文名'
            },
            {
                key: 'class',
                caption: '联系人类型',
                type: __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["b" /* TypeInputUI */].Dropdown,
                lookupSource: __WEBPACK_IMPORTED_MODULE_14_rxjs__["Observable"].of([
                    {
                        val: null,
                        cap: '个人'
                    },
                    {
                        val: 'group',
                        cap: '群'
                    },
                ]),
                lookupCaption: 'cap',
                lookupValue: 'val',
            },
            {
                key: 'skills',
                caption: '事奉',
                type: __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["b" /* TypeInputUI */].MultiDropdown,
                lookupSource: __WEBPACK_IMPORTED_MODULE_14_rxjs__["Observable"].of(this.ministrySvc.ministrySkills),
                lookupCaption: 'caption',
                lookupValue: 'key'
            },
            {
                key: 'email',
                caption: '電子郵件'
            },
            {
                key: 'mobile',
                caption: '電話'
            },
            {
                key: 'address1',
                caption: '地址1'
            },
            {
                key: 'address2',
                caption: '地址2'
            },
            {
                key: 'state',
                caption: '省份',
            },
            {
                key: 'postcode',
                caption: '郵政編碼',
            },
            {
                key: 'hidden',
                caption: '隐藏',
                type: __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["b" /* TypeInputUI */].Boolean
            }
        ];
    }
    ContactPage.prototype.ngOnDestroy = function () {
        this.subscriptions.forEach(function (s) { return s.unsubscribe(); });
    };
    ContactPage.prototype.getSkillCaption = function (key) {
        var found = this.ministrySvc.ministrySkills.filter(function (s) { return s.key == key; })[0];
        if (found) {
            return found.caption;
        }
    };
    ContactPage.prototype.getItems = function (ev) {
        var _this = this;
        var val = ("" + (ev.target.value || '')).toLowerCase();
        this.mappedItems = this.items.filter(this.prefilter).filter(function (contact) {
            if (contact.hidden && _this.content.ibcFB.access_level < 3)
                return false;
            if (!val)
                return true;
            if (!contact.skills) {
                contact.skills = [];
            }
            var skillCaptions = [];
            contact.skills.forEach(function (key) {
                var caption = _this.getSkillCaption(key);
                if (caption) {
                    skillCaptions.push(caption);
                }
            });
            return (contact.name + " " + contact.chinese_name + " " + contact.email + " " + contact.mobile + " " + skillCaptions.join(' ')).toLowerCase().indexOf(_this.s2t.tranStr(val, true)) > -1;
        });
    };
    ContactPage.prototype.addFriend = function () {
        var _this = this;
        var popupModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_10__components_popup_popup__["a" /* PopupComponent */], {
            title: this.title,
            definitions: [
                {
                    key: 'id',
                    caption: '选择联系人',
                    type: __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["b" /* TypeInputUI */].Dropdown,
                    lookupSource: this.content.allContacts$.map(function (contacts) { return contacts.filter(function (contact) { return contact.class != 'group' && !contact.hidden; }); }),
                    lookupCaption: function (option) { return option.name + " (" + option.chinese_name + ")"; },
                    lookupValue: 'id'
                }
            ],
            cancel: function () { return popupModal.dismiss(); },
            save: function (data) {
                _this.content.myselfContactDB.child('myFriends').child(data.id).set(1).then(function () {
                    _this.commonSvc.toastSuccess('添加成功');
                    popupModal.dismiss();
                }, function (err) {
                    _this.commonSvc.toastFailure('添加失败', err);
                    _this.items.pop();
                    popupModal.dismiss();
                });
            }
        });
        popupModal.present();
    };
    ContactPage.prototype.deleteFriend = function (id) {
        var _this = this;
        this.commonSvc.confirmDialog(null, '你确定要删除吗?', function () {
            _this.content.myselfContactDB.child('myFriends').child(id).remove().then(function () {
                _this.commonSvc.toastSuccess('删除成功');
            }, function (err) {
                _this.commonSvc.toastFailure('删除失败', err);
            });
        });
    };
    ContactPage.prototype.isNew = function (contact) {
        if (!contact || !contact.createDT)
            return false;
        return this.commonSvc.differDays(contact.createDT) < 3;
    };
    ContactPage.prototype.addContact = function () {
        var _this = this;
        var popupModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_10__components_popup_popup__["a" /* PopupComponent */], {
            title: '聯繫人',
            definitions: this.templateForAdd,
            cancel: function () { return popupModal.dismiss(); },
            save: function (data) {
                console.log(JSON.stringify(data, null, 2));
                if (!data.username || !data.name) {
                    _this.commonSvc.toastFailure("\u9519\u8BEF: \u7528\u6237ID\u548C\u82F1\u6587\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");
                    return;
                }
                data.username = data.username.toLowerCase();
                /* Check whether username already exists */
                if (_this.allContacts.filter(function (c) { return c.username && c.username.toLowerCase() == data.username; }).length > 0) {
                    _this.commonSvc.toastFailure(data.username + "\u5DF2\u88AB\u5360\u7528\uFF0C\u8BF7\u6362\u4E00\u4E2Ausername");
                    return;
                }
                var lastId = _this.lastCounts && _this.lastCounts.contacts;
                console.log("lastId = " + lastId);
                if (lastId) {
                    var newId = lastId + 1;
                    Promise.all([
                        _this.content.allContactsDB.child(newId).set({
                            username: data.username.toLowerCase(),
                            id: newId,
                            name: data.name,
                            chinese_name: data.chinese_name,
                            skills: data.skills || [],
                            email: data.email || data.username + "@unknown.com",
                            mobile: data.mobile,
                            address1: data.address1,
                            state: data.state,
                            postcode: data.postcode,
                            class: data.class,
                            hidden: data.hidden,
                            createDT: __WEBPACK_IMPORTED_MODULE_15_moment__().format("YYYY-MM-DD HH:mm:ss")
                        }),
                        _this.content.lastCountDB.child('contacts').set(newId)
                    ])
                        .then(function (res) {
                        return _this.ibcHttp.post('user', {
                            name: data.username,
                            access_level: 1,
                            email: data.email || data.username + "@unknown.com"
                        });
                    })
                        .then(function (res) {
                        console.log(res);
                        _this.commonSvc.toastSuccess("\u6DFB\u52A0\u6210\u529F! \u7528\u6237\u540D\uFF1A" + res.name + " \u5BC6\u7801\uFF1A" + res.password, 300000);
                        popupModal.dismiss();
                    })
                        .catch(function (err) {
                        _this.commonSvc.toastFailure('添加失败', err);
                        _this.items.pop();
                        popupModal.dismiss();
                    });
                }
            }
        });
        popupModal.present();
    };
    ContactPage.prototype.deleteContact = function (id) {
        var _this = this;
        this.commonSvc.confirmDialog(null, '你确定要删除吗?', function () {
            var contact = _this.allContacts.filter(function (c) { return c.id == id; })[0];
            if (!contact) {
                _this.commonSvc.toastFailure("\u65E0\u6CD5\u627E\u5230\u4E0E" + id + "\u5339\u914D\u7684\u8BB0\u5F55");
                return;
            }
            _this.content.allContactsDB.child(id).remove()
                .then(function (res) {
                return _this.ibcHttp.delete('user', {
                    name: contact.username
                });
            })
                .then(function () {
                _this.commonSvc.toastSuccess('删除成功');
            }, function (err) {
                _this.commonSvc.toastFailure('删除失败', err);
            });
        });
    };
    ContactPage.prototype.editContact = function (contact) {
        var _this = this;
        var popupModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_10__components_popup_popup__["a" /* PopupComponent */], {
            title: this.title,
            definitions: this.templateForAdd || [],
            item: contact,
            cancel: function () { return popupModal.dismiss(); },
            save: function (item) {
                _this.content.allContactsDB.child("" + contact.id).set(contact).then(function () {
                    _this.commonSvc.toastSuccess('编辑成功');
                    popupModal.dismiss();
                }, function (err) {
                    _this.commonSvc.toastFailure('编辑失败', err);
                    _this.items.pop();
                    popupModal.dismiss();
                });
            }
        });
        popupModal.present();
    };
    ContactPage.prototype.hasEmail = function (contact) {
        return contact && contact.email && !/@unknown/.test(contact.email);
    };
    ContactPage.prototype.ionViewDidLoad = function () {
    };
    ContactPage.prototype.contactClick = function (item) {
        // this.audioSvc.play('startChatting');
        this.navCtrl.push('chat-page', { partnerId: item.id });
    };
    ContactPage.prototype.geoNavigate = function (item) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_map_map__["a" /* MapPage */], {
            title: item.name + "\u7684\u5BB6",
            address: item.address1 + " " + item.address2 + " " + item.province + " " + item.state + " " + item.postcode
        });
        // this.navLauncher.navigate(`${item.address1} ${item.address2} ${item.province} ${item.state} ${item.postcode}`).then(() => {
        // }, console.error);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])('searchBar'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* Searchbar */])
    ], ContactPage.prototype, "searchBar", void 0);
    ContactPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-contact',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/contact/contact.html"*/'<!--\n  Generated template for the ContactPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>{{title || \'教會成員\'}}</ion-title>\n\n    <ion-buttons end *ngIf="!onlyForFriends && !commonSvc.readonly">\n      <button ion-button class="bar-button-menutoggle-ios" (click)="addContact()" >\n        <ion-icon name="add"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-buttons end *ngIf="onlyForFriends">\n      <button ion-button class="bar-button-menutoggle-ios" (click)="addFriend()" >\n        <ion-icon name="add"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n\n</ion-header>\n\n<load-tracker></load-tracker>\n\n<ion-content>\n  <ion-searchbar #searchBar (ionInput)="getItems($event)"></ion-searchbar>\n  <ion-list>\n    <ion-item-sliding *ngFor="let contact of mappedItems">\n      <ion-item (click)="contactClick(contact)" [style.background-color]="contact.hidden ? \'#EEE\' : contact.class == \'group\' ? \'#F0F4C3\' : \'#FFF\'">\n        <ion-avatar item-start>\n          <img [src]="sanitizer.bypassSecurityTrustResourceUrl(cacheSvc.cachingMap[contact.photoURL]?.target || \'assets/img/default-photo.jpg\')">\n        </ion-avatar>\n        <ion-badge *ngIf="isNew(contact)" color="danger" class="ibc-badge">New!</ion-badge>\n        <ion-badge *ngIf="contact.notifs" color="danger" class="ibc-badge">{{contact.notifs}}</ion-badge>\n        <h2 class="ibc-allow-wrap">{{contact.name}} {{contact.chinese_name}} {{contact.class == \'group\' ? \'（群）\' : \'\'}}</h2>\n        <p ion-note *ngIf="contact.skills?.length > 0" class="ibc-allow-wrap">事奉 <ion-badge *ngFor="let skill of contact.skills" style="margin-right: 5px">{{getSkillCaption(skill)}}</ion-badge></p>\n        <ng-container *ngIf="contact?.hidden">\n          <p ion-note class="ibc-allow-wrap">本條目被隱藏，僅管理員可見</p>         \n        </ng-container>\n        <ng-container *ngIf="contact?.shareInfo && content.myselfContact.shareInfo">\n          <p ion-note *ngIf="hasEmail(content?.myselfContact) && hasEmail(contact)" class="ibc-allow-wrap">電郵 {{contact.email}}</p>\n          <p ion-note *ngIf="content?.myselfContact?.mobile && contact.mobile" class="ibc-allow-wrap">電話 {{contact.mobile}}</p>\n          <!-- <p ion-note>生日 {{contact.dob | date:\'M月d日\'}}</p> -->\n          <p ion-note *ngIf="content?.myselfContact?.wechat && contact.wechat" class="ibc-allow-wrap">微信 {{contact.wechat}}</p>\n          <p ion-note *ngIf="content?.myselfContact?.address1 && contact.address1" class="ibc-allow-wrap">地址 {{contact.address1}} {{contact.address2}} {{contact.state}} {{contact.postcode}}</p>\n          <p ion-note *ngIf="content?.myselfContact?.dob && contact.dob" class="ibc-allow-wrap">生日 {{contact.dob | date:\'M月d日\'}}</p>          \n        </ng-container>\n      </ion-item>\n      <ion-item-options *ngIf="contact?.shareInfo && content.myselfContact.shareInfo || content.ibcFB.access_level >= 3" side="right">\n        <a ion-button color="primary" *ngIf="content?.myselfContact?.mobile && contact.mobile" (click)="socialSharing.shareViaSMS(\'\', contact.mobile)">\n          <ion-icon name="text"></ion-icon>\n          短信\n        </a>\n        <a ion-button color="secondary" *ngIf="content?.myselfContact?.mobile && contact.mobile" [href]="\'tel:\'+contact.mobile">\n          <ion-icon name="call"></ion-icon>\n          電話\n        </a>\n        <a ion-button color="teal" *ngIf="hasEmail(content?.myselfContact) && hasEmail(contact)" [href]="\'mailTo:\'+contact.email">\n          <ion-icon name="mail"></ion-icon>\n          電郵\n        </a>\n        <a ion-button color="teal-1" *ngIf="content?.myselfContact?.address1 && contact.address1" (click)="geoNavigate(contact)">\n          <ion-icon name="globe"></ion-icon>\n          導航\n        </a> \n        <a ion-button *ngIf="!onlyForFriends && !commonSvc.readonly" (click)="editContact(contact)">\n          编辑\n        </a>         \n        <a ion-button color="danger" *ngIf="!onlyForFriends && !commonSvc.readonly" (click)="deleteContact(contact.id)">\n          删除\n        </a>                 \n        <a ion-button color="danger" *ngIf="onlyForFriends" (click)="deleteFriend(contact.id)">\n          <ion-icon name="remove"></ion-icon>\n          删除\n        </a>        \n      </ion-item-options>\n    </ion-item-sliding>\n  </ion-list>\n\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/contact/contact.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */], __WEBPACK_IMPORTED_MODULE_3__providers_s2t_s2t__["a" /* S2tProvider */],
            __WEBPACK_IMPORTED_MODULE_8__providers_file_cache_file_cache__["a" /* FileCacheProvider */], __WEBPACK_IMPORTED_MODULE_9__angular_platform_browser__["c" /* DomSanitizer */], __WEBPACK_IMPORTED_MODULE_12__providers_ibc_http_ibc_http__["a" /* IbcHttpProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_audio_audio__["a" /* AudioProvider */], __WEBPACK_IMPORTED_MODULE_6__ionic_native_social_sharing__["a" /* SocialSharing */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_launch_navigator__["a" /* LaunchNavigator */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* ModalController */], __WEBPACK_IMPORTED_MODULE_11__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_13__providers_ministry_ministry__["a" /* MinistryProvider */]])
    ], ContactPage);
    return ContactPage;
}());

//# sourceMappingURL=contact.js.map

/***/ }),

/***/ 67:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NotificationProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_ministry_ministry__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


// import { DataProvider, IntPopupTemplateItem, IntSummaryData, IntListItem } from '../../providers/data-adaptor/data-adaptor';


/*
  Generated class for the NotificationProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var NotificationProvider = (function () {
    function NotificationProvider(content, ministrySvc) {
        this.content = content;
        this.ministrySvc = ministrySvc;
    }
    NotificationProvider.prototype.parseMustache = function (s) {
        if (!s)
            return s;
        var content = this.content;
        if (content) { } // A trick to avoid tslint warning.
        return s.replace(/{{([^{}]*)}}/g, function (m0, m1) { return eval('content.' + m1); });
    };
    NotificationProvider.prototype.parseItemMustache = function (item) {
        var _this = this;
        if (!item)
            return null;
        var result = {};
        Object.keys(item).forEach(function (k) {
            var v = item[k];
            if (typeof v == 'string') {
                result[k] = _this.parseMustache(v);
            }
            else {
                result[k] = v;
            }
        });
        return result;
    };
    NotificationProvider.prototype.addNotification = function (contactId, item) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.content.myTasksDB.parent.child("" + contactId).child("" + item.key).once('value', function (snapshot) {
                var found = snapshot.val();
                // console.log('--- found ---');
                // console.log(found);
                if (!found || found.value != item.value || found.answer != item.answer) {
                    // console.log(`${found && found.value} <=> ${item.value}`);
                    _this.content.myTasksDB.parent.child("" + contactId).child("" + item.key).set(Object.assign({}, _this.parseItemMustache(item), {
                        isNew: true,
                        createdDT: __WEBPACK_IMPORTED_MODULE_3_moment__().format('YYYY-MM-DD HH:mm:ss'),
                        sender: _this.content.myselfContact.id,
                        avatar: _this.content.myselfContact.photoURL || null
                    })).then(function () {
                        _this.processSpecialTask(item);
                        resolve(true);
                    }).catch(function (err) {
                        console.error(err);
                        reject(false);
                    });
                }
                else {
                    resolve(true);
                }
            });
        });
    };
    NotificationProvider.prototype.addMyNotification = function (item) {
        this.addNotification(this.content.myselfContact.id, item);
    };
    NotificationProvider.prototype.removeNotification = function (contactId, itemKey) {
        this.content.myTasksDB.parent.child("" + contactId).child("" + itemKey).remove();
    };
    NotificationProvider.prototype.removeMyNotification = function (itemKey) {
        this.content.myTasksDB.child("" + itemKey).remove();
    };
    NotificationProvider.prototype.processSpecialTask = function (item) {
        // console.log('--- process special task ---');
        // console.log(item);
        if (item.value && item.key && item.key.match(/\d{4}-\d{2}-\d{2}-confirm-service/)) {
            var date = item.key.replace(/(\d{4}-\d{2}-\d{2})-confirm-service/, '$1');
            if (!date)
                return;
            var ministryIndex = this.ministrySvc.ministrySheets.map(function (sheet) { return sheet.date; }).indexOf(date);
            if (ministryIndex > -1) {
                this.content.ministriesDB.child(ministryIndex + "/confirm").child(this.content.myselfContact.id).set(item.answer == 'yes' ? 1 : 0);
            }
        }
    };
    NotificationProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__providers_data_adaptor_data_adaptor__["a" /* DataProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_ministry_ministry__["a" /* MinistryProvider */]])
    ], NotificationProvider);
    return NotificationProvider;
}());

//# sourceMappingURL=notification.js.map

/***/ }),

/***/ 670:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IbcEditorComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jquery__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_jquery__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the EditorPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var IbcEditorComponent = (function () {
    function IbcEditorComponent(navCtrl, navParams, viewCtrl, commonSvc, loadTrackerSvc) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.commonSvc = commonSvc;
        this.loadTrackerSvc = loadTrackerSvc;
        this.titleHtml = '';
        this.titleContent = '';
        this.useNavController = false;
        this.titleHtml = navParams.get('titleHtml') || this.titleHtml;
        this.titleContent = navParams.get('titleContent') || this.titleContent;
        this.useNavController = navParams.get('useNavController');
        this.callBack = navParams.get('callBack');
    }
    IbcEditorComponent.prototype.resize = function (reset) {
        var element = this.myInput['_elementRef'].nativeElement.getElementsByClassName("text-input")[0];
        if (reset) {
            element.style.height = 'auto';
            this.myInput['_elementRef'].nativeElement.style.height = 'auto';
        }
        else {
            var scrollHeight = element.scrollHeight;
            element.style.height = scrollHeight + 'px';
            this.myInput['_elementRef'].nativeElement.style.height = (scrollHeight + 25) + 'px';
        }
    };
    IbcEditorComponent.prototype.send = function (inputElem) {
        var _this = this;
        var message = inputElem.value;
        // console.log(message);
        if (this.useNavController && this.callBack) {
            this.loadTrackerSvc.loading = true;
            this.callBack({ message: message }).then(function () {
                _this.loadTrackerSvc.loading = false;
                _this.navCtrl.pop();
            });
        }
        else {
            this.viewCtrl.dismiss({ message: message });
        }
    };
    IbcEditorComponent.prototype.cancel = function () {
        if (this.useNavController) {
            this.navCtrl.pop();
        }
        else {
            this.viewCtrl.dismiss();
        }
    };
    IbcEditorComponent.prototype.ionViewDidLoad = function () {
        var _this = this;
        /* Users should still be allowed to type Enter from mobile. */
        if (this.commonSvc.isWeb) {
            setTimeout(function () {
                __WEBPACK_IMPORTED_MODULE_4_jquery__('textarea').keyup(function (event) {
                    if (event.keyCode == 13) {
                        if (event.shiftKey) {
                            event.stopPropagation();
                        }
                        else {
                            setTimeout(function () {
                                _this.send(_this.myInput);
                            });
                        }
                    }
                });
            }, 1000);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])('myInput'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], IbcEditorComponent.prototype, "myInput", void 0);
    IbcEditorComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'editor',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/editor/editor.html"*/'<!--\n  Generated template for the EditorPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <div *ngIf="titleHtml" [innerHtml]=\'titleHtml\'></div>\n    <ion-title *ngIf="titleContent">{{titleContent}}</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n<load-tracker></load-tracker>\n\n<ion-content padding>\n  <ion-textarea #myInput placeholder="Enter a description" maxlength="2000" rows="1" \n   style="border: solid 1px#ccc; background-color: #FFF" (keyup)="resize()"></ion-textarea>\n   <button ion-button (click)="send(myInput)" full>發送消息</button>\n   <button ion-button color="danger" (click)="cancel()" full>取消</button>\n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/components/editor/editor.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_common_common__["a" /* CommonProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */]])
    ], IbcEditorComponent);
    return IbcEditorComponent;
}());

//# sourceMappingURL=editor.js.map

/***/ }),

/***/ 671:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AboutPageModule", function() { return AboutPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__about__ = __webpack_require__(665);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var AboutPageModule = (function () {
    function AboutPageModule() {
    }
    AboutPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__about__["a" /* AboutPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__about__["a" /* AboutPage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__about__["a" /* AboutPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__about__["a" /* AboutPage */]]
        })
    ], AboutPageModule);
    return AboutPageModule;
}());

//# sourceMappingURL=about.module.js.map

/***/ }),

/***/ 672:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActivityPageModule", function() { return ActivityPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__activity__ = __webpack_require__(1083);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var ActivityPageModule = (function () {
    function ActivityPageModule() {
    }
    ActivityPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__activity__["a" /* ActivityPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__activity__["a" /* ActivityPage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__activity__["a" /* ActivityPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__activity__["a" /* ActivityPage */]]
        })
    ], ActivityPageModule);
    return ActivityPageModule;
}());

//# sourceMappingURL=activity.module.js.map

/***/ }),

/***/ 673:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdminNotifPageModule", function() { return AdminNotifPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__admin_notif__ = __webpack_require__(1084);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var AdminNotifPageModule = (function () {
    function AdminNotifPageModule() {
    }
    AdminNotifPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__admin_notif__["a" /* AdminNotifPage */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__admin_notif__["a" /* AdminNotifPage */])
            ],
        })
    ], AdminNotifPageModule);
    return AdminNotifPageModule;
}());

//# sourceMappingURL=admin-notif.module.js.map

/***/ }),

/***/ 674:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdminSmsPageModule", function() { return AdminSmsPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__admin_sms__ = __webpack_require__(1086);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var AdminSmsPageModule = (function () {
    function AdminSmsPageModule() {
    }
    AdminSmsPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__admin_sms__["a" /* AdminSmsPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__admin_sms__["a" /* AdminSmsPage */]),
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__admin_sms__["a" /* AdminSmsPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__admin_sms__["a" /* AdminSmsPage */]]
        })
    ], AdminSmsPageModule);
    return AdminSmsPageModule;
}());

//# sourceMappingURL=admin-sms.module.js.map

/***/ }),

/***/ 675:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdminSystemPageModule", function() { return AdminSystemPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__admin_system__ = __webpack_require__(1087);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var AdminSystemPageModule = (function () {
    function AdminSystemPageModule() {
    }
    AdminSystemPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__admin_system__["a" /* AdminSystemPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__admin_system__["a" /* AdminSystemPage */]),
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__admin_system__["a" /* AdminSystemPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__admin_system__["a" /* AdminSystemPage */]]
        })
    ], AdminSystemPageModule);
    return AdminSystemPageModule;
}());

//# sourceMappingURL=admin-system.module.js.map

/***/ }),

/***/ 676:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BibleBookPageModule", function() { return BibleBookPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__bible_book__ = __webpack_require__(1088);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var BibleBookPageModule = (function () {
    function BibleBookPageModule() {
    }
    BibleBookPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__bible_book__["a" /* BibleBookPage */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__bible_book__["a" /* BibleBookPage */])
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_2__bible_book__["a" /* BibleBookPage */]
            ],
            entryComponents: [
                __WEBPACK_IMPORTED_MODULE_2__bible_book__["a" /* BibleBookPage */]
            ],
        })
    ], BibleBookPageModule);
    return BibleBookPageModule;
}());

//# sourceMappingURL=bible-book.module.js.map

/***/ }),

/***/ 677:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BibleChapterPageModule", function() { return BibleChapterPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__bible_chapter__ = __webpack_require__(1089);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var BibleChapterPageModule = (function () {
    function BibleChapterPageModule() {
    }
    BibleChapterPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__bible_chapter__["a" /* BibleChapterPage */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__bible_chapter__["a" /* BibleChapterPage */])
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_2__bible_chapter__["a" /* BibleChapterPage */]
            ],
            entryComponents: [
                __WEBPACK_IMPORTED_MODULE_2__bible_chapter__["a" /* BibleChapterPage */]
            ],
        })
    ], BibleChapterPageModule);
    return BibleChapterPageModule;
}());

//# sourceMappingURL=bible-chapter.module.js.map

/***/ }),

/***/ 678:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BiblePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_bible_bible__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_s2t_s2t__ = __webpack_require__(56);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





;
var BiblePage = (function () {
    function BiblePage(navCtrl, navParams, platform, s2t, bibleSvc) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.platform = platform;
        this.s2t = s2t;
        this.bibleSvc = bibleSvc;
        this.books = [];
        this.referenced = this.navParams.get('referenced');
        this.platform.ready().then(function () {
            _this.bibleSvc.getBooks().then(function (books) {
                _this.books = books;
            }).catch(function (err) {
            });
        });
    }
    BiblePage.prototype.bookTapped = function (event, item) {
        this.navCtrl.push('bible-book-page', {
            bookNumber: item.SN,
            item: item,
            referenced: this.referenced
        });
    };
    BiblePage.prototype.search = function () {
        this.navCtrl.push('bible-search-page');
        // let popupModal = this.modalCtrl.create(BibleSearchComponent);
        // popupModal.present();
    };
    BiblePage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad BiblePage');
    };
    BiblePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-bible',template:/*ion-inline-start:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/bible/bible.html"*/'<!--\n  Generated template for the BiblePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>聖經（和合本）</ion-title>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content padding no-bounce>\n  <ion-list>\n    <button ion-item *ngFor="let book of books" (click)="bookTapped($event, book)">\n      <!-- <ion-icon [name]="item.icon" item-left></ion-icon> -->\n      <div>\n        <div>{{bibleSvc.s2tConvert(book.FullName)}}</div>\n        <div>{{book.EnglishName}}</div>\n      </div>\n      <div class="item-note" item-right>\n        (共{{book.ChapterNumber}}章)\n      </div>\n    </button>\n  </ion-list>\n\n  <ion-fab right bottom>\n    <button ion-fab color="primary"><ion-icon name="arrow-dropup"></ion-icon></button>\n    <ion-fab-list side="top">\n      <button ion-fab color="light" (click)="search()"><ion-icon name="search"></ion-icon></button>\n    </ion-fab-list>\n  </ion-fab>  \n</ion-content>\n'/*ion-inline-end:"/Users/rossz/workspace/ibc_chinese/ibc_chinese_portal/src/pages/bible/bible.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_3__providers_s2t_s2t__["a" /* S2tProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_bible_bible__["a" /* BibleProvider */]])
    ], BiblePage);
    return BiblePage;
}());

//# sourceMappingURL=bible.js.map

/***/ }),

/***/ 679:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BibleSearchPageModule", function() { return BibleSearchPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__bible_search__ = __webpack_require__(1090);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var BibleSearchPageModule = (function () {
    function BibleSearchPageModule() {
    }
    BibleSearchPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__bible_search__["a" /* BibleSearchPage */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__bible_search__["a" /* BibleSearchPage */])
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_2__bible_search__["a" /* BibleSearchPage */]
            ],
            entryComponents: [
                __WEBPACK_IMPORTED_MODULE_2__bible_search__["a" /* BibleSearchPage */]
            ],
        })
    ], BibleSearchPageModule);
    return BibleSearchPageModule;
}());

//# sourceMappingURL=bible-search.module.js.map

/***/ }),

/***/ 680:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BiblePageModule", function() { return BiblePageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__bible__ = __webpack_require__(678);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var BiblePageModule = (function () {
    function BiblePageModule() {
    }
    BiblePageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__bible__["a" /* BiblePage */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__bible__["a" /* BiblePage */])
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_2__bible__["a" /* BiblePage */]
            ],
            entryComponents: [
                __WEBPACK_IMPORTED_MODULE_2__bible__["a" /* BiblePage */]
            ],
        })
    ], BiblePageModule);
    return BiblePageModule;
}());

//# sourceMappingURL=bible.module.js.map

/***/ }),

/***/ 681:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatPageModule", function() { return ChatPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__chat__ = __webpack_require__(201);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var ChatPageModule = (function () {
    function ChatPageModule() {
    }
    ChatPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__chat__["a" /* ChatPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__chat__["a" /* ChatPage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__chat__["a" /* ChatPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__chat__["a" /* ChatPage */]]
        })
    ], ChatPageModule);
    return ChatPageModule;
}());

//# sourceMappingURL=chat.module.js.map

/***/ }),

/***/ 682:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContactPageModule", function() { return ContactPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__contact__ = __webpack_require__(667);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var ContactPageModule = (function () {
    function ContactPageModule() {
    }
    ContactPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__contact__["a" /* ContactPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__contact__["a" /* ContactPage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__contact__["a" /* ContactPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__contact__["a" /* ContactPage */]]
        })
    ], ContactPageModule);
    return ContactPageModule;
}());

//# sourceMappingURL=contact.module.js.map

/***/ }),

/***/ 683:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DailyVersePageModule", function() { return DailyVersePageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__daily_verse__ = __webpack_require__(1091);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var DailyVersePageModule = (function () {
    function DailyVersePageModule() {
    }
    DailyVersePageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__daily_verse__["a" /* DailyVersePage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__daily_verse__["a" /* DailyVersePage */]),
            ],
        })
    ], DailyVersePageModule);
    return DailyVersePageModule;
}());

//# sourceMappingURL=daily-verse.module.js.map

/***/ }),

/***/ 684:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IframePageModule", function() { return IframePageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__iframe__ = __webpack_require__(1092);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var IframePageModule = (function () {
    function IframePageModule() {
    }
    IframePageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__iframe__["a" /* IframePage */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__iframe__["a" /* IframePage */]),
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */]
            ],
        })
    ], IframePageModule);
    return IframePageModule;
}());

//# sourceMappingURL=iframe.module.js.map

/***/ }),

/***/ 685:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HomePageModule", function() { return HomePageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__home__ = __webpack_require__(187);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var HomePageModule = (function () {
    function HomePageModule() {
    }
    HomePageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__home__["a" /* HomePage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__home__["a" /* HomePage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__home__["a" /* HomePage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__home__["a" /* HomePage */]]
        })
    ], HomePageModule);
    return HomePageModule;
}());

//# sourceMappingURL=home.module.js.map

/***/ }),

/***/ 686:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListPageModule", function() { return ListPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__list__ = __webpack_require__(121);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var ListPageModule = (function () {
    function ListPageModule() {
    }
    ListPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__list__["a" /* ListPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__list__["a" /* ListPage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__list__["a" /* ListPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__list__["a" /* ListPage */]]
        })
    ], ListPageModule);
    return ListPageModule;
}());

//# sourceMappingURL=list.module.js.map

/***/ }),

/***/ 687:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapPageModule", function() { return MapPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__map__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var MapPageModule = (function () {
    function MapPageModule() {
    }
    MapPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__map__["a" /* MapPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__map__["a" /* MapPage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__map__["a" /* MapPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__map__["a" /* MapPage */]]
        })
    ], MapPageModule);
    return MapPageModule;
}());

//# sourceMappingURL=map.module.js.map

/***/ }),

/***/ 688:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MinistryPageModule", function() { return MinistryPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ministry__ = __webpack_require__(1093);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var MinistryPageModule = (function () {
    function MinistryPageModule() {
    }
    MinistryPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__ministry__["a" /* MinistryPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__ministry__["a" /* MinistryPage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__ministry__["a" /* MinistryPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__ministry__["a" /* MinistryPage */]]
        })
    ], MinistryPageModule);
    return MinistryPageModule;
}());

//# sourceMappingURL=ministry.module.js.map

/***/ }),

/***/ 689:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SermonPageModule", function() { return SermonPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__sermon__ = __webpack_require__(1094);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var SermonPageModule = (function () {
    function SermonPageModule() {
    }
    SermonPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__sermon__["a" /* SermonPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__sermon__["a" /* SermonPage */]),
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */]
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__sermon__["a" /* SermonPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__sermon__["a" /* SermonPage */]]
        })
    ], SermonPageModule);
    return SermonPageModule;
}());

//# sourceMappingURL=sermon.module.js.map

/***/ }),

/***/ 690:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SongPageModule", function() { return SongPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__song__ = __webpack_require__(1095);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var SongPageModule = (function () {
    function SongPageModule() {
    }
    SongPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__song__["a" /* SongPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__song__["a" /* SongPage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__song__["a" /* SongPage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__song__["a" /* SongPage */]]
        })
    ], SongPageModule);
    return SongPageModule;
}());

//# sourceMappingURL=song.module.js.map

/***/ }),

/***/ 691:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserProfilePageModule", function() { return UserProfilePageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__user_profile__ = __webpack_require__(117);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_shared_module__ = __webpack_require__(16);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var UserProfilePageModule = (function () {
    function UserProfilePageModule() {
    }
    UserProfilePageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__user_profile__["b" /* UserProfilePage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__app_shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__user_profile__["b" /* UserProfilePage */])
            ],
            exports: [__WEBPACK_IMPORTED_MODULE_2__user_profile__["b" /* UserProfilePage */]],
            entryComponents: [__WEBPACK_IMPORTED_MODULE_2__user_profile__["b" /* UserProfilePage */]]
        })
    ], UserProfilePageModule);
    return UserProfilePageModule;
}());

//# sourceMappingURL=user-profile.module.js.map

/***/ }),

/***/ 732:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__ = __webpack_require__(733);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_web_animations_js_web_animations_min__ = __webpack_require__(737);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_web_animations_js_web_animations_min___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_web_animations_js_web_animations_min__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_env__ = __webpack_require__(41);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__app_module__ = __webpack_require__(738);




// import * as $ from 'jquery';

if (__WEBPACK_IMPORTED_MODULE_3__app_env__["a" /* ENV */].mode == 'Production') {
    Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["_16" /* enableProdMode */])();
}
Object(__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__["a" /* platformBrowserDynamic */])().bootstrapModule(__WEBPACK_IMPORTED_MODULE_4__app_module__["a" /* AppModule */]);
//# sourceMappingURL=main.js.map

/***/ }),

/***/ 738:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export initializer */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser_animations__ = __webpack_require__(739);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ng2_img_cropper_index__ = __webpack_require__(190);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__app_component__ = __webpack_require__(1113);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_home_home_module__ = __webpack_require__(685);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_list_list_module__ = __webpack_require__(686);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_user_profile_user_profile_module__ = __webpack_require__(691);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__pages_ministry_ministry_module__ = __webpack_require__(688);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_contact_contact_module__ = __webpack_require__(682);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__pages_activity_activity_module__ = __webpack_require__(672);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pages_about_about_module__ = __webpack_require__(671);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__pages_admin_system_admin_system_module__ = __webpack_require__(675);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__pages_admin_sms_admin_sms_module__ = __webpack_require__(674);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__pages_admin_notif_admin_notif_module__ = __webpack_require__(673);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__pages_iframe_iframe_module__ = __webpack_require__(684);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__pages_about_app_about_app_module__ = __webpack_require__(279);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__pages_chat_chat_module__ = __webpack_require__(681);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__pages_map_map_module__ = __webpack_require__(687);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__pages_song_song_module__ = __webpack_require__(690);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__pages_bible_bible_module__ = __webpack_require__(680);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__pages_bible_bible_book_module__ = __webpack_require__(676);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__pages_bible_bible_chapter_module__ = __webpack_require__(677);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__pages_bible_bible_search_module__ = __webpack_require__(679);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__pages_monthly_verses_monthly_verses_module__ = __webpack_require__(199);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__pages_sermon_sermon_module__ = __webpack_require__(689);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__pages_daily_verse_daily_verse_module__ = __webpack_require__(683);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__ionic_native_status_bar__ = __webpack_require__(194);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__ionic_native_splash_screen__ = __webpack_require__(731);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__ionic_native_launch_navigator__ = __webpack_require__(198);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__ionic_native_badge__ = __webpack_require__(521);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32_ionic_native__ = __webpack_require__(186);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__ionic_native_camera__ = __webpack_require__(662);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__ionic_native_crop__ = __webpack_require__(663);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__ionic_native_social_sharing__ = __webpack_require__(195);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__ionic_native_in_app_browser__ = __webpack_require__(654);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__ionic_native_youtube_video_player__ = __webpack_require__(520);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__ionic_native_base64__ = __webpack_require__(395);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__ionic_native_native_geocoder__ = __webpack_require__(669);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40_angularfire2_database__ = __webpack_require__(157);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41_angularfire2_auth__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42_angularfire2_firestore__ = __webpack_require__(170);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__ionic_native_google_plus__ = __webpack_require__(305);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__providers_s2t_s2t__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__providers_ibc_style_ibc_style__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47__providers_photo_photo__ = __webpack_require__(118);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__providers_ministry_ministry__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49__providers_video_video__ = __webpack_require__(115);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50__providers_browser_browser__ = __webpack_require__(116);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_52__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_53__ionic_native_file_opener__ = __webpack_require__(188);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_54__ionic_native_file__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_55__ionic_native_file_transfer__ = __webpack_require__(394);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_56__ionic_native_native_audio__ = __webpack_require__(392);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_57__providers_audio_audio__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_58__ionic_native_media__ = __webpack_require__(393);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_59__providers_file_cache_file_cache__ = __webpack_require__(61);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_60__providers_load_tracker_load_tracker__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_61__providers_notification_notification__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_62__providers_bible_bible__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_63__providers_wechat_wechat__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_64__providers_ibc_http_ibc_http__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_65__ionic_native_deeplinks__ = __webpack_require__(196);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_66__shared_module__ = __webpack_require__(16);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_67__providers_ibc_deeplink_ibc_deeplink__ = __webpack_require__(666);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
































// import { SQLite } from '@ionic-native/sqlite';












// Google Authentication

// Local Services











// import { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer';



// import { Media, MediaObject } from '@ionic-native/media';









// const firebaseConfig = {
//     apiKey: "AIzaSyDFkwr578ZYuu0PPQxd5MN2-OCh4O7oKtc",
//     authDomain: "resplendent-heat-6828.firebaseapp.com",
//     databaseURL: "https://resplendent-heat-6828.firebaseio.com",
//     projectId: "resplendent-heat-6828",
//     storageBucket: "resplendent-heat-6828.appspot.com",
//     messagingSenderId: "870700462998"
//   };
function initializer(commonSvc) {
    return function () {
        console.log(commonSvc);
        return commonSvc.resolve();
    };
}
var AppModule = (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_5__app_component__["a" /* MyApp */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser_animations__["a" /* BrowserAnimationsModule */],
                __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["e" /* IonicModule */].forRoot(__WEBPACK_IMPORTED_MODULE_5__app_component__["a" /* MyApp */], {}, {
                    links: [
                        { loadChildren: '../pages/about-app/about-app.module#AboutAppPageModule', name: 'about-app-page', segment: 'about-app', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/about/about.module#AboutPageModule', name: 'about-page', segment: 'about', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/activity/activity.module#ActivityPageModule', name: 'activity-page', segment: 'activity/:id', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/admin-notif/admin-notif.module#AdminNotifPageModule', name: 'admin-notif-page', segment: 'admin-notif', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/admin-sms/admin-sms.module#AdminSmsPageModule', name: 'admin-sms-page', segment: 'admin-sms', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/admin-system/admin-system.module#AdminSystemPageModule', name: 'admin-system-page', segment: 'admin-system', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/app-link/app-link.module#AppLinkPageModule', name: 'app-link-page', segment: 'app-link/:path', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/bible/bible-book.module#BibleBookPageModule', name: 'bible-book-page', segment: 'bible/:bookNumber', priority: 'low', defaultHistory: ['bible-page'] },
                        { loadChildren: '../pages/bible/bible-chapter.module#BibleChapterPageModule', name: 'bible-chapter-page', segment: 'bible/:bookNumber/:chapterNumber/:verseNumber', priority: 'low', defaultHistory: ['bible-page', 'bible-book-page'] },
                        { loadChildren: '../pages/bible/bible-search.module#BibleSearchPageModule', name: 'bible-search-page', segment: 'bible-search', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/bible/bible.module#BiblePageModule', name: 'bible-page', segment: 'bible', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/chat/chat.module#ChatPageModule', name: 'chat-page', segment: 'chat/:partnerId', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/contact/contact.module#ContactPageModule', name: 'contact-page', segment: 'contact', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/daily-verse/daily-verse.module#DailyVersePageModule', name: 'daily-verse-page', segment: 'daily-verse/:date', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/iframe/iframe.module#IframePageModule', name: 'iframe-page', segment: 'iframe/:title/:url', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/home/home.module#HomePageModule', name: 'home-page', segment: 'home', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/list/list.module#ListPageModule', name: 'list-page', segment: 'list/:type', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/map/map.module#MapPageModule', name: 'map-page', segment: 'map/:title/:address', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/ministry/ministry.module#MinistryPageModule', name: 'ministry-page', segment: 'ministry/:forDate', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/monthly-verses/monthly-verses.module#MonthlyVersesPageModule', name: 'MonthlyVersesPage', segment: 'monthly-verses', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/sermon/sermon.module#SermonPageModule', name: 'sermon-page', segment: 'sermon/:id', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/song/song.module#SongPageModule', name: 'song-page', segment: 'song/:id', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/user-profile/user-profile.module#UserProfilePageModule', name: 'user-profile', segment: 'user-profile', priority: 'low', defaultHistory: [] }
                    ]
                }),
                __WEBPACK_IMPORTED_MODULE_40_angularfire2_database__["b" /* AngularFireDatabaseModule */],
                __WEBPACK_IMPORTED_MODULE_41_angularfire2_auth__["b" /* AngularFireAuthModule */],
                __WEBPACK_IMPORTED_MODULE_42_angularfire2_firestore__["b" /* AngularFirestoreModule */],
                __WEBPACK_IMPORTED_MODULE_4_ng2_img_cropper_index__["c" /* ImageCropperModule */],
                __WEBPACK_IMPORTED_MODULE_66__shared_module__["a" /* SharedModule */],
                __WEBPACK_IMPORTED_MODULE_6__pages_home_home_module__["HomePageModule"],
                __WEBPACK_IMPORTED_MODULE_12__pages_about_about_module__["AboutPageModule"],
                __WEBPACK_IMPORTED_MODULE_17__pages_about_app_about_app_module__["AboutAppPageModule"],
                __WEBPACK_IMPORTED_MODULE_11__pages_activity_activity_module__["ActivityPageModule"],
                __WEBPACK_IMPORTED_MODULE_21__pages_bible_bible_module__["BiblePageModule"],
                __WEBPACK_IMPORTED_MODULE_22__pages_bible_bible_book_module__["BibleBookPageModule"],
                __WEBPACK_IMPORTED_MODULE_23__pages_bible_bible_chapter_module__["BibleChapterPageModule"],
                __WEBPACK_IMPORTED_MODULE_24__pages_bible_bible_search_module__["BibleSearchPageModule"],
                __WEBPACK_IMPORTED_MODULE_25__pages_monthly_verses_monthly_verses_module__["MonthlyVersesPageModule"],
                __WEBPACK_IMPORTED_MODULE_26__pages_sermon_sermon_module__["SermonPageModule"],
                __WEBPACK_IMPORTED_MODULE_18__pages_chat_chat_module__["ChatPageModule"],
                __WEBPACK_IMPORTED_MODULE_7__pages_list_list_module__["ListPageModule"],
                __WEBPACK_IMPORTED_MODULE_19__pages_map_map_module__["MapPageModule"],
                __WEBPACK_IMPORTED_MODULE_9__pages_ministry_ministry_module__["MinistryPageModule"],
                __WEBPACK_IMPORTED_MODULE_13__pages_admin_system_admin_system_module__["AdminSystemPageModule"],
                __WEBPACK_IMPORTED_MODULE_14__pages_admin_sms_admin_sms_module__["AdminSmsPageModule"],
                __WEBPACK_IMPORTED_MODULE_15__pages_admin_notif_admin_notif_module__["AdminNotifPageModule"],
                __WEBPACK_IMPORTED_MODULE_16__pages_iframe_iframe_module__["IframePageModule"],
                __WEBPACK_IMPORTED_MODULE_10__pages_contact_contact_module__["ContactPageModule"],
                __WEBPACK_IMPORTED_MODULE_20__pages_song_song_module__["SongPageModule"],
                __WEBPACK_IMPORTED_MODULE_8__pages_user_profile_user_profile_module__["UserProfilePageModule"],
                __WEBPACK_IMPORTED_MODULE_27__pages_daily_verse_daily_verse_module__["DailyVersePageModule"]
            ],
            bootstrap: [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["c" /* IonicApp */]],
            providers: [
                __WEBPACK_IMPORTED_MODULE_54__ionic_native_file__["a" /* File */],
                __WEBPACK_IMPORTED_MODULE_53__ionic_native_file_opener__["a" /* FileOpener */],
                __WEBPACK_IMPORTED_MODULE_55__ionic_native_file_transfer__["a" /* FileTransfer */],
                __WEBPACK_IMPORTED_MODULE_38__ionic_native_base64__["a" /* Base64 */],
                __WEBPACK_IMPORTED_MODULE_58__ionic_native_media__["a" /* Media */],
                __WEBPACK_IMPORTED_MODULE_39__ionic_native_native_geocoder__["a" /* NativeGeocoder */],
                __WEBPACK_IMPORTED_MODULE_28__ionic_native_status_bar__["a" /* StatusBar */],
                __WEBPACK_IMPORTED_MODULE_29__ionic_native_splash_screen__["a" /* SplashScreen */],
                __WEBPACK_IMPORTED_MODULE_32_ionic_native__["d" /* SQLite */],
                { provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["u" /* ErrorHandler */], useClass: __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["d" /* IonicErrorHandler */] },
                __WEBPACK_IMPORTED_MODULE_45__providers_s2t_s2t__["a" /* S2tProvider */],
                __WEBPACK_IMPORTED_MODULE_43__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */],
                __WEBPACK_IMPORTED_MODULE_52__providers_common_common__["a" /* CommonProvider */],
                __WEBPACK_IMPORTED_MODULE_44__ionic_native_google_plus__["a" /* GooglePlus */],
                __WEBPACK_IMPORTED_MODULE_33__ionic_native_camera__["a" /* Camera */],
                __WEBPACK_IMPORTED_MODULE_34__ionic_native_crop__["a" /* Crop */],
                __WEBPACK_IMPORTED_MODULE_56__ionic_native_native_audio__["a" /* NativeAudio */],
                __WEBPACK_IMPORTED_MODULE_35__ionic_native_social_sharing__["a" /* SocialSharing */],
                __WEBPACK_IMPORTED_MODULE_36__ionic_native_in_app_browser__["a" /* InAppBrowser */],
                __WEBPACK_IMPORTED_MODULE_37__ionic_native_youtube_video_player__["a" /* YoutubeVideoPlayer */],
                __WEBPACK_IMPORTED_MODULE_46__providers_ibc_style_ibc_style__["a" /* IbcStyleProvider */],
                __WEBPACK_IMPORTED_MODULE_47__providers_photo_photo__["a" /* PhotoProvider */],
                __WEBPACK_IMPORTED_MODULE_48__providers_ministry_ministry__["a" /* MinistryProvider */],
                __WEBPACK_IMPORTED_MODULE_49__providers_video_video__["a" /* VideoProvider */],
                __WEBPACK_IMPORTED_MODULE_50__providers_browser_browser__["a" /* BrowserProvider */],
                __WEBPACK_IMPORTED_MODULE_51__providers_data_adaptor_data_adaptor__["a" /* DataProvider */],
                __WEBPACK_IMPORTED_MODULE_57__providers_audio_audio__["a" /* AudioProvider */],
                __WEBPACK_IMPORTED_MODULE_30__ionic_native_launch_navigator__["a" /* LaunchNavigator */],
                __WEBPACK_IMPORTED_MODULE_59__providers_file_cache_file_cache__["a" /* FileCacheProvider */],
                __WEBPACK_IMPORTED_MODULE_60__providers_load_tracker_load_tracker__["a" /* LoadTrackerProvider */],
                __WEBPACK_IMPORTED_MODULE_31__ionic_native_badge__["a" /* Badge */],
                __WEBPACK_IMPORTED_MODULE_61__providers_notification_notification__["a" /* NotificationProvider */],
                __WEBPACK_IMPORTED_MODULE_62__providers_bible_bible__["a" /* BibleProvider */],
                __WEBPACK_IMPORTED_MODULE_64__providers_ibc_http_ibc_http__["a" /* IbcHttpProvider */],
                __WEBPACK_IMPORTED_MODULE_63__providers_wechat_wechat__["a" /* WechatProvider */],
                __WEBPACK_IMPORTED_MODULE_65__ionic_native_deeplinks__["a" /* Deeplinks */],
                __WEBPACK_IMPORTED_MODULE_67__providers_ibc_deeplink_ibc_deeplink__["a" /* IbcDeeplinkProvider */],
                {
                    provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["c" /* APP_INITIALIZER */],
                    useFactory: initializer,
                    deps: [__WEBPACK_IMPORTED_MODULE_52__providers_common_common__["a" /* CommonProvider */]],
                    multi: true
                }
            ]
        })
    ], AppModule);
    return AppModule;
}());

//# sourceMappingURL=app.module.js.map

/***/ }),

/***/ 89:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IbcStyleProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

/*
  Generated class for the IbcStyleProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var IbcStyleProvider = (function () {
    function IbcStyleProvider() {
    }
    Object.defineProperty(IbcStyleProvider.prototype, "randomBg", {
        get: function () {
            return "home-bg-" + Math.round(Math.random() * 10);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IbcStyleProvider.prototype, "stdBg", {
        get: function () {
            return 'std-bg';
        },
        enumerable: true,
        configurable: true
    });
    IbcStyleProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [])
    ], IbcStyleProvider);
    return IbcStyleProvider;
}());

//# sourceMappingURL=ibc-style.js.map

/***/ }),

/***/ 90:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MinistryProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_ibc_firebase_ibc_firebase__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common_common__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_rxjs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash__ = __webpack_require__(664);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








// export const MinistryRoles = [
//     { "key": "leader", "caption": "主席", "optionGetter": "leaderCandidates" },
//     { "key": "preacher", "caption": "講員", "optionGetter": "preacherCandidates" },
//     { "key": "interpreter", "caption": "傳譯", "optionGetter": "interpreterCandidates" },
//     { "key": "choir1", "caption": "敬拜1", "optionGetter": "choirCandidates" },
//     { "key": "choir2", "caption": "敬拜2", "optionGetter": "choirCandidates" },
//     { "key": "music1", "caption": "司樂1", "optionGetter": "musicCandidates" },
//     { "key": "music2", "caption": "司樂2", "optionGetter": "musicCandidates" },
//     { "key": "assistant1", "caption": "司事1", "optionGetter": "assistantCandidates" },
//     { "key": "assistant2", "caption": "司事2", "optionGetter": "assistantCandidates" },
//     { "key": "techanician", "caption": "影音", "optionGetter": "techCandidates" },
//     { "key": "morningtea1", "caption": "茶點1", "optionGetter": "morningteaCandidates" },
//     { "key": "morningtea2", "caption": "茶點2", "optionGetter": "morningteaCandidates" },
//     { "key": "communion1", "caption": "襄禮1", "optionGetter": "communionCandidates" },
//     { "key": "communion2", "caption": "襄禮2", "optionGetter": "communionCandidates" },
// ];
// export const MinistrySkills = [
//         { "key": "leader", "caption": "主席" },
//         { "key": "preacher", "caption": "講員" },
//         { "key": "interpreter", "caption": "傳譯" },
//         { "key": "choir", "caption": "敬拜" },
//         { "key": "music", "caption": "司樂" },
//         { "key": "assistant", "caption": "司事" },
//         { "key": "techanician", "caption": "影音" },
//         { "key": "morningtea", "caption": "茶點" },
//         { "key": "communion", "caption": "襄禮" }
// ];
/*
  Generated class for the MinistryProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var MinistryProvider = (function () {
    function MinistryProvider(ibcFB, toastCtrl, common, content) {
        var _this = this;
        this.ibcFB = ibcFB;
        this.toastCtrl = toastCtrl;
        this.common = common;
        this.content = content;
        this.ministrySheets = [];
        this.originalMinistrySheets = [];
        this.allContacts = [];
        this.dataReady$ = new __WEBPACK_IMPORTED_MODULE_5_rxjs__["BehaviorSubject"](null);
        this.ministrySkills = [];
        this.ministryRoles = common.text.chinese['ministry-roles'];
        this.ministrySkills = [];
        this.ministryRoles.forEach(function (mr) {
            var key = mr.key.replace(/\d+$/, '');
            var caption = mr.caption.replace(/\d+$/, '');
            var existing = _this.ministrySkills.filter(function (ms) { return ms.key == key; })[0];
            if (!existing) {
                _this.ministrySkills.push({ key: key, caption: caption });
            }
        });
        this.ibcFB.afDB.database.ref("urls").once('value', function (snapshot) {
            var urls = snapshot.val();
            _this.publishUrl = urls.ministry;
        });
        this.content.ibcFB.userProfile$.subscribe(function (auth) {
            // console.log("========== user profile changed! ============");
            setTimeout(function () {
                _this.subscribe();
            }, 1000);
        });
    }
    Object.defineProperty(MinistryProvider.prototype, "readonly", {
        get: function () {
            return this.common.readonly;
        },
        enumerable: true,
        configurable: true
    });
    MinistryProvider.prototype.getContact = function (id) {
        return this.allContacts.filter(function (contact) { return contact.id == id; })[0];
    };
    MinistryProvider.prototype.undo = function () {
        this.ministrySheets = __WEBPACK_IMPORTED_MODULE_7_lodash__["cloneDeep"](this.originalMinistrySheets);
    };
    MinistryProvider.prototype.subscribe = function () {
        var _this = this;
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
        this.subscription = __WEBPACK_IMPORTED_MODULE_5_rxjs__["Observable"].combineLatest(this.content.ministries$, this.content.allContacts$)
            .subscribe(function (res) {
            _this.originalMinistrySheets = res[0];
            // console.log('=== original ministrySheet');
            // console.log(this.originalMinistrySheets);
            _this.allContacts = res[1];
            _this.dataReady$.next(_this.originalMinistrySheets);
            _this.undo();
        }, console.error, function () {
            console.log('=== ministry Svc subscription ends!');
        });
    };
    MinistryProvider.prototype.getCandidates = function (role) {
        if (!role || !role.key)
            return [];
        var key = role.key.replace(/\d+$/, '');
        return this.allContacts.filter(function (contact) { return contact.skills && contact.skills.indexOf(key) > -1; });
    };
    MinistryProvider.prototype.saveSheet = function () {
        var ref = this.ibcFB.afDB.database.ref('ministries');
        console.log(this.ministrySheets);
        return ref.set(this.ministrySheets);
    };
    MinistryProvider.prototype.pushSheet = function () {
        if (this.ministrySheets.length > 7) {
            return;
        }
        var mFurthestDate = __WEBPACK_IMPORTED_MODULE_6_moment__(this.ministrySheets[this.ministrySheets.length - 1].date);
        var newDate = mFurthestDate.add(7, 'days').toDate();
        var newSheet = { date: __WEBPACK_IMPORTED_MODULE_6_moment__(newDate).format("YYYY-MM-DD") };
        this.ministrySheets.push(newSheet);
    };
    MinistryProvider.prototype.popSheet = function () {
        if (this.ministrySheets.length == 1) {
            return;
        }
        this.ministrySheets.pop();
    };
    MinistryProvider.prototype.spliceSheet = function (i) {
        if (this.ministrySheets.length == 1) {
            return;
        }
        this.ministrySheets.splice(i, 1);
    };
    MinistryProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__providers_ibc_firebase_ibc_firebase__["a" /* IbcFirebaseProvider */], __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_common_common__["a" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_data_adaptor_data_adaptor__["a" /* DataProvider */]])
    ], MinistryProvider);
    return MinistryProvider;
}());

//# sourceMappingURL=ministry.js.map

/***/ })

},[732]);
//# sourceMappingURL=main.js.map